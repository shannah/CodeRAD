<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="Steve Hannah">
<title>Developing Native Mobile Apps with CodeRAD</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Developing Native Mobile Apps with CodeRAD</h1>
<div class="details">
<span id="author" class="author">Steve Hannah</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_preface">Preface</a></li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_what_is_codename_one">1.1. What is Codename One?</a></li>
<li><a href="#_what_is_coderad">1.2. What is CodeRAD?</a></li>
<li><a href="#_goals_of_coderad">1.3. Goals of CodeRAD</a></li>
<li><a href="#_fundamental_concepts">1.4. Fundamental Concepts</a></li>
<li><a href="#entities-properties-schemas-tags">1.5. Entities, Properties, Schemas and Tags</a></li>
<li><a href="#_views">1.6. Views</a></li>
<li><a href="#_controllers_and_actions">1.7. Controllers and Actions</a></li>
</ul>
</li>
<li><a href="#getting-started">2. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#cloning-project">2.1. Customizing the Maven Artifact Coordinates</a></li>
<li><a href="#under-the-hood">2.2. Under the Hood</a></li>
<li><a href="#hot-reload">2.3. Hot Reload</a></li>
<li><a href="#_changing_the_styles">2.4. Changing the Styles</a></li>
<li><a href="#_adding_more_components">2.5. Adding More Components</a></li>
<li><a href="#adding-actions">2.6. Adding Actions</a></li>
<li><a href="#_creating_menus">2.7. Creating Menus</a></li>
<li><a href="#form-navigation">2.8. Form Navigation</a></li>
<li><a href="#_models">2.9. Models</a></li>
<li><a href="#_fun_with_bindings">2.10. Fun with Bindings</a></li>
<li><a href="#_transitions">2.11. Transitions</a></li>
<li><a href="#entity-lists">2.12. Entity Lists</a></li>
<li><a href="#intraform-navigation">2.13. Intra-Form Navigation</a></li>
<li><a href="#_custom_view_controllers">2.14. Custom View Controllers</a></li>
<li><a href="#views-within-views">2.15. Views within Views</a></li>
<li><a href="#_developing_custom_components">2.16. Developing Custom Components</a></li>
</ul>
</li>
<li><a href="#_app_example_1_a_twitter_clone">3. App Example 1: A Twitter Clone</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_project">3.1. Creating the Project</a></li>
<li><a href="#_creating_the_views">3.2. Creating the Views</a></li>
<li><a href="#_hot_reload">3.3. Hot Reload</a></li>
<li><a href="#_the_welcome_page">3.4. The Welcome Page</a></li>
<li><a href="#_the_signup_page">3.5. The Signup Page</a></li>
<li><a href="#_the_login_page">3.6. The Login Page</a></li>
<li><a href="#_the_news_feed">3.7. The News Feed</a></li>
<li><a href="#_search_bar_and_side_bar">3.8. Search Bar and Side Bar</a></li>
<li><a href="#_the_global_navigation_tabs">3.9. The Global Navigation Tabs</a></li>
<li><a href="#_summary">3.10. Summary</a></li>
</ul>
</li>
<li><a href="#_controllers">4. Controllers</a>
<ul class="sectlevel2">
<li><a href="#_application_structure_and_form_navigation_pre_coderad">4.1. Application Structure and Form Navigation Pre-CodeRAD</a></li>
<li><a href="#_app_structure_as_a_tree">4.2. App Structure as a Tree</a></li>
<li><a href="#_coderad_core_controllers">4.3. CodeRAD Core Controllers</a></li>
<li><a href="#_event_propagation_2">4.4. Event Propagation</a></li>
<li><a href="#_code_sharing_lookups">4.5. Code-sharing / Lookups</a></li>
<li><a href="#_example_controllers">4.6. Example Controllers</a></li>
<li><a href="#_form_navigation">4.7. Form Navigation</a></li>
</ul>
</li>
<li><a href="#_serialization_working_with_xml_and_json">5. Serialization: Working with XML and JSON</a>
<ul class="sectlevel2">
<li><a href="#_useful_classes">5.1. Useful Classes</a></li>
<li><a href="#_starting_at_the_end_xml_to_entity">5.2. Starting at the end&#8230;&#8203; XML to Entity</a></li>
<li><a href="#json-to-entity">5.3. JSON to Entity</a></li>
<li><a href="#_a_birds_eye_view">5.4. A Bird&#8217;s-eye View</a></li>
<li><a href="#_parsing_xml_and_json">5.5. Parsing XML and JSON</a></li>
<li><a href="#_querying_xml_and_json_data_using_result">5.6. Querying XML and JSON Data Using <code>Result</code></a></li>
<li><a href="#_resultparser_from_xmljson_to_entities">5.7. <code>ResultParser</code> - From XML/JSON to Entities</a></li>
<li><a href="#_asynchronous_parsing">5.8. Asynchronous Parsing</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_preface">Preface</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_is_codename_one">1.1. What is Codename One?</h3>
<div class="paragraph">
<p><a href="https://www.codenameone.com">Codename One</a> is a toolkit for Java and Kotlin developers who want to build native apps for both iOS and Android, but don&#8217;t want to have to maintain two separate codebases. It provides a cross-platform SDK for developing native mobile apps using a single codebase with 100% code reuse between iOS and Android.</p>
</div>
<div class="paragraph">
<p>Unlike Flutter, which uses Dart as programming language,
Codename One apps are written in Java or Kotlin, giving you access to its well established and mature eco-system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_coderad">1.2. What is CodeRAD?</h3>
<div class="paragraph">
<p>CodeRAD is a library for Codename One that facilitates rapid development of Codename One apps using established design patterns such as dependency injection and MVC (model-view-controller) .  It includes foundation classes for developing models, views, and controllers, which dramatically increases code re-use and reduces application complexity.  It also provides an XML-based declarative language for building views.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<div class="title">From Wikipedia:</div>
<p>Model–view–controller (usually known as MVC) is a software design pattern commonly used for developing user interfaces which divides the related program logic into three interconnected elements. This is done to separate internal representations of information from the ways information is presented to and accepted from the user. This kind of pattern is used for designing the layout of the page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/MVC-Process.svg/200px-MVC-Process.svg.png" alt="200px MVC Process.svg">
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_goals_of_coderad">1.3. Goals of CodeRAD</h3>
<div class="paragraph">
<p>CodeRAD aims to increase developer productivity in building mobile applications by:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Employing MVC (Model-View-Controller) principles</strong> for structuring applications, leading to cleaner code that is easier to maintain.</p>
</li>
<li>
<p><strong>Providing reusable, high-level UI components</strong> that can be easily integrated into applications without having to do any UI design.</p>
</li>
<li>
<p><strong>Providing Extensible Application Templates</strong> that can be used as a starting point for building complete applications.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Another way of stating this is to say that CodeRAD aims provide second, and third order components to mobile app developers, as described in the following sections.</p>
</div>
<div class="sect3">
<h4 id="_first_order_ui_components_vs_second_order_ui_components">1.3.1. First-Order UI Components vs Second-Order UI Components</h4>
<div class="paragraph">
<p>A first-order UI component is a basic UI component, like a label, button, or text field, that is completely application-agnostic.  These form the fundamental building blocks of a GUI application, they need to be stitched together by the developer to form a coherent user interface for the user.</p>
</div>
<div class="paragraph">
<p>A second-order UI component is a complex UI component, usually composed of multiple basic components, which is designed for a specific type of application.  Some examples of second-order UI components are login forms, contacts lists, chat room components, news lists, etc..</p>
</div>
<div class="paragraph">
<p>First-order components are easier to develop and reuse because they don&#8217;t rely on any particular "model" or application type.  But having to reinvent the wheel every time you need a common type of second-order component (e.g. a login form) can be tedious and time-consuming.</p>
</div>
<div class="paragraph">
<p>Second-order components, being more complex, are harder to develop, and even harder to re-use.  Most second-order components are so application-specific that they are of no use to any app other than the one it was originally built for.</p>
</div>
<div class="paragraph">
<p>The Codename One core library includes a comprehensive set of first-order components, but very few second-order components, because of the reusability issues. There are lots of tutorials on how to build your own second-order components using the core components as building blocks, but even this can be time-consuming.</p>
</div>
<div class="paragraph">
<p>CodeRAD aims to improve the situation by providing a foundation for second-order UI components such as chat rooms, login forms, settings forms, and contact lists.  The key innovation that makes this possible is its use of "loose-coupling" to allow for greater degree of reusability and customization.  The goal is to develop UI kits for as many genres of applications as possible.  The first proof-of-concept component was the <a href="https://github.com/shannah/RADChatRoom">ChatRoomView</a>, which provides a fully-functional UI chat room component.  The second project is the <a href="https://github.com/shannah/TweetAppUIKit">Tweet App UI Kit</a> which provides high-quality UI components for building apps like Twitter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_third_order_ui_components_app_in_a_box">1.3.2. Third-Order UI Components: App-in-a-Box</h4>
<div class="paragraph">
<p>A third-order component is a reusable UI component that provides full-application functionality out of the box.  The same principles used by CodeRAD to build second-order components could theoretically be used to produce fully-functional, yet reusable and customizable applications as turn-key components.  This is beyond the initial scope of CodeRAD&#8217;s aims, but after we&#8217;ve tamed enough of the second-order frontier, we may broaden our horizons and begin targetting entirely reusable apps.  Stay tuned&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_fundamental_concepts">1.4. Fundamental Concepts</h3>
<div class="paragraph">
<p>There are just a few fundamental concepts required to start using CodeRAD to accelerate your development.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC (Model-View-Controller)</a> - A design pattern employed by CodeRAD which is used for developing user interfaces which divides the related program logic into three interconnected elements</p>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/MVC-Process.svg/200px-MVC-Process.svg.png" alt="200px MVC Process.svg">
</div>
</div>
</li>
<li>
<p><strong>Entities</strong> - CodeRAD introduces <code>RADEntity</code>, a base class for "model" classes.  This includes all the required plumbing for developing reusable components, such as property binding, property change events, data conversion, property lookup, etc&#8230;&#8203;</p>
</li>
<li>
<p><strong>Tags</strong> - Tags enable loose-coupling of components.  Properties may contain one or more "tags" which can be used as a more generic way to reference properties on an entity.</p>
</li>
<li>
<p><strong>Views</strong> - A View is a user interface component that renders a model in a specific way.</p>
</li>
<li>
<p><strong>Controllers</strong> - Controllers define the structure and flow of an application.  All user interaction is handled by the controller.  Your application&#8217;s main class will be an instance of <code>ApplicationController</code>.  Each form can have an associated <code>FormController</code>.  In some cases you may associate a <code>ViewController</code> with other UI components also.</p>
</li>
<li>
<p><strong>Actions</strong> - Actions provide a means of extending the functionality of a view.  Each view will publish a list of action categories that it supports.  The controller may then register actions in these categories to embed buttons, menus, and functionality into the view.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="entities-properties-schemas-tags">1.5. Entities, Properties, Schemas and Tags</h3>
<div class="paragraph">
<p>The <strong>Entity</strong> sits at the core of CodeRAD.  The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a> class is the base class of all model classes in CodeRAD.  Each <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a> has an <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/EntityType.html">EntityType</a> which defines the properties that are available in an entity.  Properties, in turn, may be "tagged" with zero or more <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Tag.html">Tag</a>s.  These tags can be used to lookup properties on an entity in a more generic way than referring to the property itself.</p>
</div>
<div class="paragraph">
<p>We provide a set of existing tags in the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/schemas/package-frame.html">schemas</a> package that can be used as a common foundation by both models and views.  These tags were adapted from the schema definitions at <a href="https://schema.org" class="bare">https://schema.org</a>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://schema.org" class="bare">https://schema.org</a> provides a large set of schemas for common data types that one might need in an application.  It provides a base schema, <a href="https://schema.org/Thing">Thing</a> that includes properties that may be common to any type of "thing", such as <code>name</code>, <code>description</code>, <code>identifier</code>, <code>image</code> etc..  This schema has been ported into Java as the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/schemas/Thing.html">Thing</a> interface.</p>
</div>
<div class="paragraph">
<p>Each property has a corresponding <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Tag.html">Tag</a> defined.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The concept of tags is a simple one, but they have powerful effect.  If a view needs to render its model&#8217;s "phone number" (e.g. a contact list view), then it doesn&#8217;t need to know anything about the properties in the model.  It is able to look up the phone number of the model by the <code>Person.telephone</code> tag:</p>
</div>
<div class="listingblock java">
<div class="content">
<pre class="CodeRay highlight"><code>String telephone = model.getText(Person.telephone);</code></pre>
</div>
</div>
<div class="paragraph">
<p>As long as the model includes a property that is tagged with the <code>Person.telephone</code> tag, this will work.  If the model doesn&#8217;t include this property, then this will simply return null.</p>
</div>
<div class="paragraph">
<p>The following diagram depicts how Tags can be used as a sort of "glue" layer between the View and the Model, and Action categories (discussed later under "Controllers") as a glue lasyer between the View and the Controller.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Entity-Property-Tag-MVC.png" alt="Entity Property Tag MVC">
</div>
<div class="title">Figure 1. Tags are used to bind views to the appropriate properties of their view model using loose coupling.  Action categories are used to bind views to their controllers using loose coupling.</div>
</div>
<div class="sect3">
<h4 id="_example_entity_class">1.5.1. Example Entity Class</h4>
<div class="paragraph">
<p>The following figure shows the definition of a very simple entity class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.schemas.Person</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.Entity</span>;

<span style="color:#007">@RAD</span> <b class="conum">(1)</b>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">interface</span> <span style="color:#B06;font-weight:bold">UserProfile</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Entity</span> &lt;<span style="color:#00D">2</span>&gt; {
    <span style="color:#007">@RAD</span>(tag=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span>) <b class="conum">(3)</b>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> getName();
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> setName(<span style="color:#0a8;font-weight:bold">String</span> name);

    <span style="color:#007">@RAD</span>(tag=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.description</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> getDescription();
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> setDescription(<span style="color:#0a8;font-weight:bold">String</span> description);

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>@RAD</code> annotation tells the CodeRAD annotation processor to generate a concrete implementation for this class, as well as a Wrapper class.</p>
</li>
<li>
<p>We extend the <code>Entity</code> interface which all model classes must implement.</p>
</li>
<li>
<p>The <code>@RAD(tag="Person.name")</code> annotation tells the CodeRAD annotation processor to bind the <code>getName()</code> method to the <code>Person.name</code> tag.  This means that <code>myProfile.getName()</code> would be the same as <code>myProfile.getText(Person.name)</code>, and <code>myProfile.setName(name)</code> is the same as <code>myProfile.setText(Person.name, name)</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The CodeRAD annotation processor will generate two concrete implementations of our <code>UserProfile</code> interface during compilation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>UserProfileImpl</em> : A default implementation of the UserProfile interface that you can use for instantiating the User profile.  E.g. When you want to create a new instance of <code>UserProfile</code>, you could call:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">UserProfile myProfile = <span style="color:#080;font-weight:bold">new</span> UserProfileImpl();</code></pre>
</div>
</div>
</li>
<li>
<p><em>UserProfileWrapper</em> : A class that can "wrap" an entity of any type to allow the <code>UserProfile</code> interface to be used to interact with it.  This is handy for converting between different entity types that support the same tags.  It forms part of the basis for the loose-coupling feature that makes CodeRAD such a powerful toolkit.  This wrapper class includes a static <code>wrap()</code> method that takes an entity as a parameter, and returns either the same entity (if it already implements <em>UserProfile</em>), or wraps it with <em>UserProfileWrapper</em> (if it doesn&#8217;t implement <em>UserProfile</em>.).  You can think of this sort of like casting one Entity type to another Entity type. E.g.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#0a8;font-weight:bold">Entity</span> someEntity = ...;
UserProfile profile = UserProfileWrapper.wrap(someEntity);
<span style="color:#0a8;font-weight:bold">String</span> name = profile.getName();
    <span style="color:#777">// This calls someEntity.getText(Person.name) internally</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_property_values">1.5.2. Accessing Property Values</h4>
<div class="paragraph">
<p>You can access property values using the "getter" methods of your entity type.  E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">myProfile.getName(); <span style="color:#777">// returns the profile name</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can access them using the tag that was assigned to the property.  e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">myProfile.getText(Person.name); <span style="color:#777">// Returns the profile name</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The two examples above are equivalent for our <em>UserProfile</em> entity because we assigned the <code>Person.name</code> tag to the <em>name</em> property of our entity.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Which method you use will depend on the context.  Use the first form if you are working with a <em>UserProfile</em> object directly.  Use the 2nd form if you are working with an <em>Entity</em> of unknown type and you want to retrieve or set its <code>Person.name</code> property.  This is especially handy for developing reusable UI components that expect models to include certain "tags".  For example, a "Contact Card" component probably expects a <code>Person.name</code>, <code>Person.email</code>, <code>Person.phone</code>, etc.. property, but it doesn&#8217;t care exactly what type of model it is.  That way it will work with any Entity class that it is given.  All the Entity class needs to do is include properties corresponding to those tags.  It goes without saying that such a view would need to be able to handle the case where the entity doesn&#8217;t inclode one or more of those tags.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_views">1.6. Views</h3>
<div class="paragraph">
<p>The "View" is the piece of the MVC pie that we are most interested in sharing and reusing.  A View is a <a href="https://www.codenameone.com/javadoc/com/codename1/ui/Component.html">Component</a> that includes support to "bind" to a view model (an <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/models/Entity.html">Entity</a>), such that when properties on the view model are changed, the "View" updates to reflect the change.</p>
</div>
<div class="paragraph">
<p>The recommended way to develop views is using RADL, Code RAD&#8217;s declarative markup language for creating visual components.  RADL files are converted to Java view classes at compile time by CodeRAD&#8217;s annotation processor.</p>
</div>
<div class="paragraph">
<p>The following is a basic RADL file that simply displays "Hello World"</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can also create views directly using Java or Kotlin by extending either <code>AbstractEntityView</code> or <code>EntityListView</code>.  However, using RADL is much easier, and provides many other benefits, such as dependency injection to make like more enjoyable.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Views should be placed inside the <em>common</em> module in the <em>src/main/rad/views</em> directory, using Java package hierarchy conventions.  E.g. If want your view to compile to the class <code>com.example.MyView</code>, then you would create your view file at <em>src/main/rad/views/com/example/MyView.xml</em>.</p>
</div>
<div class="paragraph">
<p>A single RADL file will generate multiple Java classes.  For a given view file <em>MyView.xml</em>, it will generate the following classes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>MyView</em> - The view class.</p>
</li>
<li>
<p><em>MyViewSchema</em> - An interface with <em>Tag</em>, and <em>Category</em> definitions that are declared in the view.</p>
</li>
<li>
<p><em>MyViewModel</em> - An an <em>Entity</em> interface representing the view model of for the view.</p>
</li>
<li>
<p><em>MyViewModelImpl</em> - A default implementation of <em>MyViewModel</em>.</p>
</li>
<li>
<p><em>MyViewModelWrapper</em> - Wrapper class for <em>MyViewModel</em>.</p>
</li>
<li>
<p><em>MyViewController</em> - A default <em>FormController</em> implementation for for using <em>MyView</em>.</p>
</li>
<li>
<p><em>IMyViewController</em> - A marker interface that you can use to mark controllers as compatible with <em>MyViewController</em>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_controllers_and_actions">1.7. Controllers and Actions</h3>
<div class="paragraph">
<p>Controllers serve two functions in CodeRAD:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Separation of Concerns</strong> - Controllers handle all of the "application logic" as it pertains to the user&#8217;s interaction with the app.  Keeping application logic separate from the view and the model has many advantages, including, but not limited to, easier code reuse.</p>
</li>
<li>
<p><strong>Application Structure &amp; Control Flow</strong> - Controllers provide hierarchical structure for applications similar to the way that Components provide hierarchical structure for user interfaces.  While it possible to use CodeRAD components in isolation, (without a controller hierarchy), you would be missing out on some of CodeRAD&#8217;s best features.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_the_navigation_hierarchy">1.7.1. The "Navigation Hierarchy"</h4>
<div class="paragraph">
<p>It is useful to think of your app&#8217;s controllers through the lens of a "navigation hierarchy".  The "root" node of this navigation hierarchy is the <a href="https://www.javadoc.io/static/com.codenameone/coderad-common/1.0.1/com/codename1/rad/controllers/ApplicationController.html">ApplicationController</a>.  To show the first form in our app, we create a <code>FormController</code>, which can be views as a "Child controller" of the application controller.  If the user clicks a button that takes them to a new form, we create a new <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a>, which is a child of the previous form controller.</p>
</div>
<div class="paragraph">
<p>CodeRAD&#8217;s <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a> class includes built-in logic for "back" navigation.  If the <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a>'s parent controller is, itself, a <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a>, then it will provide a "Back" button (and link up the Android "back" action) to return to the parent controller&#8217;s form.</p>
</div>
<div class="paragraph">
<p>Typical code for creating a <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a> is:</p>
</div>
<div class="listingblock">
<div class="title">Typical code to create and show a <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a>. This code is assumed to be in another <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a>, so <code>this</code> refers to the current controller, passing it as the first parameter sets it as the `detailsController&#8217;s parent.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DetailsFormController detailsController = <span style="color:#080;font-weight:bold">new</span> DetailsFormController(<span style="color:#950">this</span>, model);
detailsController.show();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_propagation">1.7.2. Event Propagation</h4>
<div class="paragraph">
<p>The hierarchical view of controllers is also useful for understanding event dispatch.  When a <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/ControllerEvent.html">ControllerEvent</a> is fired on a UI component, it will propagate up the UI hierarchy (i.e. <a href="https://www.codenameone.com/javadoc/com/codename1/ui/Component.html">Component</a> &#8594; parent ..parent&#8230;&#8203;) until it finds a component with a <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/ViewController.html">ViewController</a>.  The event will then be dispatched up the controller hierarchy until it is consumed.</p>
</div>
<div class="paragraph">
<p>For example, suppose, in our application, we have the following controller hierarchy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Root Controller</strong> - The <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/ApplicationController.html">ApplicationController</a></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>ContactListController</strong> - The main form of the app: A contact list.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>ContactDetailsController</strong> - The user clicked on a contact in the list, so they navigated to the "Details" form for that contact.  Thus the <em>ContactDetailsController</em> is a "child" of the <em>ContactListController</em>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following diagram depicts this hierarchy.  Suppose that there is a button on the contact details form, that the user clicks to initiate an action event.  Then the event will propagate up the UI hierarchy until it finds a component with a ViewController.  In this case, the "Detail" form is the first component with a ViewController: The <em>ContactDetailsController</em>.   If the <em>ContactDetailsController</em> contains a handler for the action that was fired, then it will process the event.  If the event is still not consumed, it will propagate up to the parent (the <em>ContactListController</em>), and give it an opportunity to handle the event.  If it is still not consumed, it will propagate up to the root controller (the <em>ApplicationController</em>).</p>
</div>
<div class="paragraph">
<div class="title">This image depicts the propagation of an action event up the UI hierarchy and then the controller hierarchy.</div>
<p><span class="image"><img src="images/ControllerEventPropagation.png" alt="ControllerEventPropagation"></span></p>
</div>
<div class="paragraph">
<p>The fact that action events propagate up through the controller hierarchy gives you flexibility on where you want to place your application logic for processing events.  This is very handy in cases where you want to handle the same action in two different controllers.</p>
</div>
<div class="paragraph">
<p>For example, suppose you have a "phone" action that allows you to phone a contact.  The <em>ContactListController</em> may support direct dialing of a contact in the list.  Additionally, you probably have a "Phone" button on the contact details form.  Since the <em>ContactDetailsController</em> is a "child" controller of the <code>ContactListController</code>, you can handle the action once inside the <em>ContactListController</em>, rather than duplicating code on both the list and details controllers.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started">2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To get started, download the CodeRAD starter project from <a href="https://github.com/shannah/coderad2-starter-template/archive/refs/heads/master.zip">here</a>.</p>
</div>
<div class="paragraph">
<p>Extract the .zip file and then open the project in IntelliJ IDEA</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The CodeRAD starter project is a maven project which can be opened in any Maven-compatible IDE (e.g. NetBeans, Eclipse, IntelliJ, etc&#8230;&#8203;).  For this tutorial, I&#8217;ll be using IntelliJ.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-starter-project.png" alt="intellij starter project">
</div>
<div class="title">Figure 2. The Code RAD starter project opened in IntelliJ IDEA</div>
</div>
<div class="paragraph">
<p>Once the project is opened, press the
<span class="image"><img src="images/intellij-run-button.png" alt="intellij run button"></span>
 icon on the toolbar to run the project in the Codename One simulator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The first time you run and build the project it will take some time because it needs to download all of the project dependencies.  Subsequent builds should only take a few seconds.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-world-in-simulator.png" alt="hello world in simulator">
</div>
<div class="title">Figure 3. The starter project running inside the Codename One simulator</div>
</div>
<div class="sect2">
<h3 id="cloning-project">2.1. Customizing the Maven Artifact Coordinates</h3>
<div class="paragraph">
<p>The starter project comes preconfigured with placeholder coordinates for <code>groupId</code> and <code>artifactId</code>.  For the purposes of this tutorial, I will be using these default coordinates.  However, for a <em>real</em> app, you will want to change these coordinates to your own <code>groupId</code> and <code>artifactId</code>.  The easiest way to change these coordinates is using the <code>cn1:clone</code> maven goal.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
If you clone the project and change the <code>groupId</code> and <code>artifactId</code>, this will also change package structure in the project, so your package structure will be different than the one I use in the rest of this tutorial.  E.g. Instead of your project files being in the <em>com.example.myapp</em> package, they will be in a package named after your <em>groupId</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can run this goal in IntelliJ by first expanding the "Maven" tab from the tabs in the right side of the window:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-maven-tab.png" alt="intellij maven tab">
</div>
</div>
<div class="paragraph">
<p>Once the <em>Maven</em> sidebar is opened, expand the <em>myapp</em> node, and the <em>Run Configurations</em> sub-node, and then double-click the <em>Clone Project</em> option shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-clone-project.png" alt="intellij clone project">
</div>
</div>
<div class="paragraph">
<p>It should display a dialog prompt for you to enter the new coordinates and location for your Maven project:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/clone-project-dialog.png" alt="clone project dialog">
</div>
</div>
<div class="paragraph">
<p>After entering the project details into the dialog, press <em>OK</em>.  If all goes well, you should see a <em>BUILD SUCCESS</em> message in the output log of IntelliJ, and you should find your new project at the location that you specified.  You can then close this project, and open your newly created project.</p>
</div>
</div>
<div class="sect2">
<h3 id="under-the-hood">2.2. Under the Hood</h3>
<div class="paragraph">
<p>Let&#8217;s take look under the hood to see how this "Hello World" app is producted.</p>
</div>
<div class="paragraph">
<p>The <em>starting point</em> for your app is the <code>com.example.myapp.MyRADApp</code> class, located in the <em>common/src/main/java</em> directory.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-world-main-class-project-inspector.png" alt="hello world main class project inspector">
</div>
</div>
<div class="paragraph">
<p>The contents are shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.myapp</span>;

<span style="color:#777">/*.. imports omitted ...*/</span>

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyRADApp</span> <span style="color:#088;font-weight:bold">extends</span> ApplicationController {

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> actionPerformed(ControllerEvent evt) {
        with(evt, StartEvent.class, startEvent -&gt; {
            startEvent.setShowingForm(<span style="color:#069">true</span>);
            <span style="color:#080;font-weight:bold">new</span> StartPageController(<span style="color:#950">this</span>).show();
        });
        <span style="color:#950">super</span>.actionPerformed(evt);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class overrides <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/ApplicationController.html">ApplicationController</a>, and listens for the <em>StartEvent</em>, which is fired when the app starts, or is brought to the foreground.</p>
</div>
<div class="paragraph">
<p>The effective action performed by the event handler is the line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">new</span> StartPageController(<span style="color:#950">this</span>).show();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a new <em>StartPageController</em> and shows it.</p>
</div>
<div class="paragraph">
<p>The <em>StartPagePageController</em> class is a <a href="https://www.javadoc.io/doc/com.codenameone/coderad-common/latest/com/codename1/rad/controllers/FormController.html">FormController</a> subclass that is generated from the <em>StartPage</em> view at compile-time by the CodeRAD annotation processor.</p>
</div>
<div class="paragraph">
<p>The <em>StartPage</em> view is implemented as a RAD View using XML.  It is located inside the <em>common/src/main/rad/views</em> directory.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/starter-app-rad-views-hierarchy.png" alt="starter app rad views hierarchy">
</div>
</div>
<div class="paragraph">
<p>The contents are shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The boilerplate attributes <code>xsi:noNamespaceSchemaLocation="StartPage.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</code> are injected automatically by the annotation processor.  You can leave those out when you create your own views.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s walk through this file line by line:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;?xml version="1.0"?&gt;</code></dt>
<dd>
<p>Obligatory XML boilerplate.</p>
</dd>
<dt class="hdlist1"><code>&lt;y&gt;</code></dt>
<dd>
<p>A Container with <code>BoxLayout.Y</code> layout.  (i.e. a container that lays out its children vertically).</p>
</dd>
<dt class="hdlist1"><code>&lt;title&gt;Hi World&lt;/title&gt;</code></dt>
<dd>
<p>Not a child component, rather a "bean" that sets the title of the form to "Hi World"</p>
</dd>
<dt class="hdlist1"><code>&lt;label&gt;Hello World&lt;/label&gt;</code></dt>
<dd>
<p>A Label component with the text "Hello World"</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="hot-reload">2.3. Hot Reload</h3>
<div class="paragraph">
<p>The Codename One simulator supports a "Hot Reload" feature that can dramatically improve productivity.  Especially if you&#8217;re like me, and you like to experiment with the UI by trial and error.</p>
</div>
<div class="paragraph">
<p>Hot Reload is disabled by default, but you can enable it using the <em>Tools</em> &gt; <em>Hot Reload</em> menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/enable-hot-reload.png" alt="enable hot reload">
</div>
</div>
<div class="paragraph">
<p>If the <em>Reload Simulator</em> option is checked, then the simulator will monitor the project source files for changes, and automatically recompile and reload the simulator as needed.</p>
</div>
<div class="paragraph">
<p>The <em>Reload Current Form</em> option is the same as the <em>Reload Simulator</em> option except that it will automatically load the current form when the simulator reloads.  When using this option, you will lose the navigation context (e.g. the <em>parent</em> controller will be the <em>ApplicationController</em>) and data, when the simulator reloads.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Technically these <em>hot reload</em> options aren&#8217;t a "hot" reload, since it actually restarts the simulator - and you will lose your place in the app.  True hot reload (where the classes are reloaded transparently without having to restart the simulator) is also available, but it is experimental and requires some additional setup.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>The remainder of this tutorial will assume that you have <em>Hot Reload</em> enabled</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="_changing_the_styles">2.4. Changing the Styles</h3>
<div class="paragraph">
<p>Keep the simulator running, and open the CSS style stylesheet for the project, located at <em>common/src/main/css/theme.css</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/theme-css-project-inspector.png" alt="theme css project inspector">
</div>
</div>
<div class="paragraph">
<p>Add the following snippet to the <em>theme.css</em> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">Label</span> {
  <span style="color:#606">color</span>: <span style="color:#088">blue</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Within a second or two after you save the file, you should notice that the "Hello World" label in the simulator has turned blue.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-world-blue.png" alt="hello world blue">
</div>
</div>
<div class="paragraph">
<p>This is because the <a href="https://www.codenameone.com/javadoc/com/codename1/ui/Label.html">Label</a> component&#8217;s default UIID is "Label", so it adopts styles defined for the selector "Label" in the stylesheet.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you are unsure of the UIID of a particular component, you can use the component inspector in the simulator to find out. Select <em>Tools</em> &gt; <em>Component Inspector</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component-inspector-menu.png" alt="component inspector menu">
</div>
</div>
<div class="paragraph">
<p>In the <em>Component Inspector</em>, you can expand the component tree in the left panel until you reach the component you&#8217;re looking for.  The details of that component will then be shown in the right panel.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/component-inspector-label-details.png" alt="component inspector label details">
</div>
</div>
<div class="paragraph">
<p>The <em>UIID</em> field will show you the UIID of the component that you can use to target the component from the stylesheet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above stylesheet change will change the color of <em>all</em> labels to <em>blue</em>.  What if we want to change only the color of <em>this</em> label without affecting the other labels in the app?  There are two ways to do this.  The first way is to override the <em>fgColor</em> style inline on the <code>&lt;label&gt;</code> tag itself.</p>
</div>
<div class="sect3">
<h4 id="_inline_styles">2.4.1. Inline Styles</h4>
<div class="paragraph">
<p>In the <em>StartPage.xml</em> file, add the <code>style.fgColor</code> attribute to the <code>&lt;label&gt;</code> tag with the value "0xff0000".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/xml-attribute-style-fgColor-typehints.png" alt="xml attribute style fgColor typehints">
</div>
<div class="title">Figure 4. In IntelliJ&#8217;s XML editor, you&#8217;ll receive type hints for all tags and attributes as shown here.</div>
</div>
<div class="paragraph">
<p>Notice that, as soon as you start typing inside the <code>&lt;label&gt;</code> tag, the editor presents a drop-down list of options for completion.  This is made possible by the schema (StartPage.xsd located in the same directory as your StartPage.xml file) that the CodeRAD annotation processor automatically generates for you.  This schema doesn&#8217;t include <em>all</em> of the possible attributes you can use, but it does include most of the common ones.</p>
</div>
<div class="paragraph">
<p>After making the change, your <em>StartPage.xml</em> file should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">style.fgColor</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0xff0000</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And, within a couple of seconds, the simulator should have automatically reloaded your form - this time with "Hello World" in <em>red</em> as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simulator-hello-world-red.png" alt="simulator hello world red">
</div>
</div>
<div class="paragraph">
<p>If it doesn&#8217;t automatically reload your form, double check that you have <em>Hot Reload</em> enabled (See the <em>Tools</em> &gt; <em>Hot Reload</em> menu).  If <em>Hot Reload</em> is enabled and it still hasn&#8217;t updated your form, check the console output for errors.  It is likely that your project failed to recompile; probably due to a syntax error in your <em>StartPage.xml</em> file.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">XML Tag Attributes</div>
<div class="paragraph">
<p>In the above example, we added the <code>style.fgColor</code> attribute to the <code>&lt;label&gt;</code> tag to set its color.  This attribute corresponds to the following Java snippet on the label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">theLabel.getStyle().setFgColor(<span style="color:#02b">0xff0000</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a similar way, you can set any property via attributes that can be accessed via a chain of "getters" from the label, as long as the end of the chain has an appropriate "setter".  The <em>Label</em> class includes a "setter" method <code>setPreferredH(int height)</code>.  You could set this via the <code>preferredH</code> property e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">preferredH</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">100</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>would correspond to the Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">theLabel.setPreferredH(<span style="color:#00D">100</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>style.fgColor</code> example, the <code>style</code> portion corresponded to the <code>getStyle()</code> method, and the <code>fgColor</code> component corresponded to the <code>setFgColor()</code> method of the <code>Style</code> class.  The <code>Label</code> class also has a <code>getDisabledStyle()</code> method that returns the style that is to be used when the label is in "Disabled" state.  This isn&#8217;t as relevant for <code>Label</code> as it would be for active components like <code>Button</code> and <code>TextField</code>, but we could set it using attributes.  E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">disabledStyle.fgColor</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0xff0000</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or All styles (which sets the style for all of the component states at once):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">allStyles.fgColor</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">0xff0000</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This sidebar is meant to give you an idea of the attributes that are available to you in this XML language, however, we haven&#8217;t yet discussed the vocabulary that is available to you for the attribute values.  So far the examples have been limited to <em>literal</em> values (e.g. <code>0xff0000</code>), but this is just for simplicity.  Attributes values can be any valid Java expression in the context.  See the section on "Attribute Values" for a more in-depth discussion on this, as there are a few features and wrinkles to be aware of.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_custom_uiids">2.4.2. Custom UIIDs</h4>
<div class="paragraph">
<p>The second (preferred) way to override the style of a particular Label without affecting other labels in the app is to create a custom UIID for the label.</p>
</div>
<div class="paragraph">
<p>Start by changing the <code>Label</code> style in your stylesheet to <code>CustomLabel</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">CustomLabel</span> {
  <span style="color:#606">cn1-derive</span>: <span style="color:#088">Label</span>;  <b class="conum">(1)</b>
  <span style="color:#606">color</span>: <span style="color:#088">blue</span>;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>cn1-derive</code> directive indicates that our style should "inherit" all of the styles from the "Label" style.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now return to the <em>StartPage.xml</em> file and add <code>uiid="CustomLabel"</code> to the <code>&lt;label&gt;</code> tag.  While we&#8217;re at it, remove the inline <code>style.fgColor</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CustomLabel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, to verify that our style only affects this single label, let&#8217;s add another label to our form without the <code>uiid</code> attribute.  When all of these changes are made, the <em>StartPage.xml</em> content should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CustomLabel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>A regular label<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After saving both <em>theme.css</em> and <em>StartPage.xml</em>, the simulator should automatically reload, and you&#8217;ll see something like the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simulator-hello-world-custom-uiid.png" alt="simulator hello world custom uiid">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_more_components">2.5. Adding More Components</h3>
<div class="paragraph">
<p>So far we&#8217;ve only used the <code>&lt;label&gt;</code> tag, which corresponds to the <code>Label</code> component.  You are not limited to <code>&lt;label&gt;</code>, nor are you limited to any particular subset of "supported" components.  You can use <em>any</em> Component in your XML files that you could use with Java or Kotlin directly.  You can even use your own custom components.</p>
</div>
<div class="paragraph">
<p>The tag name will be the same as the simple class name of the component you want to use.  By convention, the tag names begin with a lowercase letter.  E.g. The <em>TextField</em> class would correspond to the <code>&lt;textField&gt;</code> tag.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">XML Tag Namespaces</div>
<div class="paragraph">
<p>Since XML tags use only the <em>simple</em> name for its corresponding Java class, you may be wondering how we deal with name collisions. For example, what if you have defined your own component class <em>com.xyz.widgets.TextField</em>.  Then how would you differentiate this class from the <em>com.codename1.ui.TextField</em> class in XML.  Which one would <code>&lt;textField&gt;</code> create?</p>
</div>
<div class="paragraph">
<p>The mechanism of differentiation here is the same as in Java.  Each XML file includes a set of <em>import</em> directives which specify the package namespaces that it will search to find components corresponding with an XML tag.  It small selection of packages are imported "implicitly", such as <em>com.codename1.ui</em>, <em>com.codename1.components</em>, <em>com.codename1.rad.ui.propertyviews</em>, and a few more.  If you want to import <em>additional</em> packages or classes, you can use the <code>&lt;import&gt;</code> tag, and include regular Java-style import statements as its contents.</p>
</div>
<div class="paragraph">
<p>E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
  import com.xyz.widgets.TextField;
  <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>

  <span style="color:#777">&lt;!-- This would create an instance of com.xyz.widgets.TextField
       and not com.codename1.ui.TextField --&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;textField</span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>You can include any valid Java import statement inside the <code>&lt;import&gt;</code> tag.</strong></p>
</div>
<div class="paragraph">
<p>E.g. the following mix of package and class imports is also fine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;import&gt;</span>
import com.xyz.widgets.TextField;
import com.xyz.otherwidgets.*;
<span style="color:#070;font-weight:bold">&lt;/import&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For fun, let&#8217;s try adding a few of the core Codename One components to our form to spice it up a bit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CustomLabel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>A regular label<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>

    <span style="color:#777">&lt;!-- A text field with a hint --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Enter some text</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/textField&gt;</span>

    <span style="color:#777">&lt;!-- A text field default text already inserted --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;textField&gt;</span>Some default text<span style="color:#070;font-weight:bold">&lt;/textField&gt;</span>

    <span style="color:#777">&lt;!-- A password field --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;textArea</span> <span style="color:#b48">constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.PASSWORD</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- Multiline text --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;spanLabel&gt;</span>Write Once, Run Anywhere.
        Truly native cross-platform app development with Java or Kotlin for iOS, Android, Desktop <span style="color:#800;font-weight:bold">&amp;amp;</span> Web.
    <span style="color:#070;font-weight:bold">&lt;/spanLabel&gt;</span>

    <span style="color:#777">&lt;!-- A Calendar --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;calendar</span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;checkBox&gt;</span>A checkbox<span style="color:#070;font-weight:bold">&lt;/checkBox&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;radioButton&gt;</span>A Radio Button<span style="color:#070;font-weight:bold">&lt;/radioButton&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;button&gt;</span>Click Me<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;spanButton&gt;</span>Click
    Me<span style="color:#070;font-weight:bold">&lt;/spanButton&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;multiButton</span> <span style="color:#b48">textLine1</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Click Me</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">textLine2</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">A description</span><span style="color:#710">&quot;</span></span>
                 <span style="color:#b48">textLine3</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">A subdesc</span><span style="color:#710">&quot;</span></span>
                 <span style="color:#b48">textLine4</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Line 4</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>



<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After changing the contents of your <em>StartPage.xml</em> file to the above, and saving it, you should see the following result in the simulator:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simulator-fun-with-components.png" alt="simulator fun with components">
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-actions">2.6. Adding Actions</h3>
<div class="paragraph">
<p>CodeRAD is built around the Model-View-Controller (MVC) philosophy which asserts that the <em>View</em> logic (i.e. how the app looks) should be separated from the <em>Controller</em> logic (i.e. what the app does with user input).  <em>Actions</em> form the cornerstone of how CodeRAD keeps these concerns separate.  They provide a sort of communication channel between the controller and the view, kind of like a set of Walkie-talkies.</p>
</div>
<div class="paragraph">
<p>To go with the Walkie-talkie metaphor for a bit, A View will broadcast on a few frequencies that are predefined by the View.  It might broadcast on 96.9MHz when the "Help" button is pressed, and 92.3MHz when text is entered into its <em>username</em> text field.</p>
</div>
<div class="paragraph">
<p>Before displaying a View, the Controller will prepare a set of one-way Walkie-talkies at a particular frequency.  It passes one of the handset&#8217;s to the view - the one that <em>sends</em>.  It retains the other handset for itself - the one that receives.</p>
</div>
<div class="paragraph">
<p>When the view is instantiated, it will look through all of the walkie-talkie handsets that were provided and see if any are set to a frequency that it wants to broadcast on.  If it finds a match, it will use it to broadcast relevant events.  To continue with the example, if finds a handset that is tuned to 96.9MHz, it will send a message to this handset whenever the "Help" button is pressed.</p>
</div>
<div class="paragraph">
<p>When the controller receives the message in the corresponding hand-set of this walkie-talkie, it can respond by performing some action.</p>
</div>
<div class="paragraph">
<p>The view can also use the set of Walkie-talkies that it receives to affect how it renders itself.  For example, if, when it is instantiated, it doesn&#8217;t find any handsets tuned to 96.9MHz, it may "choose" just to not render the "Help" button at all, since nobody is listening.</p>
</div>
<div class="paragraph">
<p>Additionally, the Controller might attach some additional instructions to the handset that it provides to the view.  The view can then use these instructions to customize how it renders itself, or how to use the handset.  For example, the handset might come with a note attached that says "Please use <em>this</em> icon if you attach the handset to a button", or "Please use <em>this</em> text for the label", or "Please disable the button under this condition".</p>
</div>
<div class="paragraph">
<p>In the above metaphor, the <em>frequency</em> represents an instance of the <code>ActionNode.Category</code> class, and the walkie-talkies represent an instance of the <code>ActionNode</code> class.  The <em>View</em> declares which <em>Categories</em> it supports, how it will interpret them.  The <em>Controller</em> defines <em>Actions</em> and registers them with the view in the prescribed categories.  When the <em>View</em> is instantiated, it looks for these actions, and will use them to affect how it renders itself.  Typically actions are manifested in the View as a button or menu item, but not necessarily.  <code>EntityListView</code>, for example, supports the <code>LIST_REFRESH_ACTION</code> and <code>LIST_LOAD_MORE_ACTION</code> categories which will broadcast events when the list model should be refreshed, or when more entries should be loaded at the end of the list.  They don&#8217;t manifest in any particular button or menu.</p>
</div>
<div class="sect3">
<h4 id="_adding_our_first_action">2.6.1. Adding our first action</h4>
<div class="paragraph">
<p>Let&#8217;s begin by restoring the <em>StartPage.xml</em> template to its initial state:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let&#8217;s define an action category using the <code>&lt;define-category&gt;</code> tag.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Hello World<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And then change the <code>&lt;label&gt;</code> to a <code>&lt;button&gt;</code>, and "bind" the button to the "HELLO_CLICKED" category using the <code>&lt;bind-action&gt;</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span> <b class="conum">(1)</b>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button&gt;</span>Hello World
        <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>define-category</code> tag will define an <code>ActionNode.Category</code> in the resulting Java View class with the given name.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the simulator reloads after this last change you will notice that the "Hello World" button is not displayed.  You do not need to adjust your lenses.  This is <em>expected</em> behaviour.  Since the button is bound to the "HELLO_CLICKED" category, and the controller hasn&#8217;t supplied any actions in this category, the button will not be rendered.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now define an action in the Controller with this category.  Open the <em>com.example.myapp.MyRadApp</em> class and add the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
<span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
    <span style="color:#950">super</span>.initControllerActions();
    addAction(StartPage.HELLO_CLICKED, evt-&gt; {
        evt.consume();
        <span style="color:#0a8;font-weight:bold">Dialog</span>.show(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">You clicked me</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">OK</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>);
    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>initControllerActions()</code> method is where all actions should be defined in a controller.  This method is guaranteed to be executed before views are instantiated.    The <code>addAction()</code> method comes in multiple flavours, the simplest of which is demonstrated here.  The first parameter takes the <code>HELLO_CLICKED</code> action category that we defined in our view, and it registered an <code>ActionListener</code> to be called when that action is fired.</p>
</div>
<div class="paragraph">
<p>Calling <code>evt.consume()</code> is good practice as it signals to other interested parties that the event has been handled.  This will prevent it from propagating any further to any other listeners to the <code>HELLO_CLICKED</code> action.</p>
</div>
<div class="paragraph">
<p>The <code>Dialog.show()</code> method shows a dialog on the screen.</p>
</div>
<div class="paragraph">
<p>If you save this change, you should see the simulator reload with the "Hello World" button now rendered as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-world-with-button.png" alt="hello world with button">
</div>
</div>
<div class="paragraph">
<p>And if you click on the button, it will display a dialog as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/dialog-show-you-clicked-me.png" alt="dialog show you clicked me">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_customizing_action_rendering">2.6.2. Customizing Action Rendering</h4>
<div class="paragraph">
<p>In the previous example, the controller didn&#8217;t make any recommendations to the view over how it wanted its <em>HELLO_CLICKED</em> action to be rendered.  It simply registered an <code>ActionListener</code> and waited to be notified when it is "triggered".   Let&#8217;s go a step further now, and specify an icon and label to use for the action.  We will use the <code>ActionNode.Builder</code> class to build an action with the icon and label that we desire, and add it to the controller using the <code>addToController()</code> method of <code>ActionNode.Builder</code>.</p>
</div>
<div class="paragraph">
<p>Change your <code>initControllerActions()</code> method to the following and see how the action&#8217;s button changes in the simulator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
<span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
    <span style="color:#950">super</span>.initControllerActions();
    ActionNode.builder().
        icon(FontImage.MATERIAL_ALARM).
        label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Click Now</span><span style="color:#710">&quot;</span></span>).
        badge(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">2</span><span style="color:#710">&quot;</span></span>).
        addToController(<span style="color:#950">this</span>, StartPage.HELLO_CLICKED, evt -&gt; {
            evt.consume();
            <span style="color:#0a8;font-weight:bold">Dialog</span>.show(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">You clicked me</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">OK</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>);
        });
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-overridden-in-controller.png" alt="action overridden in controller">
</div>
</div>
<div class="paragraph">
<p>There&#8217;s quite a bit more that you can do with actions, but this small bit of foundation will suffice for our purposes for now.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_menus">2.7. Creating Menus</h3>
<div class="paragraph">
<p>Whereas the <code>&lt;button&gt;</code> tag will create a single button, which can be optionally "bound" to a single action, the <code>&lt;buttons&gt;</code> renders multiple buttons to the view according to the actions that it finds in a given category.  Let&#8217;s change the example from the previous section display a menu of buttons.  We will:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define a new category called <code>MAIN_MENU</code>.</p>
</li>
<li>
<p>Add a <code>&lt;buttons&gt;</code> component to our view with <code>actionCategory="MAIN_MENU"</code>.</p>
</li>
<li>
<p>Define some actions in the controller, and register them with the new <code>MAIN_MENU</code> category.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;buttons</span> <span style="color:#b48">actionCategory</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And add the following to the <code>initControllerActions()</code> method of your controller class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ActionNode.builder().
        icon(FontImage.MATERIAL_ALARM).
        label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Notifications</span><span style="color:#710">&quot;</span></span>).
        addToController(<span style="color:#950">this</span>, StartPage.MAIN_MENU, evt -&gt; {
            <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Notifications was clicked</span><span style="color:#710">&quot;</span></span>);
        });

ActionNode.builder().
        icon(FontImage.MATERIAL_PLAYLIST_PLAY).
        label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Playlist</span><span style="color:#710">&quot;</span></span>).
        addToController(<span style="color:#950">this</span>, StartPage.MAIN_MENU, evt -&gt; {
            <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Playlist was clicked</span><span style="color:#710">&quot;</span></span>);
        });

ActionNode.builder().
        icon(FontImage.MATERIAL_CONTENT_COPY).
        label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Copy</span><span style="color:#710">&quot;</span></span>).
        addToController(<span style="color:#950">this</span>, StartPage.MAIN_MENU, evt -&gt; {
            <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Copy was clicked</span><span style="color:#710">&quot;</span></span>);
        });</code></pre>
</div>
</div>
<div class="paragraph">
<p>If all goes well, the simulator should reload to resemble the following screenshot:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/buttons-tag.png" alt="buttons tag">
</div>
</div>
<div class="sect3">
<h4 id="_buttons_layout">2.7.1. Buttons Layout</h4>
<div class="paragraph">
<p>The <code>&lt;buttons&gt;</code> tag laid out all of the buttons in its specific action category.  Currently they are all laid out on a single line.  The default layout manager for the "Buttons" component is <code>FlowLayout</code>, which means that it will lay out actions horizontally from left to right (or right to left for RTL locales), and wrap to the next line when it runs out of space.  It gives you quite a bit of flexibility for how the buttons are arranged and rendered, though.  You can set the layout of <code>Buttons</code> to any layout manager that doesn&#8217;t require a layout constraint.  E.g. <em>BoxLayout</em>, <em>GridLayout</em>, and <em>FlowLayout</em>.</p>
</div>
<div class="paragraph">
<p>E.g. We can change the layout to <em>BoxLayout.Y</em> by setting the <code>layout=BoxLayout.y()</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;buttons</span> <span style="color:#b48">layout</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">BoxLayout.y()</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">actionCategory</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/buttons-boxlayout-y.png" alt="buttons boxlayout y">
</div>
</div>
<div class="paragraph">
<p>Or GridLayout using <code>layout="new GridLayout(2)"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;buttons</span> <span style="color:#b48">layout</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new GridLayout(2,2)</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">actionCategory</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/grid-layout-buttons.png" alt="grid layout buttons">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_action_styles">2.7.2. Action Styles</h4>
<div class="paragraph">
<p>Actions may include many preferences about how they should be rendered.  The view is not obligated to abide by these preferences, but it usually at least considers them.  We&#8217;ve already seen how actions can specify their preferred icons, labels, and badges, but there are several other properties available as well.  One simple, but useful property is the <em>action style</em> which indicates whether the action should be rendered with both its icon and text, only its icon, or only its text.  This is often overridden by the view based on the context.  E.g. The view may include a menu of actions, and it only wants to display the action icons.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;buttons&gt;</code> tag has an action template that defines "fallback" properties for its actions.  These can be set using the <code>actionTemplate.*</code> attributes.  For example, try adding the <code>actionTemplate.actionStyle</code> attribute to your <code>&lt;buttons&gt;</code> tag.  You should notice that the editor gives you a drop-down list of options for the value of this attribute as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-style-dropdown.png" alt="action style dropdown">
</div>
</div>
<div class="paragraph">
<p>Try selecting different values for this attribute and save the file after each change to see the result in the simulator.  You should see something similar to the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-style-icon-bottom.png" alt="action style icon bottom">
</div>
<div class="title">Figure 5. IconBottom</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-style-icon-top.png" alt="action style icon top">
</div>
<div class="title">Figure 6. IconTop</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-style-icon-left.png" alt="action style icon left">
</div>
<div class="title">Figure 7. IconLeft</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-style-icon-right.png" alt="action style icon right">
</div>
<div class="title">Figure 8. IconRight</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/action-style-icon-only.png" alt="action style icon only">
</div>
<div class="title">Figure 9. IconOnly</div>
</div>
<div class="paragraph">
<p>You can also specify UIIDs for the actions to customize things like font, color, borders, padding, etc&#8230;&#8203;  To learn more about the various options available, see the Actions chapter of the manual.  (TODO: Create actions section of manual).</p>
</div>
</div>
<div class="sect3">
<h4 id="_overflow_menus">2.7.3. Overflow Menus</h4>
<div class="paragraph">
<p>In some cases, your view may only have room for one or two buttons in the space provided, but you want to be able to support more actions than that.  You can use the <em>limit</em> attribute to specify the maximum number of buttons to render.  If the number of actions in the action category is greater than this limit, it will automatically add an overflow menu for the remainder of the actions.</p>
</div>
<div class="paragraph">
<p>Try adding <code>limit=1</code> to the <code>&lt;buttons&gt;</code> tag and see what happens:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;buttons</span>
        <span style="color:#b48">layout</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new GridLayout(2,2)</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">actionCategory</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">actionTemplate.actionStyle</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">IconOnly</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">limit</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the simulator reloads you will see only a "More" button where the menu items once were:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/buttons-more-button.png" alt="buttons more button">
</div>
</div>
<div class="paragraph">
<p>If you press this button, you will be presented with an Action Sheet with the actions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/buttons-action-sheet.png" alt="buttons action sheet">
</div>
</div>
<div class="paragraph">
<p>If you change the limit to "2", it will show the first action, <em>Notifications</em>, in the buttons, and then it will show the remaining two actions when the user presses the "More" button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/buttons-limit-2.png" alt="buttons limit 2">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="form-navigation">2.8. Form Navigation</h3>
<div class="paragraph">
<p>It&#8217;s time to grow beyond our single-form playpen, and step into the world of multi-form apps.  Let&#8217;s create another view in the same folder as <em>StartPage.xml</em>.  We&#8217;ll name this <em>AboutPage.xml</em>.  If you&#8217;re using IntelliJ, like me, you can create this file by right clicking the "myapp" directory in the project inspector, and select <em>New</em> &gt; <em>File</em> as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-new-view-xml-file.png" alt="intellij new view xml file">
</div>
</div>
<div class="paragraph">
<p>Then enter "AboutPage.xml" in the dialog:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/about-page-xml-new-file-prompt.png" alt="about page xml new file prompt">
</div>
</div>
<div class="paragraph">
<p>And press <em>Enter</em></p>
</div>
<div class="paragraph">
<p>Add the following placeholder contents to the newly created <em>AboutPage.xml</em> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>About Us<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Under construction<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, let&#8217;s add a button to our original view, <em>StartPage.xml</em> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>About Us<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the simulator reloads, you should now see this button:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/start-page-about-us-button.png" alt="start page about us button">
</div>
</div>
<div class="paragraph">
<p>Click on this button, and it should take you to the "About Us" view we just created.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/about-us-page.png" alt="about us page">
</div>
</div>
<div class="paragraph">
<p>Notice that the <em>About Us</em> form includes a <em>Back</em> button that returns you to the <em>Start Page</em>.  This is just one of the nice features that you get for free by using CodeRAD.  There is a lot of power packed into the <code>rad-href</code> attribute. In this case we specified that we wanted to link to the <em>AboutPage</em> view using the "#AboutPage" URL, it enables other URL types as well.  To learn more about the <em>rad-href</em> attribute, see (TODO section of manual on rad-href).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
This section described only how to navigate to a different form.  It is also possible to load views within the current form using the <code>rad-href</code> attribute.  This is commonly used on tablet and desktop to create a <em>master-detail</em> view.  See <a href="#intraform-navigation">Intra-Form Navigation</a> for some examples.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_models">2.9. Models</h3>
<div class="paragraph">
<p>So far we&#8217;ve been working only with the <em>V</em> and <em>C</em> portions of <em>MVC</em>.  In this section, I introduce the final pillar in the trinity: <em>the Model</em>.  Model objects store the data of the application.  In CodeRAD, <em>model</em> objects implement the <em>com.codename1.rad.models.Entity</em> interface.  We&#8217;re going to skip the conceptual discussion of <em>Models</em> in this tutorial, and dive directly into an example so you can see how they work.  After we&#8217;ve played with some models, we&#8217;ll circle back and discuss the theories and concepts in greater depth.</p>
</div>
<div class="paragraph">
<p>Most apps need a model to encapsulate the currently logged-in user.  Let&#8217;s create model named <em>UserProfile</em> for this purpose.</p>
</div>
<div class="paragraph">
<p>Create a new package named "com.example.myapp.models".  In IntelliJ, you can achieve this by right clicking on the <em>com.example.myapp</em> node in the project inspector (inside the <em>src/main/java</em> directory of the <em>common</em> module), and select <em>New</em> &gt; <em>Package</em>, as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-new-package.png" alt="intellij new package">
</div>
</div>
<div class="paragraph">
<p>Then enter "models" for the package name in the dialog:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-new-package-models.png" alt="intellij new package models">
</div>
</div>
<div class="paragraph">
<p>Now create a new Java interface inside this package named "UserProfile".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.myapp.models</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.annotations.RAD</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.Entity</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.Tag</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.schemas.Person</span>;

<span style="color:#007">@RAD</span> <b class="conum">(1)</b>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">interface</span> <span style="color:#B06;font-weight:bold">UserProfile</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Entity</span> {

    <span style="color:#777">/*
     * Declare the tags that we will use in our model. <b class="conum">(2)</b>
     */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> Tag name = Person.name;
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> Tag photoUrl = Person.thumbnailUrl;
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> Tag email = Person.email;

    <span style="color:#007">@RAD</span>(tag=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>) <b class="conum">(3)</b>
    <span style="color:#0a8;font-weight:bold">String</span> getName();
    <span style="color:#339;font-weight:bold">void</span> setName(<span style="color:#0a8;font-weight:bold">String</span> name);

    <span style="color:#007">@RAD</span>(tag=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">photoUrl</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#0a8;font-weight:bold">String</span> getPhotoUrl();
    <span style="color:#339;font-weight:bold">void</span> setPhotoUrl(<span style="color:#0a8;font-weight:bold">String</span> url);

    <span style="color:#007">@RAD</span>(tag=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span>)
    <span style="color:#0a8;font-weight:bold">String</span> getEmail();
    <span style="color:#339;font-weight:bold">void</span> setEmail(<span style="color:#0a8;font-weight:bold">String</span> email);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>@RAD</code> annotation before the interface definition activates the CodeRAD annotation processor, which will generate a concrete implementation of this interface (named <em>UserProfileImpl) and a _wrapper</em> class this interface (named <em>UserProfileWrapper</em>).  More <em>wrapper classes</em> shortly.</p>
</li>
<li>
<p>We declare and import the tags that we intend to use in our model.  Tags enable us to create views that are loosely coupled to a model.  Since our <em>UserProfile</em> represents a person, we will tag many of the properties with tags from the <em>Person</em> schema.</p>
</li>
<li>
<p>The <code>@RAD</code> annotation before the <code>getName()</code> method directs the annotation processor to generate a <em>property</em> named "name".  The <code>tag="name"</code> attribute means that this property will accessible via the <em>name</em> tag. This references the <code>public static final Tag name</code> field that we defined at the beginning of the interface definition.  More on tags shortly.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next, let&#8217;s create a view that allows us to view and edit a <em>UserProfile</em>.</p>
</div>
<div class="paragraph">
<p>In the same directory as the <em>StartPage.xml</em> file, create a new file named <em>UserProfilePage.xml</em> with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>

<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">rad-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">UserProfile</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">UserProfilePage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
        import com.example.myapp.models.UserProfile;
    <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>My Profile<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Name:<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Email:<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.email</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This view looks very similar to the <em>StartPage</em> and <em>AboutPage</em> views we created before, but it introduces a couple of new elements:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>rad-model="UserProfile"</code></dt>
<dd>
<p>This attribute, added to the root element of the XML document specifies that this view&#8217;s <em>model</em> will a <em>UserProfile</em>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Remember to import <code>UserProfile</code> class in the <code>&lt;import&gt;</code> tag, or the view will fail to compile because it won&#8217;t know where to find the <em>UserProfile</em> class.
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>&lt;radLabel tag="Person.name"/&gt;</code></dt>
<dd>
<p>The <code>&lt;radLabel&gt;</code> tag is a wrapper around a <code>Label</code> that supports binding to a model property.  In this case the <code>tag=Person.name</code> attribute indicates that this label should be bound to the property of the model with the <code>Person.name</code> tag.  Recall that the <em>name</em> property of the <em>UserProfile</em> included the <code>@RAD(tag="name")</code> annotation, which effectively "tagged" the property with the "name" tag.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
In this example I chose to reference the <code>Person.name</code> tag from the <em>Person</em> schema, but since our <em>UserProfile</em> class referenced this tag in its <code>name</code> static field, we could have equivalently referenced <code>tag="UserProfile.name"</code> here.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Before we fire up the simulator, we also need to add a <em>link</em> to our new form so we can test it out.  Add a button to the <em>StartPage</em> view that links to our <em>UserProfilePage</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#UserProfilePage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>User Profile<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now fire up the simulator and click on the <em>User Profile</em> button we added.  YOu should see something like the this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/user-profile-page.png" alt="user profile page">
</div>
</div>
<div class="paragraph">
<p>This is a little boring right now because we haven&#8217;t specified a <em>UserProfile</em> object to use as the model for this view, so it just creates a new (empty) instance of <em>UserProfile</em> and uses that.  Let&#8217;s remedy that by instantiating a <em>UserProfile</em> in our controller, and then use <em>that</em> profile as the view for our profile.</p>
</div>
<div class="paragraph">
<p>Open the RADApp class and implement the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
<span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> onStartController() {
    <span style="color:#950">super</span>.onStartController();

    UserProfile profile = <span style="color:#080;font-weight:bold">new</span> UserProfileImpl();
    profile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Jerry</span><span style="color:#710">&quot;</span></span>);
    profile.setEmail(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">jerry@example.com</span><span style="color:#710">&quot;</span></span>);
    addLookup(UserProfile.class, profile);
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>onStartController()</code> method is the preferred place to add initialization code for your controller.  Placing initialization here rather than in the constructor ensures the controller is "ready" to be initailized.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Most of this snippet should be straight forward.  I&#8217;ll comment on two aspects here:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We use the <code>UserProfileImpl</code> class, which is the default concrete implementation of our <em>UserProfile</em> entity that was generated for us by the annotation processor.</p>
</li>
<li>
<p>The <code>addLookup()</code> method adds a <em>lookup</em> to our controller so that the profile we just created can be accessed throughout the app by calling the <code>Controller.lookup()</code> method, passing it <code>UserProfile.class</code> as a parameter.  Lookups are used throughout CodeRAD as they are a powerful way to "share" objects between different parts of your app while still being loosely coupled.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, we will make a couple of changes to the <em>StartPage</em> view to inject this profile into the <em>UserProfile</em> view.</p>
</div>
<div class="paragraph">
<p>First, we need to add <em>UserProfile</em> to the <em>imports</em> of <em>StartPage</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;import&gt;</span>
import com.example.myapp.models.UserProfile;
<span style="color:#070;font-weight:bold">&lt;/import&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, add the following tag somewhere in the root of the <em>StartPage.xml</em> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;var</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">profile</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">lookup</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">UserProfile</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This declares a "variable" named <em>profile</em> in our view with the value of the <em>UserProfile</em> lookup.  This is roughly equivalent to the java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">UserProfile profile = controller.lookup(UserProfile.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, change the <code>&lt;button&gt;</code> tag in the <em>StartPage</em> that we used to link to the <em>UserProfile</em> page to indicate that it should use the <em>profile</em> as the model for the <em>UserProfilePage</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#UserProfilePage{profile}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>User Profile<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The active ingredient we added here was the "{profile}" suffix to the URL.  This references the <code>&lt;var name="profile"&#8230;&#8203;&gt;</code> tag we added earlier.</p>
</div>
<div class="paragraph">
<p>When we&#8217;re done, the <code>StartPage.xml</code> contents will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#777">&lt;!-- We need to import the UserProfile class since we use it
        in various places of this view. --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
        import com.example.myapp.models.UserProfile;
    <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>

    <span style="color:#777">&lt;!-- Reference to the UserProfile looked up
        from the Controller.  This lookup is registered
        in the onStartController() method of the MyRADApp class. --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;var</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">profile</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">lookup</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">UserProfile</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Hi World<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;buttons</span>
            <span style="color:#b48">layout</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new GridLayout(2,2)</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">actionCategory</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">MAIN_MENU</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">actionTemplate.actionStyle</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">IconOnly</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">limit</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">2</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>About Us<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

    <span style="color:#777">&lt;!-- This button links to the UserProfilePage
         The {profile} suffix means that the UserProfilePage
         should use the &quot;profile&quot; reference created by
         the &lt;var name=&quot;profile&quot;...&gt; tag above.
     --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#UserProfilePage{profile}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>User Profile<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we we click on the <em>User Profile</em> button, it should display the details of the profile we created:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/bound-user-profile-page.png" alt="bound user profile page">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Since the <em>My Profile</em> form is a "sub-form" of your app, the <em>Hot Reload</em> &gt; <em>Reload Simulator</em> option would still require you to navigate back to the form when you make changes to the source.  While working on "sub-forms" (i.e. forms that aren&#8217;t displayed automatically on app start), I recommend enabling the <em>Hot Reload</em> &gt; <em>Reload Current Form</em> option in the simulator.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hot-reload-reload-current-form.png" alt="hot reload reload current form">
</div>
</div>
<div class="paragraph">
<p>This way, when you make changes to the source and the simulator reloads, it will automatically navigate back to the this form.  Be aware, however, that upon reload, you will still lose your application state such as the controller hierarchy and model data.  For example, you&#8217;ll notice that the "back" button doesn&#8217;t appear in your <em>My Profile</em> form after reload.</p>
</div>
<div class="paragraph">
<p>You can disable this feature when you are finished working on the <em>My Profile</em> form by changing <em>Hot Reload</em> back to <em>Reload Simulator</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_fun_with_bindings">2.10. Fun with Bindings</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Throughout this guide I use the terms <em>model</em> and <em>entity</em> interchangeably because CodeRAD names it&#8217;s <em>model</em> class <code>Entity</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CodeRAD models are designed to allow for easy binding to other models and to user interface components.  We&#8217;ve already seen how the <code>&lt;radLabel&gt;</code> tag can be bound to a model property using the <code>tag</code> attribute, but you aren&#8217;t limited to static labels.  There are <code>radXXX</code> components for many of the fundamental Codename One components.  E.g. <code>&lt;radTextField&gt;</code>, <code>&lt;radTextArea&gt;</code>, <code>&lt;radSpanLabel&gt;</code>, and many more.  Later on, you&#8217;ll also learn how to build your own <em>binding</em> components, but for now, let&#8217;s have a little bit of fun with the standard ones.</p>
</div>
<div class="paragraph">
<p>To demonstrate that you can bind more than one component to the same property, let&#8217;s add a <code>&lt;radTextField&gt;</code> that binds to the <em>email</em> property just below the existing <code>&lt;radLabel&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.email</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/radlabel-bound-to-same-property-as-radtextfield.png" alt="radlabel bound to same property as radtextfield">
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll notice that as you type in the <em>email</em> text field, the value of the <em>email</em> label also changes.  This is because they are bound to the same property of the same model.</p>
</div>
<div class="paragraph">
<p>We can even go a step further.  It is possible to bind <em>any</em> any property to the result of an arbitrary Java expression so that the property will be updated whenever the model is changed.</p>
</div>
<div class="paragraph">
<p>As an example, let&#8217;s add a button that is enabled <em>only</em> when the model&#8217;s <em>email</em> property is non-empty:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">bind-enabled</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java:!getEntity().isEmpty(UserProfile.email)</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Save<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <em>bind-*</em> attributes, by default expect their values to be references to a tag (e.g. <code>UserProfile.email</code>), but you can alternatively provide a Java expression prefixed with <code>java:</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will notice, now, that if you delete the content of the <em>email</em> text field on the form, the <em>Save</em> button becomes disabled.  If you start typing again, the button will become enabled again.</p>
</div>
<div class="paragraph">
<p>In this example we bound the <em>enabled</em> property of <em>Button</em> so that it would be updated whenever the model is changed.  You aren&#8217;t limited to the <em>enabled</em> property though.  You can bind on any property you like.  You can even bind on sub-properties, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">bind-style.fgColor</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java:getEntity().isEmpty(UserProfile.email) ? 0xff0000 : 0x0</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Save<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, the button text will be red when the email field is empty, and black otherwise.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transitions">2.11. Transitions</h3>
<div class="paragraph">
<p>By default, changes to bound properties take effect immediately upon property change.  For example, if you bind the <em>visible</em> property of a label, then it will instantly appear when the value changes to true, and instantly disappear when the value changes to false.  Interfaces feel <em>better</em> when changes are animated.</p>
</div>
<div class="paragraph">
<p>The <em>rad-transition</em> attribute allows you to specify how transitions are handled on property bindings.  Attributes that work particularly well with transitions are ones that change the size or layout of a component.</p>
</div>
<div class="paragraph">
<p>The following example binds the "layout" attribute on a container so that if the user enters "flow" into the text field, the layout will change to a <em>FlowLayout</em>, and for any other value, the layout will be <em>BoxLayout.Y</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Start Page<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>

    <span style="color:#777">&lt;!-- Define a tag for the layout property.
            This will add a property to the auto-generated view model class.
    --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">layout</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- A text field that is bound to the &quot;layout&quot; property
            As user types, it updates the &quot;layout&quot; property of the view model. --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">layout</span><span style="color:#710">&quot;</span></span>  <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">north</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- A Container with initial layout BoxLayout.Y.
        We bind the &quot;layout&quot; property to a java expression that will set layout
        to FlowLayout if the model's &quot;layout&quot; property is the string &quot;flow&quot;, and
        BoxLayout.Y otherwise.

        The rad-transition=&quot;layout 1s&quot; attribute will cause changes to the &quot;layout&quot; property
        to be animated with a duration of 1s for each transition.
    --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">bind-layout</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">java:&quot;flow&quot;.equals(getEntity().getText(layout)) ? new FlowLayout() : BoxLayout.y()</span><span style="color:#710">'</span></span>
       <span style="color:#b48">rad-transition</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">layout 1s</span><span style="color:#710">&quot;</span></span>
       <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Label 1<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Label 2<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Label 3<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Label 4<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Label 5<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button&gt;</span>Button 1<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you run the above example, it will begin with rendering the labels vertically in a <em>BoxLayout.Y</em> layout as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/rad-transition-boxlayout-state.png" alt="rad transition boxlayout state">
</div>
</div>
<div class="paragraph">
<p>If you type the word "flow" into the textfield, it will instantly (upon the "w" keystroke) start animating a change to a flow layout, the final result shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/rad-transition-flow-state.png" alt="rad transition flow state">
</div>
</div>
<div class="videoblock">
<div class="title">A video clip of this transition</div>
<div class="content">
<iframe width="440" height="800" src="https://www.youtube.com/embed/vY60zLo6f5E?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div id="implicit-view-models" class="sidebarblock">
<div class="content">
<div class="title">Implicit View Models</div>
<div class="paragraph">
<p>If you don&#8217;t specify the model class to use for your view using the <code>rad-model</code> attribute (see the <em>UserProfilePage</em> example), it will use an <em>implicit</em> view model - meaning that the annotation processor generates a view model for this view automatically.  In such cases, it will generate properties on the view model to correspond <em>tag definitions</em> in the view.</p>
</div>
<div class="paragraph">
<p>In the above <em>transition</em> example, we defined a tag named "layout" using the the <em>define-tag</em> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">layout</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This resulted in our view model having a property named "layout", which is assigned this "layout" tag.  We then bound the text field to this property using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">layout</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And we referenced it in the binding expression for the <em>layout</em> parameter of the <code>&lt;y&gt;</code> container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">bind-layout</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">java:&quot;flow&quot;.equals(getEntity().getText(layout)) ? new FlowLayout() : BoxLayout.y()</span><span style="color:#710">'</span></span><span style="color:#070;font-weight:bold">&gt;</span>...<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s unpack that expression a little bit:</p>
</div>
<div class="paragraph">
<p>The part that refers to our "layout" tag is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">getEntity().getText(layout))</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>getEntity()</code> gets the view model of this view, which is an instance of our <em>implicit</em> view model.  The <code>getText(layout)</code> method gets the value of the <code>layout</code> tag (which we defined above in the <code>&lt;define-tag&gt;</code> tag) as a string.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_supported_properties">2.11.1. Supported Properties</h4>
<div class="paragraph">
<p>Currently transitions don&#8217;t work with every property.  Transitions are primarily useful only for properties that change the size or layout of the view.  For example, currently if you add a transition to a binding on the "text" property of a label, the text itself will change <em>instantly</em>, but if the bounds of the new text is different than the old text, you will see the text bounds grow or shrink according to the transition.</p>
</div>
<div class="paragraph">
<p>Style animations are also supported on the "uiid" property, so that changes to colors, font sizes, padding etc, will transition smoothly when the <em>uiid</em> is changed.  Currently style attributes (e.g. <em>style.fgColor</em>) won&#8217;t use transitions, but this will be added soon.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="entity-lists">2.12. Entity Lists</h3>
<div class="paragraph">
<p>So far our examples have involved only views of <em>single</em> models.  Most apps involve <em>list</em> views where multiple models are rendered on a single view.  E.g. In mail apps that include a list of messages, each row of the list corresponds to a distinct <em>message</em> model.  CodeRAD&#8217;s <code>&lt;entityList&gt;</code> tag provides rich support for these kinds of views.</p>
</div>
<div class="paragraph">
<p>To demonstrate this, let&#8217;s create a view with an entityList.  The contents of this view are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Entity List Sample<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;entityList</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">provider</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.myapp.providers.SampleListProvider.class</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This defines a view with single entityList.  The <em>provider</em> attribute specifies the class will provide data to this view.  We need to implement this class <em>and</em> add a lookup to an instance of it in the controller.</p>
</div>
<div class="paragraph">
<p>The following is a sample provider implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.myapp.providers</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.AbstractEntityListProvider</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.EntityList</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.example.myapp.models.UserProfile</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.example.myapp.models.UserProfileImpl</span>;

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">SampleListProvider</span> <span style="color:#088;font-weight:bold">extends</span> AbstractEntityListProvider {

    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> Request getEntities(Request request) {
        EntityList out = <span style="color:#080;font-weight:bold">new</span> EntityList();
        {
            UserProfile profile = <span style="color:#080;font-weight:bold">new</span> UserProfileImpl();
            profile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Steve Hannah</span><span style="color:#710">&quot;</span></span>);
            profile.setEmail(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">steve@example.com</span><span style="color:#710">&quot;</span></span>);
            out.add(profile);
        }
        {
            UserProfile profile = <span style="color:#080;font-weight:bold">new</span> UserProfileImpl();
            profile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Shai Almog</span><span style="color:#710">&quot;</span></span>);
            profile.setEmail(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">shai@example.com</span><span style="color:#710">&quot;</span></span>);
            out.add(profile);
        }
        {
            UserProfile profile = <span style="color:#080;font-weight:bold">new</span> UserProfileImpl();
            profile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Chen Fishbein</span><span style="color:#710">&quot;</span></span>);
            profile.setEmail(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">chen@example.com</span><span style="color:#710">&quot;</span></span>);
            out.add(profile);
        }
        request.complete(out);
        <span style="color:#080;font-weight:bold">return</span> request;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our provider extends <code>AbstractEntityListProvider</code> and needs to implement at least the <em>getEntities()</em> method.  For most real-world use-cases you&#8217;ll need to override the <code>createRequest()</code> method, but we&#8217;ll reserve discussion of that for later.</p>
</div>
<div class="paragraph">
<p><code>getEntities()</code> is triggered whenever the entity list is requesting data.  The <em>request</em> parameter may include details about which entities the list would like to receive.  Out of the box, there two basic request types: <em>REFRESH</em> and <em>LOAD_MORE</em>.  A <em>REFRESH</em> request is triggered when the list if first displayed, and whenever the user does a "Pull to refresh" action on the list view.  A <em>LOAD_MORE</em> request is triggered when the user scrolls to the bottom of the list.</p>
</div>
<div class="paragraph">
<p>You can use the <code>Request.setNextRequest()</code> method to provide details about the current cursor position, so that the next <em>LOAD_MORE</em> request will know where to "start".</p>
</div>
<div class="paragraph">
<p>One last thing, before we fire up the simulator:  We need to add a lookup to an instance of our provider.  The best place to register lookups is in the <code>onStartController()</code> method of the controller.  In your <em>MyRadApp</em>'s <code>onStartController()</code> method, add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">addLookup(<span style="color:#080;font-weight:bold">new</span> SampleListProvider());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, when you launch the simulator, you will see something like the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-list-view.png" alt="sample list view">
</div>
</div>
<div class="sect3">
<h4 id="_list_row_renderers">2.12.1. List Row Renderers</h4>
<div class="paragraph">
<p>I&#8217;ll be the first to admit that our list looks a little plain.  Let&#8217;s spice it up a bit by customizing its row renderer.  We will tell the list view how to render the rows of the list by providing a <code>&lt;row-template&gt;</code> as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Entity List Sample<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;entityList</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">provider</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.myapp.providers.SampleListProvider.class</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;row-template&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SampleListRow</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;profileAvatar</span> <span style="color:#b48">size</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1.5rem</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">west</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
                    <span style="color:#b48">component.style.font</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">native:MainRegular 1rem</span><span style="color:#710">&quot;</span></span>
                          <span style="color:#b48">component.style.marginLeft</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1rem</span><span style="color:#710">&quot;</span></span>
                <span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/border&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/row-template&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/entityList&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s unpack this snippet so we can see what is going on.  The <code>&lt;row-template&gt;</code> tag directs its parent <code>&lt;entityList&gt;</code> tag to use its <em>child</em> container as a row template.  The <code>&lt;border&gt;</code> tag inside the <code>&lt;row-template&gt;</code>, then will be duplicated for each row of the list.</p>
</div>
<div class="paragraph">
<p>Inside this <code>&lt;row-template&gt;</code> tag, the <em>context</em> is changed so that the <em>model</em> is the row model, rather than the model of the the parent view class.  Therefore property and entity views like <code>&lt;radLabel&gt;</code> and <code>&lt;profileAvatar&gt;</code> will use the row&#8217;s entity object as its model.  Notice that the <code>&lt;radLabel&gt;</code> component is bound to the <em>Person.name</em> tag, so it will bind to the corresponding property of the row.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
This example used the <code>Person.name</code> tag whereas we could have used the <code>UserProfile.name</code> tag here.  Since we defined the <code>UserProfile.name</code> tag as being equal to <code>Person.name</code> inside the <code>UserProfile</code> interface, these are equivalent.  I generally prefer to reference the more generic schema tags (e.g. From the <code>Thing</code> and <code>Person</code> schemas) in my views to make them more easily portable between projects.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>&lt;profileAvatar&gt;</code> tag is a handy component that will display an avatar for the entity.  This will check to see if the entity has any properties with the <code>Thing.thumbnailUrl</code> tag, and display that image if found.  Otherwise it will render an image of the first letter of the name (I.e. the value of a property with the <code>Thing.name</code> tag).  For the <code>size</code> parameter we specify "1.5rem", which means that we want the avatar to be 1.5 times the height of the default font.</p>
</div>
<div class="paragraph">
<p>One last thing, before we fire up the simulator.  The <code>&lt;border&gt;</code> tag in the row template has <code>uiid="SampleListRow"</code>, which refers to a style that needs to be defined in the CSS stylesheet.  Add the following snippet to the common/src/main/css/theme.css file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">SampleListRow</span> {
    <span style="color:#606">background-color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">border</span>:<span style="color:#088">none</span>;
    <span style="color:#606">border-bottom</span>: <span style="color:#60E">0.5pt</span> <span style="color:#088">solid</span> <span style="color:#0A0">#ccc</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, if you start the simulator, it should show you something like the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/row-template-sample.png" alt="row template sample">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_responding_to_list_row_events">2.12.2. Responding to List Row Events</h4>
<div class="paragraph">
<p>Suppose we want the app to navigate to a UserProfile form for the selected user, when the user clicks on one of the rows of the list.</p>
</div>
<div class="paragraph">
<p>The simplest way to achieve this is to add a button to our row-template as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">east</span><span style="color:#710">&quot;</span></span>
    <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#UserProfilePage{}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Show Profile<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>{}</code> at the end of the <em>rad-href</em> URL is a short-hand for the "current entity", and in this context the current entity is the one corresponding to the list row.  This would be the same as <code>#UserProfilePage{context.getEntity()}</code>.</p>
</div>
<div class="paragraph">
<p>Upon saving the <em>StartPage.xml</em> file, the simulator should reload with the "Show Profile" button added to each row as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/show-profile-button.png" alt="show profile button">
</div>
</div>
<div class="paragraph">
<p>And clicking the <em>ShowProfile</em> button on any row, will show the <em>UserProfilePage</em> for the corresponding UserProfile.  E.g. If I click on the "Shai Almog" row&#8217;s <em>ShowProfile</em> button, it will display:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shai-user-profile-page.png" alt="shai user profile page">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_a_lead_component">2.12.3. Using a Lead Component</h4>
<div class="paragraph">
<p>It seems a bit redundant to have a "Show Profile" button on each row.  Why not just show the profile when the user presses anywhere on the row.  This can be achieved by setting the button as the <em>lead component</em> for the row&#8217;s container.  Then the container will pipe all of its events to the button for handling.  We would generally, then, hide the button from view.</p>
</div>
<div class="paragraph">
<p>We use the <code>rad-leadComponent</code> attribute on the container to set its lead component.  This attribute takes a query selector (similar to a CSS selector) to specify one of its child components as the lead component.</p>
</div>
<div class="paragraph">
<p>Change the <code>&lt;row-template&gt;</code> and its contents to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;row-template&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SampleListRow</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-leadComponent</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ShowProfileButton</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;profileAvatar</span> <span style="color:#b48">size</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1.5rem</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">west</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">component.allStyles.font</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">native:MainRegular 1rem</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">component.allStyles.marginLeft</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">1rem</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">east</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ShowProfileButton</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#UserProfilePage{}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Show Profile<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/border&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/row-template&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The key ingredients here are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>rad-leadComponent="ShowProfileButton"</code></dt>
<dd>
<p>This says to use the component with UIID "ShowProfileButton" as the lead component.</p>
</dd>
<dt class="hdlist1"><code>&lt;button &#8230;&#8203; uiid="ShowProfileButton"&#8230;&#8203;&gt;</code></dt>
<dd>
<p>Assign the "ShowProfileButton" uiid to the button so that the <code>rad-leadComponent</code> selector will find it correctly.</p>
</dd>
<dt class="hdlist1"><code>&lt;button &#8230;&#8203; hidden="true" &#8230;&#8203;&gt;</code></dt>
<dd>
<p>Set the button to be hidden so that it doesn&#8217;t appear on in the view.  It isn&#8217;t sufficient to set <code>visible="false"</code> here, as this would still retain its space in the layout.  The <code>hidden</code> attribute hides the button completely without having space reserved for it in the UI.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After making these changes, the view should look like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/list-with-lead-component.png" alt="list with lead component">
</div>
</div>
<div class="paragraph">
<p>And clicking on any row will trigger the <code>rad-href</code> attribute on the button, which will display the user profile for that particular row.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="intraform-navigation">2.13. Intra-Form Navigation</h3>
<div class="paragraph">
<p>Earlier, in <a href="#form-navigation">Form Navigation</a>, we learned how to navigate between forms using a <em>button</em> tag with the <code>rad-href</code> attribute.  When developing for tablet and desktop, you may want to navigate to a different view within the same form; sort of like using frames in HTML.  A <em>mail</em> app will often have a list of messages on the left side of the screen, and details of the currently selected message on the right, as shown in the Gmail app screenshot below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gmail-app-screenshot.png" alt="gmail app screenshot">
</div>
</div>
<div class="paragraph">
<p>In our previous examples with <code>rad-href</code>, we specified <em>which</em> view we wanted to navigate to, but we didn&#8217;t specify <em>where</em> we wanted the view to be displayed.  By default, it navigates to a new form whose <em>FormController</em> is a child of the current <em>FormController</em>.  The full syntax of <code>rad-href</code> supports targeting the view to a different location in both the view hierarchy and the controller hierarchy.</p>
</div>
<div class="paragraph">
<p>Suppose we wanted our view to be displayed inside a <em>Sheet</em> instead of a new form.  Then we could do something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage sheet</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>About Page<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, suppose we wanted to display the view inside a Container within the current form.  Then we could do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TargetFrame</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/border&gt;</span> <b class="conum">(1)</b>

...

<span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage sel:#TargetFrame</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>About Page<span style="color:#070;font-weight:bold">&lt;/button&gt;</span> <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A placeholder container where the <em>AboutPage</em> view will be loaded.</p>
</li>
<li>
<p>The <code>sel:</code> prefix for the target means that the remainder will be treated as a <code>ComponentSelector</code> query, which is similar to a CSS selector of Javascript Query Selector.  In our case we are targeting the component with name "TargetFrame".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the above example, when the user presses the button, it will load the <em>AboutPage</em> view into the <em>TargetFrame</em> container.</p>
</div>
<div class="paragraph">
<p>Change the contents of the <em>StartPage</em> view to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;splitPane</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Intra-form Navigation<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;var</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">profile</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">lookup</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.myapp.models.UserProfile</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Menu<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage sel:#ContentPanel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>About Page<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#UserProfilePage{profile} sel:#ContentPanel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>My Profile<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage sheet</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>About Page in Sheet<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;border&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;spanLabel</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">north</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>This example works best in Tablet or Desktop Mode.
        It demonstrates intra-form navigation.
        <span style="color:#070;font-weight:bold">&lt;/spanLabel&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ContentPanel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/border&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;/border&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/splitPane&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The above example demonstrates the <code>&lt;splitPane&gt;</code> component that is useful for tablet and desktop UIs.  See <a href="#using-split-panes">[using-split-panes]</a> to learn more about the <em>SplitPane</em> component.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Launch the simulator, and enable the <em>Desktop</em> skin by selecting the  <em>Skin</em> &gt; <em>Desktop.skin</em> menu item as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/skins-desktop-skin.png" alt="skins desktop skin">
</div>
</div>
<div class="paragraph">
<p>Then the app should appear something like the followign screenshot:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intra-form-navigation-0.png" alt="intra form navigation 0">
</div>
</div>
<div class="paragraph">
<p>Click on the <em>My Profile</em> link on the left, and you should see the user profile page appear on the right, as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intra-form-navigation-sample.png" alt="intra form navigation sample">
</div>
</div>
<div class="paragraph">
<p>If you click on the <em>About Page in Sheet</em> button, it will load the <em>AboutPage</em> view inside a sheet as shown here.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intra-form-navigation-sheet.png" alt="intra form navigation sheet">
</div>
</div>
<div class="paragraph">
<p>You can also control the position of where the sheet will be shown by using one <code>sheet-top</code>, <code>sheet-left</code>, <code>sheet-right</code>, or <code>sheet-center</code> instead of the <code>sheet</code> option that we used in this example.</p>
</div>
<div class="sect3">
<h4 id="_navigation_transitions">2.13.1. Navigation Transitions</h4>
<div class="paragraph">
<p>You can use the <code>rad-transition</code> attribute in conjuction with the <code>rad-href</code> attribute also, to specify a transition to be used when replacing a container&#8217;s content with a new view.</p>
</div>
<div class="paragraph">
<p>To demonstrate this, let&#8217;s add a <code>rad-transition</code> attribute to each button in the menu from the previous example.  Change the first <em>AboutPage</em> button to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#AboutPage sel:#ContentPanel</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">rad-transition</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">rad-href 0.5s flip</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">&gt;</span>About Page<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, when you click this button, it should transition the <em>AboutPage</em> in with a <em>flip</em> transition with a duration of 0.5 seconds.</p>
</div>
<div class="paragraph">
<p>Some other transition types include <em>fade</em>, <em>slide</em>, <em>cover</em>, and <em>uncover</em> with variants to specify direction, such as <em>slide-up</em>, <em>slide-down</em>, <em>slide-left</em>, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>See <a href="#chapter-transitions">[chapter-transitions]</a> for more details and examples using transitions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_view_controllers">2.14. Custom View Controllers</h3>
<div class="paragraph">
<p>Up until now, we haven&#8217;t created any custom controllers for our views, other than the application controller (the <em>MyRadApp</em> class).  Since all events propagate up the controller hierarchy, it is possible just to handle all of the events in the application controller, as we&#8217;ve been doing.  Keeping all of our logic inside a single <em>application-wide</em> controller has some benefits for small, example apps, but for most real-world apps, you&#8217;ll want to be intentional about your application&#8217;s architecture.</p>
</div>
<div class="paragraph">
<p>Best practice is to create a <em>ViewController</em> for each view, which will be responsible for handling application logic pertaining to that view.   This practice will promote better modularity, which will make it easier to maintain your code, and to reuse components in other projects.</p>
</div>
<div class="paragraph">
<p>You can assign a custom view controller to a view by adding a <code>view-controller</code> attribute to the root element of your view.  E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.myapp.controllers.StartPageViewController</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
   .....
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If your controller class is covered by an <em>import</em> directive in your view, then you could just provide the <em>simple</em> name of the controller class, rather than the fully-qualified name.  E.g. the following would also work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPageViewController</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
    import com.example.myapp.controllers.*;
  <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>
  ...
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s expand this to a complete example.</p>
</div>
<div class="paragraph">
<p>In our sample app project, create a new package in the <em>common/src/main/java</em> directory named <em>com.example.myapp.controllers</em>, and create a new Java class in this package named "StartPageViewController.java" with the following contents:</p>
</div>
<div class="listingblock">
<div class="title">common/src/main/java/com/example/myapp/controllers/StartPageViewController.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.myapp.controllers</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.Controller</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.ViewController</span>;

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">StartPageViewController</span> <span style="color:#088;font-weight:bold">extends</span> ViewController {
    <span style="color:#777">/**
     * Creates a new ViewController with the given parent controller.
     *
     * @param parent
     */</span>
    <span style="color:#088;font-weight:bold">public</span> StartPageViewController(Controller parent) {
        <span style="color:#950">super</span>(parent);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, change the <em>StartPage.xml</em> template to the following content:</p>
</div>
<div class="listingblock">
<div class="title">common/src/main/rad/views/com/example/myapp/StartPage.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.myapp.controllers.StartPageViewController</span><span style="color:#710">&quot;</span></span>
   <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">StartPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Example Custom View Controller<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>

    <span style="color:#777">&lt;!-- Define an action category for the controller to
        receive events when the &quot;Hello&quot; button is clicked --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;spanLabel&gt;</span>Click the button below to trigger an action in the controller.<span style="color:#070;font-weight:bold">&lt;/spanLabel&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HELLO_CLICKED</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>


<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now try running the example in the simulator.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/custom-view-controller-run1.png" alt="custom view controller run1">
</div>
</div>
<div class="paragraph">
<p>Our button is conspicuously missing from this form.  This is because it is bound to the <em>HELLO_CLICKED</em> action category, but our controller hasn&#8217;t added any actions to this category yet.  Let&#8217;s add an action to our view controller now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
        <span style="color:#950">super</span>.initControllerActions();

        <span style="color:#777">// Register an action with HELLO_CLICKED category so that the view</span>
        <span style="color:#777">// will bind it to the button.</span>
        ActionNode.builder()
                .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello</span><span style="color:#710">&quot;</span></span>)
                .addToController(<span style="color:#950">this</span>, StartPage.HELLO_CLICKED, evt -&gt; {

                    <span style="color:#777">// Consume the event so that it doesn't propagage up the controller</span>
                    <span style="color:#777">// hierarchy.</span>
                    evt.consume();

                    <span style="color:#777">// Show a message to confirm that we received the event.</span>
                    ToastBar.showInfoMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">You clicked me</span><span style="color:#710">&quot;</span></span>);
                });
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The simulator should automatically reload upon saving the controller file, and the "Hello" button should appear.  Click "Hello" to confirm that our <em>ToastBar</em> info message appears as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/custom-controller-you-clicked-me.png" alt="custom controller you clicked me">
</div>
</div>
</div>
<div class="sect2">
<h3 id="views-within-views">2.15. Views within Views</h3>
<div class="paragraph">
<p>Since RAD views are Components themselves, they can be used inside other views, just like other components are.  To demonstrate this,
let&#8217;s create create a form to allow users to enter contact information such as name, email, billing address, and shipping address.  Since the billing address and shipping address will likely use the same fields, we&#8217;ll create a <em>AddressView</em> view and use it from the main form.</p>
</div>
<div class="paragraph">
<p>Create a new view in the same package as our existing views named <em>AddressForm.xml</em> with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">AddressForm.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">streetAddress</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PostalAddress.streetAddress</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">city</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PostalAddress.addressLocality</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">province</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PostalAddress.addressRegion</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">country</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PostalAddress.addressCountry</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">postalCode</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PostalAddress.postalCode</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">streetAddress</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Street Address</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">city</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">City</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">province</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Province</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">country</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Country</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">postalCode</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Postal Code</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now create another view called <em>ContactForm.xml</em> in the same directory with the following contents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ContactForm.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Contact Form<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>

    <span style="color:#777">&lt;!-- Define some tags for the view model --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.email</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Name<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/radTextField&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Email<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;radTextField</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/radTextField&gt;</span>

    <span style="color:#777">&lt;!-- Embed an AddressForm view for the billing address --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Billing Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- Embed another AddressForm view for the shipping address --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Shipping Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- Submit button .. doesn't do anything yet --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Submit</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally, modify the <code>actionPerformed()</code> method of the <code>MyRADApp</code> class to display the contact form we just created on start:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> actionPerformed(ControllerEvent evt) {

        with(evt, StartEvent.class, startEvent -&gt; {
            <span style="color:#080;font-weight:bold">if</span> (<span style="color:#069">true</span>) {
                <span style="color:#777">// Temporarily making ContactForm the default form.</span>
                <span style="color:#080;font-weight:bold">new</span> ContactFormController(<span style="color:#950">this</span>).show();
                <span style="color:#080;font-weight:bold">return</span>;
            }
            ...
        });
        <span style="color:#950">super</span>.actionPerformed(evt);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you fire up the simulator, the app should look something like the following screenshot:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/embedded-address-forms.png" alt="embedded address forms">
</div>
</div>
<div class="paragraph">
<p>Notice that the contact form includes two embedded address forms.  One for the <em>billing address</em> and the other for the <em>shipping address</em>.  Let&#8217;s walk through the <em>ContactForm.xml</em> source to see what is happening here.</p>
</div>
<div class="paragraph">
<p>You&#8217;ve seen most of the tags before in previous examples.  The new part that I&#8217;d like to highlight here are the two <code>&lt;addressForm&gt;</code> tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Embed an AddressForm view for the billing address --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Billing Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- Embed another AddressForm view for the shipping address --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Shipping Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These create instances of the <code>AddressForm</code> view that we defined in the <code>AddressForm.xml`file.  The `view-model</code> attribute is necessary to specify the view model that should be used for the address form.  The value "new" is a special value that indicates that the view should create a new view model for itself.    If this were omitted, it would attempt to use the view model of the current view which we don&#8217;t want here, because the model for the ContactForm isn&#8217;t compatible with the model for the AddressForm.</p>
</div>
<div class="paragraph">
<p>This is roughly equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new AddressFormModelImpl()</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With our current contact form, the <em>AddressForm</em> view models aren&#8217;t connected to the <em>ContactForm</em> view model, which isn&#8217;t idea.  Let&#8217;s improve this by defining tags for <em>billingAddress</em> and <em>shippingAddress</em> in the <em>ContactForm</em> view model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">shippingAddress</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">AddressFormModel</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">initialValue</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">billingAddress</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">AddressFormModel</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">initialValue</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">new</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>initialValue</code> attribute here specifies the initial value that new model objects should assign to the property.  In this case we use the special value "new", which is equivalent here to <code>initialValue="new AddressFormModelImpl()"</code>.  If we omit this <code>initialValue</code> it will leave the properties as <code>null</code> until we explicitly set them, which might bite us later on.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, change the <code>view-model</code> attribute of the <code>&lt;addressForm&gt;</code> tags to use the <em>shippingAddress</em> and <em>billingAddress</em> properties respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Embed an AddressForm view for the billing address --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;label&gt;</span>Billing Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">context.getEntity().getBillingAddress()</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#777">&lt;!-- Embed another AddressForm view for the shipping address --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;label&gt;</span>Shipping Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">context.getEntity().getShippingAddress()</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that I used the explicit <code>getBillingAddress()</code> and <code>getShippingAddress()</code> methods on the <em>ContactForm</em> view model.  I could also have used the more generic <code>getEntity(TAG)</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">context.getEntity().getEntity(billingAddress)

context.getEntity().getEntity(shippingAddress)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both are fine here, but I chose to use the explicit getters as it is more succinct and easier to understand.</p>
</div>
<div class="paragraph">
<p>Later on you&#8217;ll learn another, more succinct, way to access properties of the view model using RAD property macros.  E.g. The following is also equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Embed an AddressForm view for the billing address --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;label&gt;</span>Billing Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${billingAddress}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#777">&lt;!-- Embed another AddressForm view for the shipping address --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;label&gt;</span>Shipping Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${shippingAddress}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Fun Fact</strong>: You can also use the same model for both views.  E.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Embed an AddressForm view for the billing address --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;label&gt;</span>Billing Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${billingAddress}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#777">&lt;!-- Embed another AddressForm view for the shipping address --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;label&gt;</span>Shipping Address<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;addressForm</span> <span style="color:#b48">view-model</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${billingAddress}</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, if you start typing into any fields in <em>billing address</em>, it will also update the corresponding fields in <em>shipping address</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_developing_custom_components">2.16. Developing Custom Components</h3>
<div class="paragraph">
<p>Since you can use <em>any</em> component (i.e. <code>com.codename1.ui.Component</code> subclass) in your views, it follows that you can also develop your own components and use them in your views.  You&#8217;ve already seen a special case of this in <a href="#views-within-views">Views within Views</a>, where we used a view that we created from another view.</p>
</div>
<div class="paragraph">
<p>The only thing you <em>may</em> need to do in order to use your custom component from a <em>view</em> is add an <em>import</em> statement for your component&#8217;s class.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
RAD views automatically import several of the core packages containing components, such as <code>com.codename1.ui.<strong></code>, <code>com.codename1.rad.ui.entityviews.</strong></code>, etc&#8230;&#8203;  You only need to explicitly <em>import</em> packages and classes that aren&#8217;t among these default packages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If your component has a <em>no-arg</em> constructor, then it should <em>just</em> work.  If it doesn&#8217;t have a <em>no-arg</em> constructor, or it has some special requirements for how it is used, then you may need to also implement a <em>ComponentBuilder</em> for your component.  Later on, I&#8217;ll also show you how to use dependency injection to have certain properties and arguments automatically "injected" into your component at runtime.</p>
</div>
<div class="paragraph">
<p>To demonstrate this, create a Java class named <code>HelloComponent</code> in the package <code>com.example.myapp.components</code>, with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.myapp.components</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.ui.Container</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.ui.Label</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.ui.layouts.BorderLayout</span>;

<span style="color:#777">/**
 * A custom component that displays a hello message.
 */</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">HelloComponent</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Container</span> {
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">Label</span> helloLabel = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">Label</span>();
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> helloMessage;

    <span style="color:#088;font-weight:bold">public</span> HelloComponent() {
        <span style="color:#950">super</span>(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">BorderLayout</span>());
        add(<span style="color:#0a8;font-weight:bold">BorderLayout</span>.CENTER, helloLabel);
    }

    <span style="color:#777">/**
     * Set the hello message to display.
     * @param helloMessage
     */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> setHelloMessage(<span style="color:#0a8;font-weight:bold">String</span> helloMessage) {
        <span style="color:#950">this</span>.helloMessage = helloMessage;
        helloLabel.setText(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello </span><span style="color:#710">&quot;</span></span> + helloMessage);
    }


    <span style="color:#777">/**
     * Gets the Hello Message.
     * @return
     */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> getHelloMessage() {
        <span style="color:#080;font-weight:bold">return</span> helloMessage;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>No open the contact form from the previous example and add an import statement for our new package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;import&gt;</span>
    import com.example.myapp.components.HelloComponent;
<span style="color:#070;font-weight:bold">&lt;/import&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you save the file, it will automatically recompile the XML schema so that the <code>&lt;helloComponent&gt;</code> tag will be available for type hinting/autocompletion in a few moments.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-componet-typehint.png" alt="hello componet typehint">
</div>
</div>
<div class="paragraph">
<p>Add the <code>helloMessage</code> attribute to set the message in our component.  Notice that IntelliJ provides type hints for this property also.  It automatically picks up all the setters and getters for your class and converts them into XML attributes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-component-attribute-autocomplete.png" alt="hello component attribute autocomplete">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s add an instance that says "Hello Steve":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;helloComponent</span> <span style="color:#b48">helloMessage</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Steve</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-steve.png" alt="hello steve">
</div>
</div>
<div class="sect3">
<h4 id="_entityview_and_propertyview">2.16.1. EntityView and PropertyView</h4>
<div class="paragraph">
<p>If your component is meant to "bind" to a model, then you should consider extending either <code>AbstractEntityView</code> or <code>PropertyView</code>, as these include built-in support for binding to entities.  If your component is meant to be a view for a single property, then <code>PropertyView</code> would make sense.  If, however, it is meant to bind to multiple properties on a model, then you should extend <code>AbstractEntityView</code>.  As we&#8217;ve seen before, in <a href="#views-within-views">Views within Views</a>, you could create an <em>EntityView</em> entirely in XML, RAD views <em>do</em> get compiled to subclasses of <code>AbstractEntityView</code>.  The choice is yours.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_app_example_1_a_twitter_clone">3. App Example 1: A Twitter Clone</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In <a href="#getting-started">Getting Started</a> we covered the basics of CodeRAD.  In this chapter we&#8217;ll put our knowledge to the test as we build a clone of the Twitter mobile app.</p>
</div>
<div class="paragraph">
<p>As Julie Andrews says, let&#8217;s start at the very beginning: The start page and signup/signing workflow.  Below are some screenshots from the actual Twitter iOS app running on my iPhone 8.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In this chapter we will replicate these forms and workflow using CodeRAD.  This tutorial will focus only on the <em>client</em> portion of the app.  Where the <em>real</em> app would require server interaction (e.g. login and registration), we will create mock implementations that run on the client.  These mock implementations can be extended to support your preferred server-side technology, but that is beyond the scope of this tutorial.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/twitter-entrance-flowchart.png" alt="twitter entrance flowchart">
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_project">3.1. Creating the Project</h3>
<div class="paragraph">
<p>To get started, download the CodeRAD starter project from <a href="https://github.com/shannah/coderad2-starter-template/archive/refs/heads/master.zip">here</a>.</p>
</div>
<div class="paragraph">
<p>Extract the .zip file and then open the project in IntelliJ IDEA</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
This is the same starter project that we used in the <a href="#getting-started">Getting Started</a> tutorial. I recommend you go through the <a href="#getting-started">Getting Started</a> tutorial before starting this one as it will provide you with the fundamentals required to move forward.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The starter project comes preconfigured with placeholders for the maven <code>groupId</code> and <code>artifactId</code> properties.</p>
</div>
<div class="paragraph">
<p>Before we begin, let&#8217;s change the <code>groupId</code> and <code>archetypeId</code> to better reflect our application.  We&#8217;ll do this by <em>cloning</em> the project using the <code>cn1:clone</code> maven goal.</p>
</div>
<div class="paragraph">
<p>First expand the <em>Maven</em> side panel (if it isn&#8217;t already expanded) by clicking on the "Maven" tab on the right side of the IntelliJ window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-maven-tab.png" alt="intellij maven tab">
</div>
</div>
<div class="paragraph">
<p>Then expand the <em>myapp</em> &gt; <em>Run Configuration</em> node, and double click the <em>Clone Project</em> option.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-clone-project.png" alt="intellij clone project">
</div>
</div>
<div class="paragraph">
<p>In the dialog prompt, enter the new <em>groupId</em> and <em>artifactId</em> for the project, and select a destination for the new project.  My settings are shown in the screenshot below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/clone-as-tweet-app-dialog.png" alt="clone as tweet app dialog">
</div>
</div>
<div class="paragraph">
<p>After you press <em>OK</em> it will create a new project for you at the location you provided.  In my case, the project will be found at <code>$HOME/Downloads/tweetapp</code>.</p>
</div>
<div class="paragraph">
<p>Clone the current project, and then open the <em>cloned</em> project in IntelliJ.</p>
</div>
<div class="paragraph">
<p>We are now ready to proceed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_views">3.2. Creating the Views</h3>
<div class="paragraph">
<p>The flow-chart above shows five forms that we will be recreating:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Welcome Page</p>
</li>
<li>
<p>Signup Page</p>
</li>
<li>
<p>Signin Page</p>
</li>
<li>
<p>Forgot Password</p>
</li>
<li>
<p>About Twitter</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We&#8217;ll begin by making empty views for each of these forms.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
All of the views for this project are located in the <em>common/src/main/rad/views</em> directory.  See <a href="#under-the-hood">Under the Hood</a> for a brief of the project layout.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First let&#8217;s create a new package for our views.  Expand the <em>common/src/main/rad/views/com/example/tweetapp</em> nodes in the project inspector on the left.  Then right-click the <em>tweetapp</em> node and select <em>New</em> &gt; <em>Directory</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-new-directory.png" alt="tweet app new directory">
</div>
</div>
<div class="paragraph">
<p>Enter "views" for the folder name, and press <em>Enter</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-package-name-views.png" alt="tweet app package name views">
</div>
</div>
<div class="paragraph">
<p>Then right-click on this new <em>views</em> directory node, and select <em>New</em> &gt; <em>File</em>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-views-new-file.png" alt="tweet app views new file">
</div>
</div>
<div class="paragraph">
<p>Enter "WelcomePage.xml", in the prompt, and press <em>Enter</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-create-welcomepage.png" alt="tweetapp create welcomepage">
</div>
</div>
<div class="paragraph">
<p>Now, open the <em>WelcomePage.xml</em> file, and change the contents to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Welcome Page<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Before proceeding, let&#8217;s try running the project in the simulator to make sure that it compiles OK.  Running the project will also run the CodeRAD annotation processor which will generate Java classes from our WelcomePage view so that they will be available for type hinting and auto-complete in IntelliJ.</p>
</div>
<div class="paragraph">
<p>Press the <span class="image"><img src="images/intellij-run-button.png" alt="intellij run button"></span> button on the toolbar.  It may take a while to run the first time as it might have to download dependencies.   Subsequent runs should only take a few seconds.</p>
</div>
<div class="paragraph">
<p>If all goes well, you should see the simulator pop up with a "Hi World" app as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-hi-world.png" alt="tweetapp hi world">
</div>
</div>
<div class="paragraph">
<p>Notice that this isn&#8217;t showing our <em>WelcomePage</em> yet.  It is showing the default <em>StartPage</em> template from the template.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s modify the <em>ApplicationController</em> so that it shows our <em>WelcomePage</em> view as the default view.</p>
</div>
<div class="paragraph">
<p>The <em>ApplicationController</em> class for this application is defined in the <em>TweetApp</em> class inside the <em>com.example.tweetapp</em> package (inside the <em>src/main/java</em> directory).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-project-inspector-tweetapp-selected.png" alt="tweetapp project inspector tweetapp selected">
</div>
</div>
<div class="paragraph">
<p>Open this file and find the <code>actionPerformed()</code> method.  It should look something like the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> actionPerformed(ControllerEvent evt) {

        with(evt, StartEvent.class, startEvent -&gt; {
            <span style="color:#080;font-weight:bold">if</span> (!startEvent.isShowingForm()) {
                <span style="color:#777">// If app was re-opened, it will automatically</span>
                <span style="color:#777">// show the current form, and set the showingForm flag</span>
                <span style="color:#777">// In such a case, we don't want to show the welcome form.</span>
                startEvent.setShowingForm(<span style="color:#069">true</span>);
                <span style="color:#080;font-weight:bold">new</span> WelcomePageController(<span style="color:#950">this</span>).show();
            }
        });
        <span style="color:#950">super</span>.actionPerformed(evt);
    }</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>actionPerformed()</code> method is triggered for every event that propagages up to the <em>ApplicationController</em>.  You can monitor and handle many application events from inside this method.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s change the <code>new StartPageController(this).show()</code> call to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">new</span> WelcomePageController(<span style="color:#950">this</span>).show();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>WelcomePageController</code> class is a <code>FormController</code> subclass that is generated from the <code>WelcomePage.xml</code> view by the CodeRAD annotation processor.  If you haven&#8217;t built the project since creating the <code>WelcomePage.xml</code> file, then IntelliJ might complain that it can&#8217;t find the class.  Don&#8217;t worry, about these warnings as they should "fix" themselves when you run or build the project.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, if you restart the simulator, it should show our <em>WelcomePage</em> view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-welcome-page-form-blank.png" alt="tweetapp welcome page form blank">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hot_reload">3.3. Hot Reload</h3>
<div class="paragraph">
<p>The Codename One simulator has a <em>Hot Reload</em> feature that can dramatically improve your development experience by reducing the turnaround time for testing changes to your source code.  See <a href="#hot-reload">Hot Reload</a> for more information about this feature.</p>
</div>
<div class="paragraph">
<p>For most of this tutorial, I will be using the <em>Reload Current Form</em> setting of Hot reload so that the simulator will automatically reload the current form after I make changes to the source.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hot-reload-reload-current-form.png" alt="hot reload reload current form">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_welcome_page">3.4. The Welcome Page</h3>
<div class="paragraph">
<p>Our welcome page is currently just a placeholder that says "Welcome".  Let&#8217;s change it to resemble the Twitter welcome page as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/twitter-welcome-page.png" alt="twitter welcome page">
</div>
</div>
<div class="paragraph">
<p>In order to replicate this content and structure, add the following to the <em>WelcomePage.xml</em> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;borderAbsolute</span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">WelcomePage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;spanLabel&gt;</span>See what's happening in the world right now.<span style="color:#070;font-weight:bold">&lt;/spanLabel&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button&gt;</span>Create account<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;flow</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Haven an account already?<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button&gt;</span>Log in<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/flow&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/borderAbsolute&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nothing fancy here.  I&#8217;m just trying to <em>roughly</em> replicate how the form is laid out using Codename One&#8217;s layout managers.   Now reload the simulator (if you have <em>Hot Reload</em> enabled, then the simulator will reload automatically), and you&#8217;ll see something that looks like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-welcome-page-no-style.png" alt="tweet app welcome page no style">
</div>
</div>
<div class="paragraph">
<p>Now that the structure is there, let&#8217;s work on the style.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with the <em>Create Account</em> button.  According a web search, the <em>Twitter Blue</em> color is <code>#1DA1F2</code>, so let&#8217;s make the button background this <em>Twitter Blue</em> and the foreground color white.  We&#8217;ll do this by creating a UIID named <code>TwitterButton</code> in our stylesheet.</p>
</div>
<div class="sect3">
<h4 id="_the_create_account_button">3.4.1. The <em>Create Account</em> Button</h4>
<div class="paragraph">
<p>Open the stylesheet (located at <em>src/main/css/theme.css</em>) and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">background-color</span>: <span style="color:#0A0">#55acee</span>;
    <span style="color:#606">color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">border</span>: <span style="color:#088">cn1-pill-border</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And add <code>uiid="TwitterButton"</code> to the <em>Create Account</em> button:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterButton</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Create account<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see the simulator update within a couple seconds to show you the result of this change:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/twitter-create-account-button-2.png" alt="twitter create account button 2">
</div>
</div>
<div class="paragraph">
<p>This is getting closer, but the button needs a bit more padding.</p>
</div>
<div class="paragraph">
<p>Just eye-balling it, I&#8217;d say the button has about an equal amount of padding as the text size.  So we&#8217;ll try padding of <code>1rem</code>.</p>
</div>
<div class="paragraph">
<p>After some trial and error, I found that the it looks best with a padding of 0.7rem.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>rem</code> unit corresponds to the height of the default system font.  You can also use other units such as <code>mm</code> (millimetres)<code>, `pt</code> (points = 1/72nd of an inch), <code>px</code> = pixels, <code>vh</code> = percent of the display height, <code>vw</code> = percent of the display width, <code>vmin</code> = percent of the minimum of the display height and width, or <code>vmax</code> = the percent of the maxium of the display height and width.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So our CSS becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">background-color</span>: <span style="color:#0A0">#1DA1F2</span>;
    <span style="color:#606">color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">border</span>: <span style="color:#088">cn1-pill-border</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">1</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">native:MainBold</span><span style="color:#710">'</span></span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
I also explicitly set the <em>font-size</em> and <em>font-family</em> here.  The <code>native:MainBold</code> maps to the main bold font of the platform.  On Android this will be the <em>Roboto</em> font, and on iOS it will be the <em>San Francisco</em> font.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And the result looks like the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-create-account-button-3.png" alt="tweetapp create account button 3">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_form_padding">3.4.2. The Form Padding</h4>
<div class="paragraph">
<p>We also need to add some padding to the form to match the design.  Again, I&#8217;m eye-balling it, but it looks like their form has about 10% of the display width.</p>
</div>
<div class="paragraph">
<p>Create a new UIID in the stylesheet and call it WelcomePage as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">WelcomePage</span> {
    <span style="color:#606">padding</span>:<span style="color:#60E">10</span><span style="color:#088">vw</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see the result instantly in the simulator:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-create-account-button-4.png" alt="tweetapp create account button 4">
</div>
</div>
<div class="paragraph">
<p>It&#8217;s getting closer.  The font isn&#8217;t exactly right (I&#8217;m just using the defualt font right now), but that&#8217;s OK.  We can circle back and refine the fonts later.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_heading_text">3.4.3. The Heading Text</h4>
<div class="paragraph">
<p>The next obvious thing is the <em>See what&#8217;s happening&#8230;&#8203;</em> text.  This needs to be larger and black.</p>
</div>
<div class="paragraph">
<p>I&#8217;ll create a style named <em>TwitterHeading1</em> for this style.  Set this style as the <code>textUIID</code> attribute on the <code>&lt;spanLabel&gt;</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;spanLabel</span> <span style="color:#b48">textUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterHeading1</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>See what's happening in the world right now.<span style="color:#070;font-weight:bold">&lt;/spanLabel&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We set the <code>textUIID</code> attribute instead of the usual <code>uiid</code> attribute because the <em>SpanLabel</em> component is a compound component that contains an inner component for rendering the text.  The <code>uiid</code> attribute, in this case, only pertains to the outer <code>SpanLabel</code> container - so things like borders, backgrounds, and padding, will work as expected there - but the <em>font</em> needs to be applied to the inner component.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And add this style to the stylesheet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterHeading1</span> {
    <span style="color:#606">font-size</span>: <span style="color:#60E">1.2</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#088">black</span>;
    <span style="color:#606">margin-bottom</span>: <span style="color:#60E">1</span><span style="color:#088">rem</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These sizes and margins were arrived at by trial and error.</p>
</div>
<div class="paragraph">
<p>According to the simulator, we&#8217;re getting closer to our destination:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-create-account-button5.png" alt="tweetapp create account button5">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_login_link">3.4.4. The Login Link</h4>
<div class="paragraph">
<p>The footer text and login link are currently too big, and require some padding.  They also highlight a problem that we will face when app is displayed on a phone that has rounded corners and notches, like the iPhone X.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll add the <code>safeArea="true"</code> attribute on the view&#8217;s container to ensure that it provides enough padding so that its contents don&#8217;t get clipped by the corners and notches.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;borderAbsolute</span> <span style="color:#b48">safeArea</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">...</span><span style="color:#070;font-weight:bold">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ll also add some styles for the bottom labels and links, we&#8217;ll call them, <code>TwitterSmallLabel</code> and <code>TwitterSmallLink</code> respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterSmallLabel</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Label</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span>;
    <span style="color:#606">padding</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#66757f</span>;
    <span style="color:#606">margin-right</span>: <span style="color:#60E">1mm</span>;
}

<span style="color:#070;font-weight:bold">TwitterSmallLink</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span>;
    <span style="color:#606">padding</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#1DA1F2</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These values were arrived at via trial-and-error, per usual.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>cn1-derive</code> directive means that this style inherits all of the styles from the given style. E.g. <code>TwitterSmallLabel</code> <em>extends</em> the <code>Label</code> style, which is defined in the native theme for the platform.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_hiding_the_title_area">3.4.5. Hiding the Title Area</h4>
<div class="paragraph">
<p>The design doesn&#8217;t include a typical title bar, but our view currently displays a small white area across the top of the form that from the title that we aren&#8217;t using.  We can hide this title area by adding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;title</span> <span style="color:#b48">hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_background_color">3.4.6. Background Color</h4>
<div class="paragraph">
<p>Our background color is currently just using the default form background color which is grayish.  We need to change it to <em>white</em>.  We can do that by adding <code>background-color:white</code> to the <code>WelcomePage</code> style in the stylesheet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">WelcomePage</span> {
    <span style="color:#606">padding</span>: <span style="color:#60E">10</span><span style="color:#088">vw</span>;
    <span style="color:#606">background-color</span>: <span style="color:#088">white</span>;
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-welcome-form-almost-complete.png" alt="tweetapp welcome form almost complete">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_title_bar_icon">3.4.7. The Title Bar Icon</h4>
<div class="paragraph">
<p>While this view doesn&#8217;t have a conventional title bar, it does display the <em>Twitter</em> icon in the <em>title</em> position at the top of the form.  Rather than copy the <em>real</em> twitter icon I had our designer make up a custom icon for our tweet app:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-icon-screenshot.png" alt="tweet app icon screenshot">
</div>
</div>
<div class="paragraph">
<p>At my request, he wrapped this icon in a TTF file so that it can be used as an icon font within my application.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
My designer used <a href="https://icomoon.io/">IcoMoon</a> to convert his vector image into a truetype font.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>TODO: Add a link to download the .ttf font</p>
</div>
<div class="paragraph">
<p>To use this font, I created a <em>fonts</em> directory inside the <em>css</em> directory, and copied the font (named <em>icomoon.ttf</em>) there, so that the font is located at <em>src/main/css/fonts/icomoon.ttf</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-css-fonts-folder.png" alt="tweetapp css fonts folder">
</div>
</div>
<div class="paragraph">
<p>To use this font in the app, I need to add a <code>@font-face</code> directive for the font inside the stylesheet as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#088;font-weight:bold">@font-face</span> {
  <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">icomoon</span><span style="color:#710">'</span></span>;
  <span style="color:#606">src</span>: <span style="color:#06B;font-weight:bold"><span style="color:#059">url(</span><span style="color:#037">'fonts/icomoon.ttf'</span><span style="color:#059">)</span></span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>I also need to create a style that uses this font:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterIcon</span> {
    <span style="color:#606">font-family</span>: <span style="color:#088">icomoon</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">1.4</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#1DA1F2</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, I can finally add a label to my view that uses this icon font, as a means to display the icon.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;center</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">north</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/center&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In this version it was necessary to cast the <code>0xe902</code> to <code>char</code> to avoid a compiler error.  In future versions, this cast will no longer be required.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I use the <code>iconUIID</code> attribute to set the UIID of the label&#8217;s icon so that it uses the our font icon.  The <code>fontIcon</code> attribute specifies the character code of the glyph in the font to display. In this case it is the unicode character 0xe902, which I was able to extract from the files provided by IcoMoon.</p>
</div>
</div>
<div class="sect3">
<h4 id="_final_result">3.4.8. Final Result</h4>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-welcome-page-final-result.png" alt="tweetapp welcome page final result">
</div>
<div class="title">Figure 10. The final result of our WelcomePage</div>
</div>
<div class="listingblock">
<div class="title">WelcomePage.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;borderAbsolute</span>
        <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">WelcomePage</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">safeArea</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">WelcomePage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;title</span> <span style="color:#b48">hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;center</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">north</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/center&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;spanLabel</span> <span style="color:#b48">textUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterHeading1</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>See what's happening in the world right now.<span style="color:#070;font-weight:bold">&lt;/spanLabel&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterButton</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Create account<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;flow</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterSmallLabel</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Have an account already?<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterSmallLink</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Log in<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;/flow&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/borderAbsolute&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">theme.css</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#33D;font-weight:bold">#Constants</span> {
    <span style="color:#606">includeNativeBool</span>: <span style="color:#088">true</span>;
}

<span style="color:#088;font-weight:bold">@font-face</span> {
  <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">icomoon</span><span style="color:#710">'</span></span>;
  <span style="color:#606">src</span>: <span style="color:#06B;font-weight:bold"><span style="color:#059">url(</span><span style="color:#037">'fonts/icomoon.ttf'</span><span style="color:#059">)</span></span>;
}

<span style="color:#070;font-weight:bold">TwitterButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">background-color</span>: <span style="color:#0A0">#1DA1F2</span>;
    <span style="color:#606">color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">border</span>: <span style="color:#088">cn1-pill-border</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
}

<span style="color:#070;font-weight:bold">WelcomePage</span> {
    <span style="color:#606">padding</span>:<span style="color:#60E">10</span><span style="color:#088">vw</span>;
    <span style="color:#606">background-color</span>:<span style="color:#088">white</span>;
}

<span style="color:#070;font-weight:bold">TwitterHeading1</span> {
    <span style="color:#606">font-size</span>: <span style="color:#60E">1.2</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#088">black</span>;
    <span style="color:#606">margin-bottom</span>: <span style="color:#60E">1</span><span style="color:#088">rem</span>;
}

<span style="color:#070;font-weight:bold">TwitterSmallLabel</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Label</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span>;
    <span style="color:#606">padding</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#66757f</span>;
    <span style="color:#606">margin-right</span>: <span style="color:#60E">1mm</span>;
}

<span style="color:#070;font-weight:bold">TwitterSmallLink</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span>;
    <span style="color:#606">padding</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#1DA1F2</span>;
}

<span style="color:#070;font-weight:bold">TwitterIcon</span> {
    <span style="color:#606">font-family</span>: <span style="color:#088">icomoon</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">1.4</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#1DA1F2</span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adapting_for_android">3.4.9. Adapting for Android</h4>
<div class="paragraph">
<p>But wait, we&#8217;re not done yet.  So far we&#8217;ve been testing with the <em>iPhone X</em> skin exclusively.  Since we are building our app for multiple platforms, we need to test it on some other skins.  The Codename One simulator comes with skins for many popular phone and tablets on the market.  By default, you&#8217;ll only see the <em>iPhoneX</em> and desktop skins in the <em>Skins</em> menu.  You can add additional skins via the <em>Skins</em> &gt; <em>More&#8230;&#8203;</em> menu item.</p>
</div>
<div class="paragraph">
<p>My favourite Android skin is the Samsung Galaxy S8.  If your <em>Skins</em> menu doesn&#8217;t include this skin yet, then you&#8217;ll need to add it, as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select <em>Skins</em> &gt; <em>More&#8230;&#8203;</em> from the menu bar.</p>
<div class="imageblock">
<div class="content">
<img src="images/skins-add-more-menuitem.png" alt="skins add more menuitem">
</div>
</div>
<div class="paragraph">
<p>It will take a few seconds to load the list of skins.</p>
</div>
</li>
<li>
<p>When the <em>Skins</em> dialog appears, enter "GalaxyS" into the search field at the top.  You should see a few matching results appear in the list, as shown below:</p>
<div class="imageblock">
<div class="content">
<img src="images/skins-galaxy-search.png" alt="skins galaxy search">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<em>SamsungGalaxyS8</em> is not included in the screenshot above because I have already installed it, but it should appear in your list.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Check the box beside <em>SamsungGalaxyS8</em>, and press the <em>Download</em> button.</p>
<div class="paragraph">
<p>It will take a few moments, but when it is done, you should see an option for <em>SamsungGalaxyS8</em> in your skins menu.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To test out the app in Android, select the <em>SamsungGalaxyS8</em> skin from the <em>Skins</em> menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/select-galaxys8-skin.png" alt="select galaxys8 skin">
</div>
</div>
<div class="paragraph">
<p>It should resemble the screenshot below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-android-skin-1.png" alt="tweetapp android skin 1">
</div>
</div>
<div class="paragraph">
<p>This looks a little different than it did on the iPhoneX skin. All of the text is a little bit too small.</p>
</div>
<div class="paragraph">
<p>This is because different platforms have different default font sizes, and pixel density also varies across devices.  The best way I have found to <em>normalize</em> these factors and obtain consistent results across platform is to define the <code>defaultFontSize</code> theme constant to an appropriate value, and use <code>rem</code> units for font sizes whenever possible.</p>
</div>
<div class="paragraph">
<p>In the <code>#Constants</code> section of the <em>theme.css</em> file, add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#33D;font-weight:bold">#Constants</span> {
  ...
  <span style="color:#606">defaultFontSizeInt</span>: <span style="color:#60E">18</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are also going to change some of the font sizes so that they look better on the <em>S8</em> skin.</p>
</div>
<div class="paragraph">
<p>Change the <code>font-size</code> properties in a few styles as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterButton</span> {
  ...
  <span style="color:#606">font-size</span>: <span style="color:#60E">1</span><span style="color:#088">rem</span>;
}

<span style="color:#070;font-weight:bold">TwitterHeading1</span> {
  ...
  <span style="color:#606">font-size</span>: <span style="color:#60E">1.5</span><span style="color:#088">rem</span>;
}

<span style="color:#070;font-weight:bold">TwitterSmallLabel</span> {
  ...
  <span style="color:#606">font-size</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
}

<span style="color:#070;font-weight:bold">TwitterSmallLink</span> {
  ...
  <span style="color:#606">font-size</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After making these changes, the simulator should look something like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-s8-skin-2.png" alt="tweet app s8 skin 2">
</div>
</div>
<div class="paragraph">
<p>And if we now toggle back to the iPhone X, it will look like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-iphonex-skin-final.png" alt="tweetapp iphonex skin final">
</div>
</div>
<div class="paragraph">
<p>These now look a little better.</p>
</div>
<div class="paragraph">
<p>We may continue to tweak the styles as we go on, but for now, I&#8217;d say we can move onto the registration page.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_signup_page">3.5. The Signup Page</h3>
<div class="paragraph">
<p>When you click on <em>Create account</em> in the <em>Twitter</em> app, it brings you to the <em>Signup Page</em> which looks like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/twitter-signup-page.png" alt="twitter signup page">
</div>
</div>
<div class="paragraph">
<p>Create a new file named "SignupPage.xml" in the same directory as the <em>WelcomePage.xml</em> file.</p>
</div>
<div class="paragraph">
<p>Then add the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">safeArea</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label&gt;</span>Create your account<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number or email address</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Date of birth</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;right</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button&gt;</span>Next<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/right&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
I used <code>&lt;textField&gt;</code> tags for all three fields of this form, even though (as we&#8217;ll discover later) the <em>birthdate</em> field should be a date picker, and the <em>phone number or email address</em> field has more involved than a single <em>TextField</em> component can handle.  Later on we will be revisiting these tag choices, but for now I just want to be able to express the semantic structure of the form using tags.  It will be easy to change them to different components later on if required.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This is just a basic set of components to replicate the contents of the form.  It doesn&#8217;t include any special styling yet.  There are a couple of things worth noting here:</p>
</div>
<div class="paragraph">
<p>In the <em>WelcomePage</em> we hid the title bar using <code>&lt;title hidden="true"/&gt;</code>.  Since this form has a <em>back</em> button, however, I&#8217;d like to use the default title bar so that we can get the <em>back</em> functionality for free.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;title&gt;</code> is a special tag that test the title of the form.  If you provide string contents, then those will be used as the title.  If you provide a child component, as we&#8217;ve done here, it will use that component in the title position.  In this case we want our icon to be placed in the title position.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;right&gt;</code> tag is an alias for a container with <code>FlowLayout</code> and aligned to the right.</p>
</div>
<div class="sect3">
<h4 id="_linking_from_the_welcome_page">3.5.1. Linking from the Welcome Page</h4>
<div class="paragraph">
<p>Before we can try out our new <em>Signup</em> page, we need to add a link to it from the <em>Welcome</em> page.  We&#8217;ll do this by adding a <code>rad-href</code> attribute to the <em>Create account</em> button on the <em>Welcome</em> page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterButton</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#SignupPage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Create account<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, when you click on the <em>Create account</em> button, it will navigate to our new <em>Signup</em> page, which is shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-signup-page-1.png" alt="tweetapp signup page 1">
</div>
</div>
<div class="paragraph">
<p>This is a starting point.</p>
</div>
</div>
<div class="sect3">
<h4 id="_hot_reload_reload_current_form">3.5.2. Hot Reload: Reload Current Form</h4>
<div class="paragraph">
<p>Before we begin the process of styling the <em>Signup</em> form, let&#8217;s change the <em>Hot Reload</em> settings of the simulator to <em>Reload Current Form</em>.  This will cause the app to automatically reload the current form when we make changes triggering the hot reload.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hot-reload-reload-current-form.png" alt="hot reload reload current form">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When the <em>Reload Current Form</em> option is enabled we lose the navigation context on reload, so things like the <em>Back</em> button won&#8217;t appear.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This mode is helpful while we are actively developing a view.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_styles">3.5.3. Adding Styles</h4>
<div class="paragraph">
<p>I won&#8217;t go through the <em>styling</em> process in as much detail as I did for the <em>Welcome</em> page.  I&#8217;ll just show you the styles I arrived at by trial and error, and comment on some of the new or non-obvious things.  Add the following styles to your stylesheet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#777">/** Signup Page Styles */</span>

<span style="color:#070;font-weight:bold">SignupPage</span> {
    <span style="color:#606">background-color</span>:<span style="color:#088">white</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
}

<span style="color:#070;font-weight:bold">SignupPageContent</span> {
    <span style="color:#606">padding</span>: <span style="color:#60E">8</span><span style="color:#088">vw</span>;
}

<span style="color:#070;font-weight:bold">SignupPageTitle</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Label</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">1.2</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">native:MainBold</span><span style="color:#710">&quot;</span></span>;
    <span style="color:#606">text-align</span>:<span style="color:#088">center</span>;
    <span style="color:#606">margin-bottom</span>: <span style="color:#60E">1.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#088">black</span>;
}

<span style="color:#070;font-weight:bold">TwitterNextButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">background-color</span>: <span style="color:#0A0">#1DA1F2</span>;
    <span style="color:#606">color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">border</span>: <span style="color:#088">cn1-pill-border</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span> <span style="color:#60E">0.75</span><span style="color:#088">rem</span>;

    <span style="color:#606">font-size</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;

}

<span style="color:#070;font-weight:bold">TwitterTextField</span>, <span style="color:#070;font-weight:bold">TwitterTextFieldHint</span> {
    <span style="color:#606">padding-top</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">padding-bottom</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.8</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">native:MainLight</span><span style="color:#710">&quot;</span></span>;
}

<span style="color:#070;font-weight:bold">TwitterTextField</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">TextField</span>;
    <span style="color:#606">border</span>: <span style="color:#088">none</span>;
    <span style="color:#606">border-bottom</span>: <span style="color:#60E">0.8pt</span> <span style="color:#088">solid</span> <span style="color:#0A0">#ccc</span>;

    <span style="color:#606">margin-top</span>: <span style="color:#60E">1</span><span style="color:#088">rem</span>;
    <span style="color:#606">margin-bottom</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span>;


}

<span style="color:#070;font-weight:bold">TwitterTextFieldHint</span> {
    <span style="color:#606">color</span>: <span style="color:#0A0">#66757f</span>;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And set the UIIDs for the corresponding elements in the <em>SignupPage</em> view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPage</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">safeArea</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageContent</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageTitle</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Create your account<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number or email address</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;textField</span> <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Date of birth</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;right</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterNextButton</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Next<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/right&gt;</span>


<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The things to notice on this snippet are the <code>uiid</code> attributes that were added to some of the XML tags.  Notice also that I added <code>hintLabel.uiid</code> attributes to the <code>&lt;textField&gt;</code> tags.  These are to set the UIID of the <em>hint</em> text and correspond with the <em>Java</em> expression <code>textField.getHintLabel().setUIID(&#8230;&#8203;)</code>.  This demonstrates the syntax that you can use to set <em>sub</em>-properties via attributes.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
There is no limit to the number of levels of chaining  that you can do with setting sub-properties.  E.g. <code>a.b.c.d.e="foo"</code> would be the same as calling, <code>theComponent.getA().getB().getC().getD().setE(foo)</code> in Java, except that the code that CodeRAD generates is null-safe.  <em>However</em>, not all chaining sequences are included in the XML schemas, so IntelliJ highlight some of your chained attributes in red, claiming that they are invalid.  While this may be annoying (seeing the error message), the view should build just fine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The result on the Samsung Galaxy S8:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-signup-form-s8-2.png" alt="tweetapp signup form s8 2">
</div>
</div>
<div class="paragraph">
<p>And on iPhone X:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-signup-form-iphonex-2.png" alt="tweetapp signup form iphonex 2">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_title_bar">3.5.4. The Title Bar</h4>
<div class="paragraph">
<p>We didn&#8217;t explicitly create the title bar with an XML tag.  Its creation is handled by the <code>FormController</code> when the view is displayed.  Therefore we couldn&#8217;t set a <code>uiid</code> attribute to set its style.  This is why it looks a little off color on the iPhoneX, and it has a shadowed bottom border on the S8.</p>
</div>
<div class="paragraph">
<p>In cases like this, when I need to style a component that I didn&#8217;t create myself, I generally use the <em>Component Inspector</em> in the simulator to find out the UIID of the "offending" component.  Let&#8217;s do that now, by selecting <em>Tools</em> &gt; <em>Component Inspector</em>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-component-inspector-menu.png" alt="tweetapp component inspector menu">
</div>
</div>
<div class="paragraph">
<p>The screenshot below shows the component tree expanded to the <em>TitleBar</em> component.  The component that I select in the component tree is shaded <em>red</em> in the simulator, which helps me to know that I have found the correct component.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-component-inspector-titlearea.png" alt="tweetapp component inspector titlearea">
</div>
</div>
<div class="paragraph">
<p>According to the inspector, the UIID of that component is "TitleArea", so let&#8217;s try to override that style in the stylesheet.</p>
</div>
<div class="paragraph">
<p>Global overrides like this I usually place near the beginning of the stylesheet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TitleArea</span> {
    <span style="color:#606">border</span>:<span style="color:#088">none</span>;
    <span style="color:#606">background-color</span>:<span style="color:#088">white</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the result on the S8:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-signup-page-s8-4.png" alt="tweetapp signup page s8 4">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_signup_page_controller">3.5.5. The Signup Page Controller</h4>
<div class="paragraph">
<p>Our next step is to make make the signup page actually do something other than look pretty.  In the spirit of MVC we will handle logic for this form in a <em>controller</em>.</p>
</div>
<div class="paragraph">
<p>Create a <em>com.example.tweetapp.controllers</em> package inside the <em>src/main/java</em> directory if you haven&#8217;t already, and create a new Java class in this package named "SignupPageViewController" with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.tweetapp.controllers</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.Controller</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.ViewController</span>;

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">SignupPageViewController</span> <span style="color:#088;font-weight:bold">extends</span> ViewController {
    <span style="color:#777">/**
     * Creates a new ViewController with the given parent controller.
     *
     * @param parent
     */</span>
    <span style="color:#088;font-weight:bold">public</span> SignupPageViewController(Controller parent) {
        <span style="color:#950">super</span>(parent);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, back in the <em>SignupPage.xml</em> view, add a <code>view-controller</code> attribute to the root XML tag that referrs to the <em>SignupPageViewController</em> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.controllers.SignupPageViewController</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">...</span> <span style="color:#070;font-weight:bold">&gt;</span>
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_next_action">3.5.6. The "Next" Action</h4>
<div class="paragraph">
<p>Now that we have our view controller in place, let&#8217;s convert the <em>Next</em> button into a <em>Next</em> action - the distinction being that an action is <em>bound</em> to the controller.</p>
</div>
<div class="paragraph">
<p>First we need to add an action category for the <em>Next</em> action.  We do this via the <code>&lt;define-category&gt;</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NEXT</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If the <code>&lt;define-category&gt;</code> tag is new to you, you should check out <a href="#adding-actions">Adding Actions</a> in the <em>Getting Started</em> section for a brief introduction to actions and categories.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And we&#8217;ll bind our <em>Next</em> button to this <em>NEXT</em> category using the <code>&lt;bind-action&gt;</code> tag, which we&#8217;ll add as a child of the <code>&lt;button&gt;</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterNextButton</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Next</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NEXT</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice we moved the "Next" text from the tag content into the <code>text</code> attribute.  This is just cleaner to look at now that we have some child tags.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When <code>&lt;bind-action&gt;</code> is added to a <code>&lt;button&gt;</code>, properties defined in the action will override the corresponding button properties.  E.g. If the action included a <code>label</code> property, then that would override the <code>text</code> attribute of the <code>button</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now to define the <em>Next</em> action in the controller.</p>
</div>
<div class="paragraph">
<p>Implement the <code>initControllerActions()</code> method in the view controller as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
<span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
    <span style="color:#950">super</span>.initControllerActions();

    ActionNode.builder()
            .addToController(<span style="color:#950">this</span>, SignupPage.NEXT, evt-&gt;{
                evt.consume();
                <span style="color:#0a8;font-weight:bold">Dialog</span>.show(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Click recieved</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">You clicked Next</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">OK</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>);
            });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ActionNode.builder()</code> method creates an <code>ActionNode.Builder</code> object, which has many utility methods for constructing actions and registering them with controllers.</p>
</div>
<div class="paragraph">
<p>The <code>addToController()</code> method takes three parameters:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The controller to add the action to.  In this case we pass <code>this</code> since we want to add it to this view controller.</p>
</li>
<li>
<p>The Action Category.  In this case we are passing <code>SignupPage.NEXT</code> which was generated by our <code>&lt;define-category name="NEXT"/&gt;</code> tag.</p>
</li>
<li>
<p>An <code>ActionListener</code> that is called when the action is triggered.  In this case we just display a dialog that says "You Clicked Me".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you reload the app in simulator and press the "Next" button, it should display a dialog as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-next-you-clicked-me-android.png" alt="tweetapp next you clicked me android">
</div>
<div class="title">Figure 11. Dialog shown when clicking the <em>Next</em> button on Android.  Notice that this dialog uses the native Android styles.  On iOS the dialog would look slightly different - matching the iOS native theme.</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_view_model">3.5.7. The View Model</h4>
<div class="paragraph">
<p>Now, when the user clicks <em>Next</em> it triggers the corresponding event handler in our controller, but we haven&#8217;t provided a "clean" way, yet, to pass the user&#8217;s input to our controller action.  This is where the <em>view model</em> comes into play.</p>
</div>
<div class="paragraph">
<p>The <em>View Model</em> is the entity object that stores all of the model data for a view.  If you do not explicity specify a view model for your view (via the <code>rad-model</code> attribute), then an Entity class is automatically generated by the CodeRAD annotation processor, named <code>{ViewName}Model</code>.  E.g. For our <code>SignupPage</code> view, the generated entity class would be named <code>SignupPageModel</code>, and it would be in the same package as the <code>SignupPage</code> view.</p>
</div>
<div class="paragraph">
<p>You can define properties for the view model using the <code>&lt;define-tag&gt;</code> tag, as described in <a href="#implicit-view-models">Implicit View Models</a>.</p>
</div>
<div class="paragraph">
<p>In our case, we are going to add properties for each field on the form.</p>
</div>
<div class="paragraph">
<p>Add the following to the _SignupPage.xml` view anywhere inside the root tag. I generally place my <code>define-tag</code> tags near the top.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phone</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.telephone</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.email</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">birthDate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.birthDate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java.util.Date</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A few things to note here:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>I have provided a <code>value</code> attribute for each of these tags because these properties seem to match up directly with well-known property types.  CodeRAD includes a set of default schemas in the <em>com.codename1.rad.schemas</em> directory which are adapted from the schemas listed at <a href="https://schema.org/" class="bare">https://schema.org/</a>.  In particular the <a href="https://schema.org/Person">Person schema</a> seems relevant here. By mapping our properties to these existing properties, it will make it easier for other views to use our view model without having to explicitly depend on the view model entity itself. See <a href="#entities-properties-schemas-tags">Entities, Properties, Schemas and Tags</a> for some more information about this.</p>
</li>
<li>
<p>For the <code>birthDate</code> tag we have added a type of <code>java.util.Date</code>.  If no type is required, the property is assumed to be a string.  Since the <em>birthDate</em> is a date, we want the model to treat this property as a date.</p>
</li>
<li>
<p>I have split up the "Phone or Email Address" field into two properties: <em>phone</em> and <em>email</em>.  This is just cleaner.  Also, as we&#8217;ll see, the <em>Phone or Email</em> field of the Twitter app isn&#8217;t really a <em>single</em> text field at all.  It is more like a button that toggles between two different possible text fields: phone and email.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_binding_ui_elements_to_the_view_model">3.5.8. Binding UI Elements to the View Model</h4>
<div class="paragraph">
<p>Now that we have a view model in place, we can bind our UI elements to the model.  This will involve changing the <code>&lt;textField&gt;</code> tags that we are currently using to their "bindable" counterparts.  We will also take this opportunity to split up the "Phone or Email" field up into two fields.</p>
</div>
<div class="paragraph">
<p>CodeRAD includes a set of bindable wrappers for most of the core Codename One components in the <em>com.codename1.rad.propertyviews</em> package.  To convert a basic Codename One component to its bindable counterpart, you can generally prefix "rad" to the tag name.  E.g. Instead of <code>&lt;textField&gt;</code>, you can use <code>&lt;radTextField&gt;</code>.</p>
</div>
<div class="paragraph">
<p>A slight wrinkle is that the <code>&lt;rad*&gt;</code> components are actually <code>Container</code> classes that <em>wrap</em> the basic component, so if you want to set properties on the basic component such as "hint" or "uiid", you need to set them with the "component." prefix.</p>
</div>
<div class="paragraph">
<p>For example, let&#8217;s convert the <em>name</em> text field into its RAD counter part.  Before we had:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radTextField</span>
  <span style="color:#b48">hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We change this to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radTextField</span>
  <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notes on this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>tag="name"</code> binds this component to the "name" property of the view model that we defined above using <code>&lt;define-tag../&gt;</code>.</p>
</li>
<li>
<p>We prefixed each of the attributes that target the <em>TextField</em> itself with "component."  This is beause the TextField itself is actually wrapped by the <code>radTextField</code> (which is an instance of <code>TextFieldPropertyView</code>), and the rad text field class has a <code>getComponent()</code> method that retrieves the actual text field.  So, for example, setting <code>component.hint="Name"</code> is like calling <code>radTextField.getComponent().setHint("Name")</code>.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_splitting_the_phone_or_email_field">Splitting the <em>Phone or Email</em> Field</h5>
<div class="paragraph">
<p>In our initial design we used a single text field for <em>Phone or Email</em> to match what the Twitter form looked like.  If we dig a little deeper into the behaviour of this field, however, it looks like there is more than meets the eye.</p>
</div>
<div class="paragraph">
<p>If you tap on the <em>Phone or Email</em> field in the actual <em>Twitter</em> app, you&#8217;ll notice that the field hint changes to just "Phone", and it provides you with a button to "Use email instead".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweet-app-twitter-phone-field.png" alt="tweet app twitter phone field">
</div>
</div>
<div class="paragraph">
<p>If you click on the <em>Use email instead</em> button, it will toggle the field to an "Email" field, and the keyboard layout will change to one that is appropriate for entering email addresses.</p>
</div>
<div class="paragraph">
<p>There a few different ways that we could replicate this behaviour.  In the approach that I chose, I split the field into a button and two text fields.</p>
</div>
<div class="paragraph">
<p>The button with label "Phone number or email address" is styled like a text field, and is displayed initially.  The two text fields (for phone and email respectively) are hidden initially.  When the user presses the button, it triggers a change that hides the button and shows the <em>Phone</em> field, and the <em>Use email instead</em> button.  If the user presses the <em>Use email instead</em> button, it hides the <em>Phone</em> field and displays the <em>Email</em> field.</p>
</div>
<div class="paragraph">
<p>The following is what I ended up with for these three components:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Define some additional properties on the view model to help
    track state. --&gt;</span>

<span style="color:#777">&lt;!-- useEmail tracks if the user has opted to use their email address
    instead of phone. --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">useEmail</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#777">&lt;!-- editingPhoneOrEmail is to be set when the user presses the
    &quot;Phone or Email&quot; button initially. --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">editingPhoneOrEmail</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#777">&lt;!-- phoneFieldFocused tracks whether the phone field currently has focus --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneFieldFocused</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#777">&lt;!-- emailFieldFocused tracks whether the email field currently has focus --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">emailFieldFocused</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PhoneOrEmailButton</span><span style="color:#710">&quot;</span></span>
    <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number or email address</span><span style="color:#710">&quot;</span></span>
    <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">
        it.addActionListener(evt -&gt; {
            evt.consume();
            it.getComponentForm().setFormBottomPaddingEditingMode(<span style="color:#069">true</span>);
            <span style="color:#369;font-weight:bold">$</span>{editingPhoneOrEmail}.setBoolean(<span style="color:#069">true</span>);
            <span style="color:#080;font-weight:bold">if</span> (<span style="color:#369;font-weight:bold">$</span>{useEmail}.bool) {
                emailTextField.getComponent().startEditingAsync();
            } <span style="color:#080;font-weight:bold">else</span> {
                phoneTextField.getComponent().startEditingAsync();
            }
        });</span>
    <span style="color:#070;font-weight:bold">&lt;/script&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

<span style="color:#070;font-weight:bold">&lt;radTextField</span>
        <span style="color:#b48">rad-var</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneTextField</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phone</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">bind-component.focus</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneFieldFocused</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${useEmail}.bool || !${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.PHONENUMBER</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;radTextField</span>
        <span style="color:#b48">rad-var</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">emailTextField</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">!${useEmail}.bool || !${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Email address</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.EMAILADDR</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">bind-component.focus</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">emailFieldFocused</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/radTextField&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s a fair bit here to unpack, so bear with me.  Let&#8217;s start with the new <code>&lt;define-tag&gt;</code> tags.  In order to replicate the funcionality of the twitter form, I need to create some different states for the form to be in.  The easiest way to do that is to add some properties to the model to keep track of this state.  Then we can bind the UI components to these model properties to have them appear and disappear according to the state of the model.  We&#8217;ll see how these properties are used in a a moment, but first let&#8217;s look at the UI components, starting with the button.</p>
</div>
<div class="paragraph">
<p>The <code>uiid="PhoneOrEmailButton"</code> on the <code>&lt;button&gt;</code> tag is a style that makes the button look like a text field.  We define this style in our stylesheet as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">PhoneOrEmailButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">TwitterTextField</span>;
    <span style="color:#606">color</span>: <span style="color:#088">gray</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>cn1-derive</code> directive ensures that it inherits all of the styles from the <code>TwitterTextField</code> style.  And we set the text color to gray.</p>
</div>
<div class="paragraph">
<p>The <code>bind-hidden="${editingPhoneOrEmail}.bool"</code> attribute binds the <em>hidden</em> property of the button to the <em>editingPhoneOrEmail</em> property of the view model.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>${editingPhoneOrEmail}.bool</code> string is a RAD View macro for accessing a model property.  This is roughly equivalent to the Java expression <code>getEntity().getBoolean(entityPhoneOrEmail)</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since the <em>editingPhoneOrEmail</em> property starts out as false, which means that the <em>hidden</em> property of the button will initially be <code>false</code> (i.e. it will be initially visible).</p>
</div>
<div class="paragraph">
<p>We <em>set</em> the <em>editingPhoneOrEmail</em> property in the action listener for the button which we defined inside a <code>&lt;script&gt;</code> tag.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Later on we may clean things up by moving this logic into the controller, but for now, and for simplicity, we place this code inside the view directly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s take a closer look at this script tag, as there are few things worth comment here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">    <span style="color:#777">// setFormBottonPaddingEditingMode affects mobile device</span>
    <span style="color:#777">// keyboard behaviour.</span>

    it.addActionListener(evt -&gt; {
        evt.consume();
        it.getComponentForm().setFormBottomPaddingEditingMode(<span style="color:#069">true</span>);
        <span style="color:#369;font-weight:bold">$</span>{editingPhoneOrEmail}.setBoolean(<span style="color:#069">true</span>);
        <span style="color:#080;font-weight:bold">if</span> (<span style="color:#369;font-weight:bold">$</span>{useEmail}.bool) {
            emailTextField.getComponent().startEditingAsync();
        } <span style="color:#080;font-weight:bold">else</span> {
            phoneTextField.getComponent().startEditingAsync();
        }
    });</span>
<span style="color:#070;font-weight:bold">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This Java code is executed inside the context of the view, and it provides an execution context with a few default variables available.  The <code>it</code> variable is a reference to the component that "contains" the script tag.  In this case it is the <code>&lt;button&gt;</code> tag (which is a <em>Button</em> object).</p>
</div>
<div class="paragraph">
<p><code>it.addActionListener(evt&#8594;{&#8230;&#8203;})</code>  adds a listener to be called when the button is clicked.</p>
</div>
<div class="paragraph">
<p><code>it.getComponentForm().setFormBottomPaddingEditingMode(true);</code> affects the behaviour on devices with a virtual keyboard (e.g. Android and iOS).  The default behaviour is for the keyboard to cover up part of the form, but in this form, we want the "Use email instead" button to still be visible when the keyboard is showing.  When <code>setFormBottomPaddingEditingMode(true)</code> is called on the form, it will cause the form to shrink when the keyboard appears so that the bottom buttons will still be visible.</p>
</div>
<div class="paragraph">
<p>We call this inside the <code>&lt;script&gt;</code> tag because we don&#8217;t have direct access to the <code>Form</code> object from our View.</p>
</div>
<div class="paragraph">
<p><code>${editingPhoneOrEmail}.setBoolean(true)</code> sets the <em>editingPhoneOrEmail</em> property of the view model, which will trigger some state updates in the view. This will result in the the button being hidden because of its <code>bind-hidden</code> attribute.  This also results in the <em>phone</em> field being displayed because of its <code>bind-hidden</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radTextField</span>
        <span style="color:#b48">...</span>
        <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${useEmail}.bool || !${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">...</span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The final part of the <em>actionListener</em> is the call to <code>emailTextField.getComponent().startEditingAsync()</code> on either the <em>phone</em> or <em>email</em> field, depending on whether the view model&#8217;s <em>useEmail</em> property is <code>true</code>.  This will focus the field and open the virtual keyboard.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
You might be wondering where the <em>emailTextField</em> variable comes from, and what it refers to.  Notice that the <em>email</em> field includes an attribute <code>rad-var="emailTextField"</code>.  This creates a variable reference to this <code>radTextField</code> tag&#8217;s component object, which is a <code>TextFieldPropertyView</code> object.  You can add a <code>rad-var</code> attribute to any tag to make it accessible inside <code>&lt;script&gt;</code> tags and other java expressions inside the view.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Moving onto the <em>phone</em> field:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radTextField</span>
        <span style="color:#b48">rad-var</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneTextField</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phone</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">bind-component.focus</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneFieldFocused</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${useEmail}.bool || !${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.PHONENUMBER</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The first thing to notice here is that we are using the <code>radTextField</code> tag instead of <code>textField</code>.  This allows the field&#8217;s text to be bound to the view model&#8217;s <em>phone</em> property.  This binding is expressed by the <code>tag="phone"</code> attribute.</p>
</div>
<div class="paragraph">
<p>Since <code>radTextField</code> is actually a <em>Container</em> that wraps a <em>TextField</em>, and the <em>TextField</em> component is available via the <em>getComponent()</em> method, we prefix attributes that should be applied on the <em>TextField</em> component with <code>component</code>.  E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>....
component.hint="Phone number"
component.uiid="TwitterTextField"
component.hintLabel.uiid="TwitterTextFieldHint"
component.constraint="TextArea.PHONENUMBER"
....</pre>
</div>
</div>
<div class="paragraph">
<p><code>bind-component.focus="phoneFieldFocused"</code> binds the "focus" state of the text field with the <em>phoneFiledFocused</em> view model property.  We do this so that the <em>Use email instead</em> button can bind its <em>hidden</em> property to this variable and only be shown when the phone field is focused.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
We used the literal <em>phoneFieldFocused</em> tag name as the attribute value here instead of using the view macro expression <code>${phoneFieldFocused}</code> like we used in other <em>bind</em> attributes.  This is because providing the <em>literal</em> tag name to a bind expression allows the binding to be <em>two-way</em>.  When using the <code>${&#8230;&#8203;}</code> macro syntax, the value is treated like Java expression which can be evaluated, but cannot be "modified" - i.e. would only result in a one-way binding.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <em>email</em> field properties are very similar to the <em>phone</em> field, so I won&#8217;t discuss them here.</p>
</div>
</div>
<div class="sect4">
<h5 id="_toggling_beween_phone_and_email">Toggling Beween Phone and Email</h5>
<div class="paragraph">
<p>Finally, we need to add the buttons to toggle bewteen the <em>email</em> and the <em>phone</em> fields.</p>
</div>
<div class="paragraph">
<p>The following is a snippet from the view that defines these buttons, which I added into the <em>south</em> part of the view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;x</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">west</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Use Email Address</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">!${phoneFieldFocused}.bool</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextFieldToggleButton</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">            it.addActionListener(evt-&gt;{
               <span style="color:#369;font-weight:bold">$</span>{useEmail}.setBoolean(<span style="color:#069">true</span>);
                emailTextField.getComponent().startEditingAsync();
            });</span>
        <span style="color:#070;font-weight:bold">&lt;/script&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>


    <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Use Phone</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">!${emailFieldFocused}.bool</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextFieldToggleButton</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">            it.addActionListener(evt-&gt;{
                <span style="color:#369;font-weight:bold">$</span>{useEmail}.setBoolean(<span style="color:#069">false</span>);
                phoneTextField.getComponent().startEditingAsync();
            });</span>
        <span style="color:#070;font-weight:bold">&lt;/script&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/x&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These buttons both include a <code>bind-hidden</code> attribute which bind the view model&#8217;s corresponding <em>xxxFieldFocused</em> properties.  The result is that both of these buttons are hidden by default, but will be shown when their corresponding text field is focused.  This matches the behaviour of the actual Twitter app.</p>
</div>
<div class="paragraph">
<p>Both of these buttons also include <code>&lt;script&gt;</code> tags to add action listeners which toggle the <em>useEmail</em> model property on and off, which triggers the <em>hidden</em> bindings of the <em>email</em> and <em>phone</em> <code>&lt;radTextField&gt;</code> tags to be re-evaluated.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_date_of_birth_field">The <em>Date of birth</em> Field</h5>
<div class="paragraph">
<p>For the <em>Date of Birth</em> field we will use a <code>&lt;radDatePicker&gt;</code> tag, which creates a <code>PickerPropertyView</code> component, which wraps the <code>Picker</code> component, and adds some enhanced <em>binding</em> support.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;radDatePicker</span>
        <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">birthDate</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Date of birth</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterDatePicker</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After the complexities faced with the <em>phone and email</em> field, this one is tame.  The <code>tag="birthDate"</code> attribute binds the picker value to the view model&#8217;s <em>birthDate</em> proeprty.  We use <code>component.uiid="TwitterDatePicker"</code> which we defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterDatePicker</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">TwitterTextField</span>;
    <span style="color:#606">color</span>: <span style="color:#088">gray</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Like the <em>Phone or Email</em> button we created before, we style this picker to look like a text field.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_result">3.5.9. The Result</h4>
<div class="paragraph">
<p>Now that I&#8217;ve gone through all of the individual pieces of the <em>Signup Form</em>, let&#8217;s take a look at the result.</p>
</div>
<div class="paragraph">
<p>First the source so far:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.controllers.SignupPageViewController</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPage</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">safeArea</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NEXT</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">USE_PHONE</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">USE_EMAIL</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ENTER_PHONE_OR_EMAIL</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.name</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phone</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.telephone</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.email</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">birthDate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Person.birthDate</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">java.util.Date</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">useEmail</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">editingPhoneOrEmail</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneFieldFocused</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">emailFieldFocused</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageContent</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageTitle</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Create your account<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;radTextField</span>
                <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>


        <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PhoneOrEmailButton</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number or email address</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>

        <span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">


            it.addActionListener(evt -&gt; {
                evt.consume();
                it.getComponentForm().setFormBottomPaddingEditingMode(<span style="color:#069">true</span>);
                <span style="color:#369;font-weight:bold">$</span>{editingPhoneOrEmail}.setBoolean(<span style="color:#069">true</span>);
                <span style="color:#080;font-weight:bold">if</span> (<span style="color:#369;font-weight:bold">$</span>{useEmail}.bool) {
                    emailTextField.getComponent().startEditingAsync();
                } <span style="color:#080;font-weight:bold">else</span> {
                    phoneTextField.getComponent().startEditingAsync();
                }
            });</span>
            <span style="color:#070;font-weight:bold">&lt;/script&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>

        <span style="color:#070;font-weight:bold">&lt;radTextField</span>
                <span style="color:#b48">rad-var</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phone</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">bind-component.focus</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneFieldFocused</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${useEmail}.bool || !${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone number</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.PHONENUMBER</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>

        <span style="color:#070;font-weight:bold">&lt;radTextField</span>
                <span style="color:#b48">rad-var</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">emailTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">!${useEmail}.bool || !${editingPhoneOrEmail}.bool</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">email</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Email address</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.EMAILADDR</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">bind-component.focus</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">emailFieldFocused</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">&gt;</span>

        <span style="color:#070;font-weight:bold">&lt;/radTextField&gt;</span>


        <span style="color:#070;font-weight:bold">&lt;radDatePicker</span>
                <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">birthDate</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Date of birth</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterDatePicker</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageSouth</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;x</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">west</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Use Email Address</span><span style="color:#710">&quot;</span></span>
                    <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">!${phoneFieldFocused}.bool</span><span style="color:#710">&quot;</span></span>
                    <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextFieldToggleButton</span><span style="color:#710">&quot;</span></span>
            <span style="color:#070;font-weight:bold">&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">                    it.addActionListener(evt-&gt;{
                       <span style="color:#369;font-weight:bold">$</span>{useEmail}.setBoolean(<span style="color:#069">true</span>);
                        emailTextField.startEditingAsync();
                    });</span>
                <span style="color:#070;font-weight:bold">&lt;/script&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>


            <span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Use Phone</span><span style="color:#710">&quot;</span></span>
                    <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">!${emailFieldFocused}.bool</span><span style="color:#710">&quot;</span></span>
                    <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextFieldToggleButton</span><span style="color:#710">&quot;</span></span>
            <span style="color:#070;font-weight:bold">&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;script&gt;</span>
<span style="background-color:hsla(0,0%,0%,0.07);color:black">                    it.addActionListener(evt-&gt;{
                        <span style="color:#369;font-weight:bold">$</span>{useEmail}.setBoolean(<span style="color:#069">false</span>);
                        phoneTextField.startEditingAsync();
                    });</span>
                <span style="color:#070;font-weight:bold">&lt;/script&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/x&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;x</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">east</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;button</span>  <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterNextButton</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Next</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NEXT</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/x&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;/border&gt;</span>


<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And the CSS we added for the Signup page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#777">/** Signup Page Styles */</span>

<span style="color:#070;font-weight:bold">SignupPage</span> {
    <span style="color:#606">background-color</span>:<span style="color:#088">white</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
}

<span style="color:#070;font-weight:bold">SignupPageContent</span> {
    <span style="color:#606">padding</span>: <span style="color:#60E">8</span><span style="color:#088">vw</span>;
}

<span style="color:#070;font-weight:bold">SignupPageSouth</span> {
    <span style="color:#606">padding</span>:<span style="color:#60E">2mm</span>;
    <span style="color:#606">padding-left</span>: <span style="color:#60E">8</span><span style="color:#088">vw</span>;
    <span style="color:#606">padding-right</span>: <span style="color:#60E">8</span><span style="color:#088">vw</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
    <span style="color:#606">border-top</span>: <span style="color:#60E">1px</span> <span style="color:#088">solid</span> <span style="color:#088">gray</span>;
}

<span style="color:#070;font-weight:bold">SignupPageTitle</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Label</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">1.2</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">native:MainBold</span><span style="color:#710">&quot;</span></span>;
    <span style="color:#606">text-align</span>:<span style="color:#088">center</span>;
    <span style="color:#606">margin-bottom</span>: <span style="color:#60E">1.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#088">black</span>;
}

<span style="color:#070;font-weight:bold">TwitterNextButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">background-color</span>: <span style="color:#0A0">#1DA1F2</span>;
    <span style="color:#606">color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">border</span>: <span style="color:#088">cn1-pill-border</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span> <span style="color:#60E">0.75</span><span style="color:#088">rem</span>;

    <span style="color:#606">font-size</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">margin-right</span>: <span style="color:#60E">0</span>;

}

<span style="color:#070;font-weight:bold">TwitterTextField</span>, <span style="color:#070;font-weight:bold">TwitterTextFieldHint</span> {
    <span style="color:#606">padding-top</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">padding-bottom</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.8</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-family</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">native:MainLight</span><span style="color:#710">&quot;</span></span>;
    <span style="color:#606">color</span>: <span style="color:#088">gray</span>;
}

<span style="color:#070;font-weight:bold">TwitterTextField</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">TextField</span>;
    <span style="color:#606">border</span>: <span style="color:#088">none</span>;
    <span style="color:#606">border-bottom</span>: <span style="color:#60E">0.8pt</span> <span style="color:#088">solid</span> <span style="color:#0A0">#ccc</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#333333</span>;
    <span style="color:#606">margin-top</span>: <span style="color:#60E">1</span><span style="color:#088">rem</span>;
    <span style="color:#606">margin-bottom</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span>;
}

<span style="color:#070;font-weight:bold">TwitterDatePicker</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">TwitterTextField</span>;
    <span style="color:#606">color</span>: <span style="color:#088">gray</span>;
}

<span style="color:#070;font-weight:bold">PhoneOrEmailButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">TwitterTextField</span>;
    <span style="color:#606">color</span>: <span style="color:#088">gray</span>;
}

<span style="color:#070;font-weight:bold">TwitterTextFieldHint</span> {
    <span style="color:#606">color</span>: <span style="color:#0A0">#66757f</span>;

}

<span style="color:#070;font-weight:bold">TextFieldToggleButton</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Button</span>;
    <span style="color:#606">color</span>: <span style="color:#0A0">#1DA1F2</span>;
    <span style="color:#606">border</span>: <span style="color:#088">none</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">0.5</span><span style="color:#088">rem</span> <span style="color:#60E">0.75</span><span style="color:#088">rem</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">margin</span>:<span style="color:#60E">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And some screenshots from the simulator:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-signup-form-complete-simulator.png" alt="tweetapp signup form complete simulator">
</div>
</div>
<div class="paragraph">
<p>I have also prepared a short screencast on one of my Android devices to show how it looks on an actual device:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="440" height="800" src="https://www.youtube.com/embed/RFteZABnI-g?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_handling_form_submission">3.5.10. Handling Form Submission</h4>
<div class="paragraph">
<p>Now that our form looks correct, we can return to the <em>Next</em> action that we started a few sections back.  Open the <em>SignupFormViewController</em> class that we created, and create a new method to handle the form submission:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">void</span> handleSubmit(ActionNode.ActionNodeEvent evt) {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And change the <code>initControllerActions()</code> method to have the <em>Next</em> action trigger our <code>handleSubmit()</code> method instead of the anonymous callback it currently triggers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
<span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
    <span style="color:#950">super</span>.initControllerActions();
    ActionNode.builder()
            .addToController(<span style="color:#950">this</span>, SignupPage.NEXT, <span style="color:#950">this</span>::handleSubmit);
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_field_validation">Field Validation</h5>
<div class="paragraph">
<p>The first thing we need to do, when handling the registration request, is validate the user&#8217;s field input.  If validation fails, then an error message should be displayed near the relevant field.  A nice way to achieve this is to create view model properties corresponding to each input field of the signup form to store error messages.  Then we can add labels to the view that are bound to these error messages.</p>
</div>
<div class="paragraph">
<p>We define the view model properties in our view as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Properties for error messages --&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">nameErrorMessage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneOrEmailErrorMessage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">birthDateErrorMessage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For the error message labels we will use <code>&lt;radLabel&gt;</code> components so that they can be bound to the view model easily.  They will be placed just below their corresponding input field in the view.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at the <em>nameErrorMessage</em> label first:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#777">&lt;!-- Placed just after the &quot;name&quot; field --&gt;</span>

<span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">nameErrorMessage</span><span style="color:#710">&quot;</span></span>
    <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${nameErrorMessage}.isEmpty()</span><span style="color:#710">&quot;</span></span>
          <span style="color:#b48">rad-transition</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hidden 0.3s</span><span style="color:#710">&quot;</span></span>
          <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">FieldErrorMessage</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>tag</code> attribute binds this to the <em>nameErrorMessage</em>.  The <code>bind-hidden</code> attribute ensures that this label is hidden when the <em>nameErrorMessage</em> property is empty.  The <code>rad-transition</code> attribute causes the label to transition in when it is displayed, rather than just abruptly appear.  Finally we assigned the UIID "FieldErrorMessage" to the label via the <code>component.uiid</code> attribute.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Recall that the <code>&lt;radLabel&gt;</code> tag is a <code>LabelPropertyView</code> instance, which is a container that wraps a <code>Label</code> instance.  The <code>Label</code> instance is accessible via the <code>getComponent()</code> method, hence the <code>component.</code> prefix to the UIID, because we want to style the actual <code>Label</code>, and not the property view container.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I have defined the <em>FieldErrorMessage</em> style in the stylesheet as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">FieldErrorMessage</span> {
    <span style="color:#606">cn1-derive</span>: <span style="color:#088">Label</span>;
    <span style="color:#606">font-size</span>: <span style="color:#60E">0.7</span><span style="color:#088">rem</span>;
    <span style="color:#606">color</span>: <span style="color:#088">white</span>;
    <span style="color:#606">background-color</span>:<span style="color:#088">red</span>;
    <span style="color:#606">padding</span>: <span style="color:#60E">1.5mm</span>;
    <span style="color:#606">margin-top</span>: <span style="color:#60E">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>I have also removed the bottom margin from the <em>TwitterTextField</em> style so that the error message will be rendered just underneath the corresponding field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TwitterTextField</span> {
   ...
  <span style="color:#606">margin-bottom</span>: <span style="color:#60E">0.5mm</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With these in place, let&#8217;s return to the <code>handleSubmit()</code> method, and implement some validation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">void</span> handleSubmit(ActionNode.ActionNodeEvent evt) {
    <span style="color:#777">// Get reference to the view's model via the event.</span>
    SignupPageModel viewModel = SignupPageModelWrapper.wrap(evt.getEntity());

    <span style="color:#777">// Do some validation</span>
    <span style="color:#339;font-weight:bold">boolean</span> failedValidation = <span style="color:#069">false</span>;
    <span style="color:#080;font-weight:bold">if</span> (viewModel.isUseEmail() &amp;&amp; NonNull.empty(viewModel.getEmail())) {
        viewModel.setPhoneOrEmailErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Email address cannot be empty</span><span style="color:#710">&quot;</span></span>);
        failedValidation = <span style="color:#069">true</span>;
    } <span style="color:#080;font-weight:bold">else</span> <span style="color:#080;font-weight:bold">if</span> (!viewModel.isUseEmail() &amp;&amp; NonNull.empty(viewModel.getPhone())) {
        viewModel.setPhoneOrEmailErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone cannot be empty</span><span style="color:#710">&quot;</span></span>);
        failedValidation = <span style="color:#069">true</span>;
    } <span style="color:#080;font-weight:bold">else</span> {
        viewModel.setPhoneOrEmailErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>);
    }

    <span style="color:#080;font-weight:bold">if</span> (NonNull.empty(viewModel.getName())) {
        viewModel.setNameErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name cannot be empty</span><span style="color:#710">&quot;</span></span>);
        failedValidation = <span style="color:#069">true</span>;
    } <span style="color:#080;font-weight:bold">else</span> {
        viewModel.setNameErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>);
    }

    <span style="color:#080;font-weight:bold">if</span> (NonNull.empty(viewModel.getBirthDate())) {
        viewModel.setBirthDateErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Birthdate cannot be empty</span><span style="color:#710">&quot;</span></span>);
        failedValidation = <span style="color:#069">true</span>;
    } <span style="color:#080;font-weight:bold">else</span> {
        viewModel.setBirthDateErrorMessage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>);
    }

    <span style="color:#080;font-weight:bold">if</span> (failedValidation) {
        <span style="color:#080;font-weight:bold">return</span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first thing we do here is obtain a reference to the view model with this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">SignupPageModel viewModel = SignupPageModelWrapper.wrap(evt.getEntity());</code></pre>
</div>
</div>
<div class="paragraph">
<p>This uses both the <code>SignupViewModel</code> entity interface, and the <code>SignupViewModelWrapper</code> class, which implements <code>SignupViewModel</code>.  Both of these are generated by the CodeRAD annotation processor.  Wrapper classes are generated for each RAD entity (i.e. view model) that you define.  This class enables you to wrap <em>any</em> Entity so that it can be be interacted with via the <code>SignupViewModel</code> interface.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Using this wrapper is not strictly necessary, but it handy as it allows you to use, for example <code>entity.getName()</code> instead of <code>entity.getText(name)</code>, which <em>feels</em> more natural in Java.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Our validator is very basic right now - only checking for empty values.  If it finds a "problem", it sets the relevant <code>xxxErrorMessage</code> property on the view model that we just created.  Setting these view model properties will instantly trigger updates in the view.</p>
</div>
<div class="paragraph">
<p>Now, if we click <em>Next</em> on our form without entering any data we see something like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-signup-page-error-messages.png" alt="tweetapp signup page error messages">
</div>
</div>
<div class="videoblock">
<div class="title">A video showing the transitions when showing and hiding the error messages.</div>
<div class="content">
<iframe width="440" height="800" src="https://www.youtube.com/embed/wWWPEgN9D1E?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sending_signup_request_to_the_server">Sending Signup Request to the Server</h5>
<div class="paragraph">
<p>Once the form input is validated, we can build a request to send to the server.   We will create a <em>service</em> class to encapsulate all interaction with the server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For the purpose of this tutorial, we won&#8217;t be connecting to an actual server.  We will just mock these requests.  The API will be designed to be fully asynchronous, however, so that modifying the implementation to make network requests should be straight forward.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a new Java package named <code>com.example.tweetapp.services</code>, and create a new class named <code>TweetAppClient</code> inside this package.  Add the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.tweetapp.services</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.util.NonNull</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.util.AsyncResource</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">java.util.Date</span>;

<span style="color:#777">/**
 * A client for interacting with the server.
 */</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">TweetAppClient</span> {

    <span style="color:#777">/**
     * Flag to indicate that we are currently logged in.
     */</span>
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">boolean</span> loggedIn;

    <span style="color:#777">/**
     * The currently logged in user Id.  In this mock implementation the user Id
     * is just the email address or phone number.
     */</span>
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> loggedInUserId;

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> isLoggedIn(){
        <span style="color:#080;font-weight:bold">return</span> loggedIn;
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> getLoggedInUserId() {
        <span style="color:#080;font-weight:bold">return</span> loggedInUserId;
    }


    <span style="color:#777">/**
     * A response object that is passed to the SignupRequest callback
     * upon completion.
     */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">SignupResponse</span> {
        <span style="color:#777">/**
         * Whether the signup was successful
         */</span>
        <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">boolean</span> success;

        <span style="color:#777">/**
         * Reference to request that this response is for.
         */</span>
        <span style="color:#088;font-weight:bold">private</span> SignupRequest request;

        <span style="color:#777">/**
         * The response code.  200 for success.
         * Make up error codes to fit needs.
         */</span>
        <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> responseCode;

        <span style="color:#777">/**
         * A message related to the response code.  Contains error message
         * in case of errors.
         */</span>
        <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> message;

        <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">boolean</span> isSuccess() {
            <span style="color:#080;font-weight:bold">return</span> success;
        }

        <span style="color:#088;font-weight:bold">public</span> SignupRequest getRequest() {
            <span style="color:#080;font-weight:bold">return</span> request;
        }

        <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">int</span> getResponseCode() {
            <span style="color:#080;font-weight:bold">return</span> responseCode;
        }

        <span style="color:#088;font-weight:bold">public</span> <span style="color:#0a8;font-weight:bold">String</span> getMessage() {
            <span style="color:#080;font-weight:bold">return</span> message;
        }



    }

    <span style="color:#777">/**
     * Encapsulates a signup request to send to the server.  Modify this
     * class to include the information you require in your signup process.
     *
     */</span>
    <span style="color:#088;font-weight:bold">public</span>  <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">SignupRequest</span> <span style="color:#088;font-weight:bold">extends</span> AsyncResource&lt;SignupResponse&gt; {
        <span style="color:#777">/**
         * The email address of the user.
         */</span>
        <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> email,
        <span style="color:#777">/**
         * The phone number of the user.
          */</span>
        phone,

        <span style="color:#777">/**
         * The name of the user.
         */</span>
        name;

        <span style="color:#777">/**
         * The birth date of the user.
         */</span>
        <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">Date</span> birthDate;

        <span style="color:#777">/**
         * Send the signup request.
         * @return
         */</span>
        <span style="color:#088;font-weight:bold">public</span> SignupRequest signup() {
            <span style="color:#080;font-weight:bold">return</span> TweetAppClient.this.signup(<span style="color:#950">this</span>);
        }

        <span style="color:#088;font-weight:bold">public</span> SignupRequest email(<span style="color:#0a8;font-weight:bold">String</span> email) {
            <span style="color:#950">this</span>.email = email;
            <span style="color:#080;font-weight:bold">return</span> <span style="color:#950">this</span>;
        }

        <span style="color:#088;font-weight:bold">public</span> SignupRequest phone(<span style="color:#0a8;font-weight:bold">String</span> phone) {
            <span style="color:#950">this</span>.phone = phone;
            <span style="color:#080;font-weight:bold">return</span> <span style="color:#950">this</span>;
        }

        <span style="color:#088;font-weight:bold">public</span> SignupRequest birthDate(<span style="color:#0a8;font-weight:bold">Date</span> birthDate) {
            <span style="color:#950">this</span>.birthDate = birthDate;
            <span style="color:#080;font-weight:bold">return</span> <span style="color:#950">this</span>;
        }

        <span style="color:#088;font-weight:bold">public</span> SignupRequest name(<span style="color:#0a8;font-weight:bold">String</span> name) {
            <span style="color:#950">this</span>.name = name;
            <span style="color:#080;font-weight:bold">return</span> <span style="color:#950">this</span>;
        }

    }

    <span style="color:#777">/**
     * Creates a new signup request.
     * @return
     */</span>
    <span style="color:#088;font-weight:bold">public</span> SignupRequest createSignupRequest() {
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> SignupRequest();
    }

    <span style="color:#777">/**
     * Sends a signup request to the server.
     * @param request
     * @return
     */</span>
    <span style="color:#088;font-weight:bold">private</span> SignupRequest signup(SignupRequest request) {

        <span style="color:#777">// This is just mocking the signup process.</span>
        <span style="color:#777">// Change this to contact the server and sign up.</span>
        SignupResponse response = <span style="color:#080;font-weight:bold">new</span> SignupResponse();
        response.responseCode = <span style="color:#00D">200</span>;
        response.message = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Success</span><span style="color:#710">&quot;</span></span>;
        response.request = request;
        response.success = <span style="color:#069">true</span>;
        request.complete(response);

        <span style="color:#777">// To log in we set the loggedInUserId and loggedIn</span>
        <span style="color:#777">// boolean flag.</span>
        loggedInUserId = NonNull.nonNull(request.email, request.phone);
        loggedIn = <span style="color:#069">true</span>;
        <span style="color:#080;font-weight:bold">return</span> request;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To simplify things, this class <em>automatically</em> sets the <em>loggedIn</em> flag when a successful response is received from the "server".  In a real app, we would probably have a multi-step registration process that would require the user to respond to a confirmation email or phone text message, but that is beyond the scope of this tutorial.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We will use a single instance of this class in our application, which we will create inside the <code>onStartController()</code> method of our application delegate class (i.e. the <code>com.example.tweetapp.Tweetapp</code> class).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Override</span>
<span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> onStartController() {
    <span style="color:#950">super</span>.onStartController();

    <span style="color:#777">/**
     * Add a TweetAppClient as a lookup so that it will be available throughout
     * the app via {@link #lookup(Class)}
     */</span>
    addLookup(<span style="color:#080;font-weight:bold">new</span> TweetAppClient());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What this does is add the client as a <em>lookup</em> in the application controller.  We can retrieve this object from this controller, or <em>any</em> if its child controllers, via <code>lookup(TweetAppClient.class)</code>.  We can also access it from a RAD view using <code>&lt;var name="someVariableName" lookup="TweetAppClient"/&gt;</code>.  This has the same effect as using the classic <em>Singleton</em> design pattern, or a static global, except that we don&#8217;t have to employ static variables, which are generally considered to be "bad" practice.</p>
</div>
<div class="paragraph">
<p>In this case we are adding the lookup in the application controller so its <em>scope</em> is the entire app.  If we were to add the lookup inside a FormController, or ViewController, then its scope would be limited to just that controller and its children.</p>
</div>
<div class="paragraph">
<p>Now, let&#8217;s use this class from our <code>handleSubmit()</code> method (in the <em>SignupPageViewController</em> class) to submit a signup request to the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">void</span> handleSubmit(ActionNode.ActionNodeEvent evt) {
    <span style="color:#777">// ... Validation code omitted here for clarity</span>

    <span style="color:#777">// Get reference to the webservice client</span>
    TweetAppClient client = lookup(TweetAppClient.class);

    TweetAppClient.SignupRequest request = client.createSignupRequest()
            .name(viewModel.getName())
            .birthDate(viewModel.getBirthDate());

    <span style="color:#080;font-weight:bold">if</span> (viewModel.isUseEmail()) {
        request.email(viewModel.getEmail());
    } <span style="color:#080;font-weight:bold">else</span> {
        request.phone(viewModel.getPhone());
    }

    InfiniteProgress progess = <span style="color:#080;font-weight:bold">new</span> InfiniteProgress();
    <span style="color:#0a8;font-weight:bold">Dialog</span> progressDialog = progess.showInfiniteBlocking();
    request.signup().onResult((res, err) -&gt; {
        progressDialog.dispose();
        <span style="color:#080;font-weight:bold">if</span> (err != <span style="color:#069">null</span>) {
            ToastBar.showErrorMessage(err.getMessage());
            <span style="color:#080;font-weight:bold">return</span>;
        }
        <span style="color:#080;font-weight:bold">new</span> HomePageController(getApplicationController()).show();

    });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we obtain a reference to the <code>TweetAppClient</code> object via <code>lookup(TweetAppClient.class)</code>.</p>
</div>
<div class="paragraph">
<p>We then create a Signup request via <code>client.createSignupRequest()</code>.</p>
</div>
<div class="paragraph">
<p>Then we set some properties on the request using the appropriate values obtained from the view model.</p>
</div>
<div class="paragraph">
<p>The <code>InfiniteProgress</code> class is used to display a <em>progress</em> indicator and block the UI while the signup request is in progress.</p>
</div>
<div class="paragraph">
<p>The <em>actual</em> server request is initiated by the <code>request.signup()</code> call, and the <code>onResult()</code> method allows us to add a callback which will be executed when a response is received.</p>
</div>
<div class="paragraph">
<p>Upon receiving a response, we call <code>progressDialog.dispose()</code> to hide the progress indicator.  Then we check if there was an error, in which case we used <code>ToastBar.showErrorMessage(&#8230;&#8203;)</code> to display an error message in the UI.</p>
</div>
<div class="paragraph">
<p>If there was no error, then we assume the signup was successful and we direct the user to the <em>HomePage</em>.</p>
</div>
<div class="paragraph">
<p>In order for this code to work, we need to create a new view named HomePage.xml.  To start with just include some placeholder contents:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>HomePage.xml</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;?xml version="1.0"?&gt;
&lt;y xsi:noNamespaceSchemaLocation="HomePage.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    &lt;title&gt;Homepage&lt;/title&gt;
&lt;/y&gt;</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <em>HomePageController</em> class is a <em>FormController</em> subclass that is generated by the CodeRAD annotation processor for the <em>HomePage</em> view.  It is just a convenience class that makes it easier to display the <em>HomePage</em> view in a form.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One important thing to notice about our call to <code>HomePageController</code> is that we set the <em>Application Controller</em> as its parent controller rather than the current controller.</p>
</div>
<div class="paragraph">
<p>If we had done:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">new</span> HomePageController(<span style="color:#950">this</span>).show();</code></pre>
</div>
</div>
<div class="paragraph">
<p>then the <em>HomePage</em> would be a <em>child</em> of the current form (the <em>Signup</em> form), and thus would include a "back" button to return.  We don&#8217;t want the user to be able to navigate back to the signup form once they are logged in, so we make the <em>HomePageController</em> a child of the application controller, making it a "root" form controller in the application.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll leave the placeholder content in the "HomePage" for now, as we complete the <em>Login</em> and <em>About</em> pages.  Once we finish all of our "pre-login" views, we&#8217;ll return to the <em>HomePage</em> view to create the "logged in" app experience.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
You can view the current state (as of this point in the tutorial) of all of our source files in <a href="https://gist.github.com/shannah/3df2ea9184fd2f2f8ab80e219c73b5c0">this gist</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_login_page">3.6. The Login Page</h3>
<div class="paragraph">
<p>The <em>Login</em> page is quite similar to the signup page so I&#8217;ll skip details that were covered in the creation of the <em>Signup</em> page.</p>
</div>
<div class="paragraph">
<p>Create a view in the same folder as the SignupPage named "LoginPage.xml", with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.controllers.LoginPageViewController</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPage</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">safeArea</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">componentForm.formBottomPaddingEditingMode</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">LoginPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>


    <span style="color:#070;font-weight:bold">&lt;define-category</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">LOGIN</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneEmailOrUsername</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">password</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#777">&lt;!-- Properties for error messages --&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneEmailOrUsernameErrorMessage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;define-tag</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">passwordErrorMessage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageContent</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">scrollableY</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageTitle</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Login to Tweet App<span style="color:#070;font-weight:bold">&lt;/label&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;radTextField</span>
                <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneEmailOrUsername</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Phone, email or username</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.USERNAME</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>

        <span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">phoneEmailOrUsernameErrorMessage</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${phoneEmailOrUsernameErrorMessage}.isEmpty()</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">rad-transition</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hidden 0.3s</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">FieldErrorMessage</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>

        <span style="color:#070;font-weight:bold">&lt;radTextField</span>
                <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">password</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Password</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextField</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.hintLabel.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterTextFieldHint</span><span style="color:#710">&quot;</span></span>
                <span style="color:#b48">component.constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TextArea.PASSWORD</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>


        <span style="color:#070;font-weight:bold">&lt;radLabel</span> <span style="color:#b48">tag</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">passwordErrorMessage</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">bind-hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${passwordErrorMessage}.isEmpty()</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">rad-transition</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hidden 0.3s</span><span style="color:#710">&quot;</span></span>
                  <span style="color:#b48">component.uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">FieldErrorMessage</span><span style="color:#710">&quot;</span></span>
        <span style="color:#070;font-weight:bold">/&gt;</span>


    <span style="color:#070;font-weight:bold">&lt;/y&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">SignupPageSouth</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;x</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">west</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;button</span>  <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterFooterAction</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#ForgotPassword</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
                Forgot Password?
            <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/x&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;x</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">east</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;button</span>  <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterNextButton</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">text</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Log in</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
                <span style="color:#070;font-weight:bold">&lt;bind-action</span> <span style="color:#b48">category</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">LOGIN</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/button&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/x&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;/border&gt;</span>


<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It this looks similar to the <em>Signup</em> page, that&#8217;s because started by copying and pasting the <em>signup</em> contents into this view, then changed the tags, actions, and fields to suit the login form that we are trying to recreate.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
In order to demonstrate an alternative way to modify the top-level <em>Form</em> object for this view, we used the <code>componentForm.formBottomPaddingEditingMode="true"</code> attribute to set the form bottom padding editing property on the form.  In the SignupForm we did this inside one of the <code>&lt;script&gt;</code> tags.  It is, perhaps, cleaner to do it this way to retain the declarative definition of the UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Notice the <code>view-controller</code> attribute which specifies that this view should use the class <code>com.example.tweetapp.controllers.LoginPageViewController</code> as its view controller.  Create this class now with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.tweetapp.controllers</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.components.InfiniteProgress</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.components.ToastBar</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.Controller</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.ViewController</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.nodes.ActionNode</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.util.NonNull</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.ui.Dialog</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.example.tweetapp.services.TweetAppClient</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.example.tweetapp.views</span>.*;

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">LoginPageViewController</span> <span style="color:#088;font-weight:bold">extends</span> ViewController {
    <span style="color:#777">/**
     * Creates a new ViewController with the given parent controller.
     *
     * @param parent
     */</span>
    <span style="color:#088;font-weight:bold">public</span> LoginPageViewController(Controller parent) {
        <span style="color:#950">super</span>(parent);
    }

    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
        <span style="color:#950">super</span>.initControllerActions();
        ActionNode.builder()
                .addToController(<span style="color:#950">this</span>, LoginPage.LOGIN, <span style="color:#950">this</span>::handleSubmit);
    }

    <span style="color:#777">/**
     * Handles the registration form submission
     * @param evt
     */</span>
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">void</span> handleSubmit(ActionNode.ActionNodeEvent evt) {

        <span style="color:#777">// We will handle the login action here</span>

    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Referring back to the <em>LoginPage.xml</em> contents, notice that I have a <em>Forgot Password</em> button in the lower left:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span>  <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterFooterAction</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#ForgotPassword</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    Forgot Password?
<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For this link to work, I also created the style <em>TwitterFooterAction</em> to match the style of the buttons I created on the Signup page for toggling between the email and phone fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span style="color:#070;font-weight:bold">TextFieldToggleButton</span>, <span style="color:#070;font-weight:bold">TwitterFooterAction</span>  {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the <code>rad-href</code> attribute references a <em>ForgotPassword</em> view, which we&#8217;ll create a placeholder for now.  Create the view "ForgotPassword.xml" in the same directory as our other views with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;y</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">ForgotPassword.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Forgot Password<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/y&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, we need to "link" the <em>Welcome</em> page to our new login page, by adding a <code>rad-href</code> attribute to the <em>Login</em> link.  Open the <em>WelcomePage.xml</em> file and change the <em>login</em> link to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;button</span> <span style="color:#b48">uiid</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterSmallLink</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#LoginPage</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>Log in<span style="color:#070;font-weight:bold">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, if you reload the app in the simulator, and click on the <em>Login</em> link, you should see something like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-login-page-1.png" alt="tweetapp login page 1">
</div>
</div>
<div class="sect4">
<h5 id="_handling_the_login">Handling the Login</h5>
<div class="paragraph">
<p>We validate the login using the same technique as we used for the <em>Signup</em> form.  We need to modify the <em>TweetAppClient</em> to support login, and in order to achieve some reuse with the <em>signup</em> flow, I refactored it a bit, but nothing major.</p>
</div>
<div class="paragraph">
<p>You can review the sources that were added in this section in <a href="https://gist.github.com/shannah/246b99b2ec064beaf6c946a2b604ad0b">this gist</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://gist.github.com/shannah/246b99b2ec064beaf6c946a2b604ad0b#file-loginpage-xml">LoginPage.xml</a></p>
</li>
<li>
<p><a href="https://gist.github.com/shannah/246b99b2ec064beaf6c946a2b604ad0b#file-loginpageviewcontroller-java">LoginPageViewController.java</a></p>
</li>
<li>
<p><a href="https://gist.github.com/shannah/246b99b2ec064beaf6c946a2b604ad0b#file-theme-css">theme.css</a></p>
</li>
<li>
<p><a href="https://gist.github.com/shannah/246b99b2ec064beaf6c946a2b604ad0b#file-tweetappclient-java">TweetAppClient.java</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are two other pages available to users without logging in:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ForgotPassword</p>
</li>
<li>
<p>The About Page</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These pages don&#8217;t require anything new that wasn&#8217;t covered in the <em>Signup</em> and <em>Login</em> pages, so I&#8217;m going to skip them for now, so that we can move onto the real meat of this app: <em>The News Feed</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_news_feed">3.7. The News Feed</h3>
<div class="paragraph">
<p>The <em>News Feed</em> of this app gives us an opportunity to show off some of the powerful "list" features of CodeRAD.  For this tutorial, I&#8217;m going to use the <a href="https://www.nasa.gov/rss/dyn/breaking_news.rss">NASA breaking news RSS feed</a> as our data source, as it includes all of the key elements of a news feed: headlines, descriptions, dates, authors, and images.</p>
</div>
<div class="paragraph">
<p>I&#8217;m going to cheat a tiny bit and use some of the models and views in the <code>tweet-app-ui-kit</code> cn1lib - a module that I developed to provide some <em>Twitter-esque</em> components out of the box.  In addition to providing our app with some pre-built, polished components, it will demonstrate how to use third-party libraries in your apps.</p>
</div>
<div class="sect3">
<h4 id="_adding_the_tweet_app_ui_kit_dependency">3.7.1. Adding the Tweet App UI Kit Dependency</h4>
<div class="paragraph">
<p>The Tweet App UI Kit is a library that contains some models and views that are helpful when building a Twitter-like app.  We&#8217;ll start by adding the Maven dependency for this library.</p>
</div>
<div class="paragraph">
<p>Open the <em>common/pom.xml</em> file and add the following snippet to the <code>&lt;dependencies&gt;</code> section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>com.codenameone<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>tweet-app-ui-kit-lib<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;type&gt;</span>pom<span style="color:#070;font-weight:bold">&lt;/type&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The <code>version</code> listed here is a SNAPSHOT version because, at the time of writing, I hadn&#8217;t published it yet to Maven central.  I plan to remove this and update it with a release version ASAP.  If you&#8217;re reading this comment, then I haven&#8217;t done that yet.  Try to find a release version on Maven central, or clone the <a href="https://github.com/shannah/TweetAppUIKit">github repository</a> and build it from source using <code>mvn install</code> to be able to use the SNAPSHOT version listed here.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After adding the dependency, you can expedite the download of its jar files by right clicking the <em>pom.xml</em> file, and selecting <em>Maven</em> &gt; <em>Reload Project</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_homepage_view">3.7.2. The HomePage View</h4>
<div class="paragraph">
<p>The HomePage view is where we will display our news feed. The swiss army knife for "list" content is the <em>EntityListView</em> which can be created with the <code>&lt;entityList&gt;</code> tag.  See <a href="#entity-lists">Entity Lists</a> in the <em>Getting Started</em> tutorial for an introductory example involving Entity Lists.</p>
</div>
<div class="paragraph">
<p>There are two parts to an entity list:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The View (a subclass of <em>EntityListView</em>)</p>
</li>
<li>
<p>The provider (usually a subclass of <em>AbstractEntityListProvider</em>).</p>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Providers</div>
<div class="paragraph">
<p>The provider isn&#8217;t strictly necessary, as the view has its own View model (an <em>EntityList</em>) that you can work with directly to provide rows for the list.  E.g. you can construct an <em>EntityList</em> and pass it to the <em>EntityListView</em> for rendering, or you can obtain a reference to the EntityListView&#8217;s model directly and add, remove, or modify rows directly.</p>
</div>
<div class="paragraph">
<p>Providers simplify two common patterns in app development:  <em>Pull to Refresh</em> and <em>Infinite Scroll</em>.  When you register a provider with an EntityListView, it enables both of these features on the list.</p>
</div>
<div class="paragraph">
<p>When the user issues a "Pull to refresh" on the list (by pulling down at the top of the list, then releasing), it sends a "Refresh" request to the provider asynchronously.  The provider processes this request and returns an EntityList to the view, which replaces its own rows with the rows returned by the provider.</p>
</div>
<div class="paragraph">
<p>When the user scrolls to the bottom of the list, the view will send a "Load More" request to the provider, which fill fulfill the request in the same way as it fulfills a "Refresh" request.  The difference is that the view will <em>append</em> the rows it receives back, rather than <em>replacing</em> the existing rows with them.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entitylist-provider-diagram.png" alt="entitylist provider diagram">
</div>
<div class="title">Figure 12. This diagram shows how <em>EntityListView</em> loads its data from an <code>EntityListProvider</code>.  The EntityListView fires a "request" event which is "handled" by the registered provider by attaching an EntityList to the event, which the EntityListView adds to its own model.  Refresh events result in all rows being replaced.  "Load More" events result in rows being appended.</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_the_tweetlistview">The TweetListView</h5>
<div class="paragraph">
<p>In <a href="#entity-lists">Entity Lists</a> in the <em>Getting Started</em> tutorial, I demonstrated how to use the <code>&lt;entityList&gt;</code> tag directly to create a list.  For this app, I&#8217;m going to use a prebuilt view, <em>TweetListView</em> which <em>contains</em> an EntityListView.  The <em>TweetListView</em> renders a list of <em>Tweet</em> entities similar to the way that the Twitter app renders its tweets.  It also includes some Action categories that will allow us to plug in our own actions in each row.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetlistview.png" alt="tweetlistview">
</div>
<div class="title">Figure 13. Screenshot of the <em>TweetListView</em> component using some sample data.</div>
</div>
<div class="paragraph">
<p>You can see an example of the <em>TweetListView</em> in the above screenshow.  All of the content in this list is pulled from ether the row models (<code>Tweet</code> entities), or actions defined in the controller and registered in specific categories.  The following diagram shows where each piece of content comes from.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/TweetListView-diagram.png" alt="TweetListView diagram">
</div>
</div>
<div class="paragraph">
<p><a href="images/TweetListView-diagram.png">Open diagram image directly</a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For more detailed information about the <em>TweetListView</em> component, see the <a href="https://github.com/shannah/TweetAppUIKit/wiki/TweetListView">TweetListView wiki page</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before we add this list view to our homepage, let&#8217;s implement a provider, so that it will have some content to show.</p>
</div>
<div class="paragraph">
<p>Create a package named <code>com.example.tweetapp.providers</code> if you haven&#8217;t already, and add a new class named "NewsFeedProvider" with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.tweetapp.providers</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.io.Log</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.io.rest.Rest</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.l10n.SimpleDateFormat</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.io.ParsingService</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.AbstractEntityListProvider</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.models.EntityList</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.processing.Result</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.twitterui.models.TWTAuthor</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.twitterui.models.TWTAuthorImpl</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.twitterui.models.Tweet</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.twitterui.models.TweetImpl</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.util.StringUtil</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.xml.Element</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">java.io.ByteArrayInputStream</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">java.io.InputStreamReader</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">java.util.List</span>;

<span style="color:#777">/**
 * A &quot;provider&quot; class that provides rows to EntityListViews that want to display a news feed.
 * This uses {@link Tweet} objects as the row models.
 *
 * This is used for the news feed in the HomePage.
 */</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">NewsFeedProvider</span> <span style="color:#088;font-weight:bold">extends</span> AbstractEntityListProvider {
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> Request getEntities(Request request) {

        <span style="color:#777">// Fetch NASA RSS Feed</span>
        Rest.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">https://www.nasa.gov/rss/dyn/breaking_news.rss</span><span style="color:#710">&quot;</span></span>)
                .onError(evt-&gt;{
                    <span style="color:#777">// Propagate error back to the request</span>
                    request.error(evt.getError());
                })
                .fetchAsBytes(v -&gt; {
                    <span style="color:#777">// The ParsingService will parse XML asynchronously on a background thread</span>
                    <span style="color:#777">// so that it doesn't impede the EDT</span>
                    ParsingService parser = <span style="color:#080;font-weight:bold">new</span> ParsingService();

                    parser.parseXML(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">InputStreamReader</span>(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">ByteArrayInputStream</span>(v.getResponseData())))
                        .onResult((res, err) -&gt; {
                            <span style="color:#080;font-weight:bold">if</span> (err != <span style="color:#069">null</span>) {
                                <span style="color:#777">// Error parsing XML.  Propagate up to request.</span>
                                request.error(err);
                                <span style="color:#080;font-weight:bold">return</span>;
                            }

                            <span style="color:#777">// Create EntityList which will be returned to the request.</span>
                            EntityList out = <span style="color:#080;font-weight:bold">new</span> EntityList();

                            <span style="color:#777">// A date formatter to format dates in the RSS feed.</span>
                            <span style="color:#777">// (Determined format string based on the format in the Feed)</span>
                            <span style="color:#0a8;font-weight:bold">SimpleDateFormat</span> dateFormatter = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">SimpleDateFormat</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">EEE, dd MMM yyyy HH:mm z</span><span style="color:#710">&quot;</span></span>);

                            <span style="color:#777">// News items are all in &lt;item&gt; tags of the feed.  Get them all as a list</span>
                            <span style="color:#0a8;font-weight:bold">List</span>&lt;<span style="color:#0a8;font-weight:bold">Element</span>&gt; items = (<span style="color:#0a8;font-weight:bold">List</span>&lt;<span style="color:#0a8;font-weight:bold">Element</span>&gt;)res.getDescendantsByTagName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">item</span><span style="color:#710">&quot;</span></span>);
                            <span style="color:#080;font-weight:bold">for</span> (<span style="color:#0a8;font-weight:bold">Element</span> item : items) {
                                <span style="color:#080;font-weight:bold">try</span> {
                                    <span style="color:#777">// Wrapping item in Result object makes it easier</span>
                                    <span style="color:#777">// to extract values in correct format and navigate around</span>
                                    <span style="color:#777">// nulls.</span>
                                    <span style="color:#0a8;font-weight:bold">Result</span> ritem = <span style="color:#0a8;font-weight:bold">Result</span>.fromContent(item);

                                    <span style="color:#777">// Tweet is an Entity defined in the tweet-app-ui-kit cn1lib</span>
                                    <span style="color:#777">// to encapsulate a &quot;Tweet&quot;, which is basically a news item.</span>
                                    <span style="color:#777">// We will use these for the row models of the list.</span>
                                    Tweet tweet = <span style="color:#080;font-weight:bold">new</span> TweetImpl();
                                    tweet.setText(ritem.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">description</span><span style="color:#710">&quot;</span></span>));
                                    <span style="color:#0a8;font-weight:bold">String</span> dateString = ritem.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">pubDate</span><span style="color:#710">&quot;</span></span>);
                                    dateString = StringUtil.replaceAll(dateString, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">EDT</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">GMT-4:00</span><span style="color:#710">&quot;</span></span>);
                                    dateString = StringUtil.replaceAll(dateString, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">EST</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">GMT-5:00</span><span style="color:#710">&quot;</span></span>);
                                    tweet.setDatePosted(dateFormatter.parse(dateString));
                                    tweet.setImage(item.getFirstChildByTagName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">enclosure</span><span style="color:#710">&quot;</span></span>).getAttribute(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">url</span><span style="color:#710">&quot;</span></span>));
                                    tweet.setLink(ritem.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">link</span><span style="color:#710">&quot;</span></span>));

                                    <span style="color:#777">// TWTAuthor is an Entity defined in the tweet-app-ui-kit cn1li</span>
                                    <span style="color:#777">// to encapsulate Tweet author details.</span>
                                    TWTAuthor author = <span style="color:#080;font-weight:bold">new</span> TWTAuthorImpl();
                                    author.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NASA</span><span style="color:#710">&quot;</span></span>);
                                    author.setThumbnailUrl(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">https://pluspng.com/img-png/nasa-logo-png-file-nasa-logo-svg-1237.png</span><span style="color:#710">&quot;</span></span>);
                                    tweet.setAuthor(author);

                                    <span style="color:#777">// Add tweet to the list.</span>
                                    out.add(tweet);


                                } <span style="color:#080;font-weight:bold">catch</span> (<span style="color:#C00;font-weight:bold">Exception</span> ex) {
                                    <span style="color:#777">// Hopefully no exceptions here, but log them anyways</span>
                                    Log.e(ex);
                                }
                            }

                            <span style="color:#777">// Pass the EntityList to the request so that</span>
                            <span style="color:#777">// it can be used by the requesting EntityListView.</span>
                            request.complete(out);
                        });


                });
        <span style="color:#080;font-weight:bold">return</span> request;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The only <em>mandatory</em> method we need to implement in a provider is the <code>getEntities()</code> method, which takes a <code>Request</code> object and "fills" it with an <code>EntityList</code>.  In this class we are asynchronously fetching the NASA RSS feed, and parsing it into <code>Tweet</code> entities (<em>Tweet</em> is part of the Tweet App UI Kit cn1lib).</p>
</div>
<div class="paragraph">
<p>This provider is very basic as it doesn&#8217;t handle "paging".  It treats every request as a "Refresh" request.  Later we&#8217;ll learn how to support paging (i.e. <em>Load More</em> requests).</p>
</div>
<div class="paragraph">
<p>The XML parsing logic is fairly straight forward as it is based on the XML content of the RSS feed.  The following is an excerpt of such a feed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;rss</span> <span style="color:#b48">...</span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;channel&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>NASA Breaking News<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>A RSS news feed containing the latest NASA news articles and press releases.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
      ...
     <span style="color:#070;font-weight:bold">&lt;item&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;title&gt;</span>NASA to Air Launch, Docking of Roscosmos Cargo Ship to Space Station<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
       <span style="color:#070;font-weight:bold">&lt;link&gt;</span>http://www.nasa.gov/press-release/nasa-to-air-launch-docking-of-roscosmos-cargo-ship-to-space-station<span style="color:#070;font-weight:bold">&lt;/link&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;description&gt;</span>Live coverage of Russia’s Progress 78 cargo spacecraft’s launch and docking to the International Space Station will begin at 7 p.m. EDT Tuesday, June 29, on NASA Television, the agency’s website, and the NASA app.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;enclosure</span> <span style="color:#b48">url</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.nasa.gov/sites/default/files/styles/1x1_cardfeed/public/thumbnails/image/iss064e033785_orig.jpg?itok=lLmxLaJj</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">length</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">683114</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">image/jpeg</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;guid</span> <span style="color:#b48">isPermaLink</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">false</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>http://www.nasa.gov/press-release/nasa-to-air-launch-docking-of-roscosmos-cargo-ship-to-space-station<span style="color:#070;font-weight:bold">&lt;/guid&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;pubDate&gt;</span>Wed, 23 Jun 2021 17:21 EDT<span style="color:#070;font-weight:bold">&lt;/pubDate&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;source</span> <span style="color:#b48">url</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.nasa.gov/rss/dyn/breaking_news.rss</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>NASA Breaking News<span style="color:#070;font-weight:bold">&lt;/source&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;dc:identifier&gt;</span>472019<span style="color:#070;font-weight:bold">&lt;/dc:identifier&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/item&gt;</span>
... more items</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use the <em>ParsingService</em> class for XML parsing because it will perform parsing on a background thread to keep it out of the way of the UI thread.</p>
</div>
<div class="paragraph">
<p>We fetch all of the <code>&lt;item&gt;</code> tags in the feed using <code>List&lt;Element&gt; items = (List&lt;Element&gt;)res.getDescendantsByTagName("item");</code></p>
</div>
<div class="paragraph">
<p>Then, with each <code>&lt;item&gt;</code> element, we build a <code>Tweet</code> object and add it to the entity list.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
See the <a href="https://github.com/shannah/TweetAppUIKit/wiki/Tweet">Tweet wiki page</a> for a full list of properties and tags provided by the <em>Tweet</em> entity.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A couple of "ugly" things worth noting here:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The feed seems to render the date with the <code>EDT</code> timezone, and SimpleDateFormat wasn&#8217;t recognizing this.  Rather than explicitly register the EDT timezone, I did a <code>replaceAll()</code> on "EDT" to convert it to "GMT-4:00" which is equivalent (4 hours behind GMT) and in a format that SimpleDateFormat will handle nicely.</p>
</li>
<li>
<p>The <code>Result</code> class that I use here is the CodeRAD version (<code>com.codename1.rad.processing.Result</code>), not the core Codename One <code>Result</code> class.  This is because the behaviour of selectors in the core Codename One class doesn&#8217;t handle contexts (i.e. all queries assumed to be from the root element), and changing the behaviour would have potentially broken a lot of legacy apps.  So I "forked" it for CodeRAD, and changed the behaviour of selectors to support contextual selectors.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Before we can use our provider, we need to add a lookup to it in the Application delegate class.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
We could also place it in a more specific ViewController class for this view, but having it in the Application delegate makes it available to the entire app.  Not just our one view, and this could come in handy later if we want to display a news list from another view.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add the following snippet to the <code>onStartController()</code> method of the Tweetapp class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">addLookup(<span style="color:#080;font-weight:bold">new</span> NewsFeedProvider());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have the provider in place, let&#8217;s add our <code>TweetListView</code> to the Homepage view.  We&#8217;ll need to import both the provider class and the TweetListView class into our view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;import&gt;</span>
    import com.codename1.twitterui.views.TweetListView;
    import com.example.tweetapp.providers.NewsFeedProvider;
<span style="color:#070;font-weight:bold">&lt;/import&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The Tweet App UI kit also provides a <em>Tag Library</em> that will allow you to import all of its components into a view using the <code>&lt;use-taglib&gt;</code> tag, instead of having to add import statements to each class or package directly.</p>
</div>
<div class="paragraph">
<p>Using this taglib, we would change the <code>&lt;import&gt;</code> statements to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;use-taglib</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.codename1.twitterui.TagLibrary</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;import&gt;</span>
    import com.example.tweetapp.providers.NewsFeedProvider;
<span style="color:#070;font-weight:bold">&lt;/import&gt;</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then we can add the list view with the following snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;tweetListView</span>
        <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">provider</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NewsFeedProvider.class</span><span style="color:#710">&quot;</span></span>
<span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After adding these snippets, the contents of the HomePage.xml view will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HomePage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span><span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span><span style="color:#070;font-weight:bold">&lt;/title&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
        import com.codename1.twitterui.views.TweetListView;
        import com.example.tweetapp.providers.NewsFeedProvider;
    <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;tweetListView</span>
            <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">provider</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NewsFeedProvider.class</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, fire up the simulator, log in (to navigate to the <em>HomePage</em> view), and you should see something like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-homepage-1.png" alt="tweetapp homepage 1">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_injecting_actions">3.7.3. Injecting Actions</h4>
<div class="paragraph">
<p>At this point we have a nice looking list, but we&#8217;re just scratching the surface of the <code>TweetListView</code> component&#8217;s capabilities.  It defines a handful of action categories that will allow us to inject our own actions into each row.  Some of these actions will be manifested as buttons. Other will result in a drop-down menu being added to each row, and some of them aren&#8217;t "rendered" per-se, but will be triggered in response to user actions such as pressing, or long-pressing.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For a full list of the actions supported by the <em>TweetRowView</em> (the view used to render each row of the list), see the <a href="https://github.com/shannah/TweetAppUIKit/wiki/TweetRowView#actions">TweetRowView wiki page</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We could add our actions inside the Application controller, as that would make them available to our view.  But in this case, I&#8217;d like to confine their scope to just the <em>HomePage</em> view.  Therefore, we are going to need to create a view controller for our view.</p>
</div>
<div class="paragraph">
<p>In the same package as our other view controllers, create a new class named <code>HomePageViewController</code> with the following contents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">package</span> <span style="color:#707;font-weight:bold">com.example.tweetapp.controllers</span>;

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.Controller</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.controllers.ViewController</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.rad.nodes.ActionNode</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.twitterui.views.TweetRowView</span>;
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">com.codename1.ui.FontImage</span>;

<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">HomePageViewController</span> <span style="color:#088;font-weight:bold">extends</span> ViewController {
    <span style="color:#777">/**
     * Creates a new ViewController with the given parent controller.
     *
     * @param parent
     */</span>
    <span style="color:#088;font-weight:bold">public</span> HomePageViewController(Controller parent) {
        <span style="color:#950">super</span>(parent);
    }

    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">protected</span> <span style="color:#339;font-weight:bold">void</span> initControllerActions() {
        <span style="color:#950">super</span>.initControllerActions();

        ActionNode.builder()
                .icon(FontImage.MATERIAL_CHAT_BUBBLE_OUTLINE)
                .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_ACTIONS, evt -&gt; {});

        ActionNode.builder()
                .icon(FontImage.MATERIAL_FORWARD)
                .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_ACTIONS, evt -&gt; {});

        ActionNode.builder()
                .icon(FontImage.MATERIAL_FAVORITE_OUTLINE)
                .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_ACTIONS, evt -&gt; {});

        ActionNode.builder()
                .icon(FontImage.MATERIAL_SHARE)
                .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_ACTIONS, etc -&gt; {});

    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that I&#8217;ve registered four actions, all in the <code>TweetRowView.TWEET_ACTIONS</code> category.  Actions in the <code>TWEET_ACTIONS</code> category will be rendered as buttons below each "tweet" in the list.  Right now these actions don&#8217;t do anything because I&#8217;ve supplied empty action listeners, but the actions will still show up.</p>
</div>
<div class="paragraph">
<p>If you load up the homepage in the simulator, it should now look something like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-tweetlistview-with-actions.png" alt="tweetapp tweetlistview with actions">
</div>
</div>
<div class="paragraph">
<p>We can also add an "overflow" menu to each tweet, by adding actions to the <code>TWEET_MENU_ACTIONS</code> category.</p>
</div>
<div class="paragraph">
<p>Add the following to the <code>initControllerActions()</code> method after our existing actions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        ActionNode.builder()
            .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Not interested in this</span><span style="color:#710">&quot;</span></span>)
            .icon(FontImage.MATERIAL_MOOD_BAD)
                .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_MENU_ACTIONS, evt -&gt; {});


        ActionNode.builder()
            .icon(FontImage.MATERIAL_REMOVE)
            .label(e-&gt;{
                    Tweet tweet = TweetWrapper.wrap(e);
                    <span style="color:#080;font-weight:bold">if</span> (tweet.isEntity(Tweet.author)) {
                        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Unfollow </span><span style="color:#710">&quot;</span></span>+tweet.getAuthor().getName();
                    } <span style="color:#080;font-weight:bold">else</span> <span style="color:#080;font-weight:bold">if</span> (!tweet.isEmpty(Tweet.authorId)){
                        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Unfollow </span><span style="color:#710">&quot;</span></span>+tweet.getAuthorId();
                    }
                    <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Unfollow this user</span><span style="color:#710">&quot;</span></span>;
                })
                .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_MENU_ACTIONS, evt -&gt; {});

        ActionNode.builder()
            .icon(FontImage.MATERIAL_VOLUME_OFF)
            .label(e-&gt;{
                    Tweet tweet = TweetWrapper.wrap(e);
                    <span style="color:#080;font-weight:bold">if</span> (tweet.isEntity(Tweet.author)) {
                        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Mute </span><span style="color:#710">&quot;</span></span>+tweet.getAuthor().getName();
                    } <span style="color:#080;font-weight:bold">else</span> <span style="color:#080;font-weight:bold">if</span> (!tweet.isEmpty(Tweet.authorId)){
                        <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Mute </span><span style="color:#710">&quot;</span></span>+tweet.getAuthorId();
                    }
                    <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Mute this user</span><span style="color:#710">&quot;</span></span>;
                })
            .addToController(<span style="color:#950">this</span>, TweetRowView.TWEET_MENU_ACTIONS, evt -&gt; {});</code></pre>
</div>
</div>
<div class="paragraph">
<p>This adds three more actions.  This time, in the <code>TweetRowView.TWEET_MENU_ACTIONS</code>, which will cause an "overflow" menu to appear.</p>
</div>
<div class="paragraph">
<p>Notice that for the <em>label</em> method of two of these actions, we pass a lambda callback instead of a string.  The lambda is a callback that is processed whenever the view model is updated.  This allows the label to by dynamic - displaying a different string depending on the state of the model.  It receives the view model (in this case the view model is the <em>Tweet</em> entity for the row that the action is rendered into).  I use the <code>TweetWrapper</code> to wrap the entity as a <code>Tweet</code> so that we can use the nicer Java strongly-typed API.</p>
</div>
<div class="paragraph">
<p>Now look in the simulator, and you should see a little menu in the upper right of each row:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-newsfeed-with-overflow-menu.png" alt="tweetapp newsfeed with overflow menu">
</div>
</div>
<div class="paragraph">
<p>If you click on the menu, it will display the menu options in an action sheet:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-overflow-actionsheet.png" alt="tweetapp overflow actionsheet">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
TweetListView supports several other action categories that will allow you to respond to events like clicks and long presses on the author, or the tweet itself.  See the <a href="https://github.com/shannah/TweetAppUIKit/wiki/TweetListView#actions">TweetListView wiki page</a> for a full list.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_collapsible_header">3.7.4. Collapsible Header</h4>
<div class="paragraph">
<p>One nice aspect of the real twitter app is the title area collapses when you scroll down do that the list itself gets more real estate.  The area appears again when you start scrolling up.</p>
</div>
<div class="paragraph">
<p>We can achieve the same effect using the CodeRAD <code>&lt;collapsibleHeader&gt;</code> component.</p>
</div>
<div class="paragraph">
<p>We&#8217;re going to make some changes to the HomePage.xml template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.controllers.HomePageViewController</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HomePage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title</span> <span style="color:#b48">hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span> <b class="conum">(1)</b>

    <span style="color:#070;font-weight:bold">&lt;use-taglib</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.codename1.twitterui.TagLibrary</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
        import com.example.tweetapp.providers.NewsFeedProvider;
    <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;collapsibleHeader</span> <span style="color:#b48">scrollableComponent</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#tweetList</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span> <b class="conum">(2)</b>
        <span style="color:#070;font-weight:bold">&lt;center&gt;</span><span style="color:#070;font-weight:bold">&lt;label</span> <span style="color:#b48">iconUIID</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TwitterIcon</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">fontIcon</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(char)0xe902</span><span style="color:#710">&quot;</span></span> <span style="color:#070;font-weight:bold">&gt;</span><span style="color:#070;font-weight:bold">&lt;/label&gt;</span><span style="color:#070;font-weight:bold">&lt;/center&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/collapsibleHeader&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;tweetListView</span>
            <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">tweetList</span><span style="color:#710">&quot;</span></span> <b class="conum">(3)</b>
            <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">provider</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NewsFeedProvider.class</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We set <code>&lt;title hidden="true"/&gt;</code> to hide the default title bar.</p>
</li>
<li>
<p>We add <code>&lt;collapsibleHeader&gt;</code> which will create a custom collapsible title bar.  This tag expects 1 child XML tag, which it will make the contents of the title bar.</p>
</li>
<li>
<p>We add the <code>name</code> attribute to the <code>&lt;tweetListView&gt;</code> tag so that it can be referenced from the <code>scrollableComponent</code> attribute in the <code>&lt;collapsibleHeader&gt;</code> tag.  The collapsible header then listens to scroll activity on this component to know when to collapse and expand.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here is a short video clip of the collapsible header in action:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="400" height="800" src="https://www.youtube.com/embed/DmquufraQaA?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For more information about the CollapsibleHeader component see the <a href="https://github.com/shannah/CodeRAD/wiki/CollapsibleHeader">CollapsibleHeader wiki page</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_search_bar_and_side_bar">3.8. Search Bar and Side Bar</h3>
<div class="paragraph">
<p>Next we&#8217;ll be adding the Twitter search bar at the top of the screen.  While we&#8217;re at it, I&#8217;d like to add the side nav menu as well.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll place the search bar inside the <code>&lt;collapsibleHeader&gt;</code> tag, replacing the icon that we had there before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;collapsibleHeader</span> <span style="color:#b48">scrollableComponent</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#tweetList</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;twtTitle&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;twtsearchButton</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#SearchForm</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-href-trigger</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TWTSearchButton.SEARCH_ACTION</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/twtTitle&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/collapsibleHeader&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;m introducing two new tags here:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;twtTitle&gt;</code></dt>
<dd>
<p>A title bar that is styled like the Twitter app&#8217;s title bar, including a profile icon (i.e. avatar of the logged in user) in the upper right.</p>
</dd>
<dt class="hdlist1"><code>&lt;twtsearchButton&gt;</code></dt>
<dd>
<p>A button that looks like a search field.  When the user presses this button, it should navigate to the actual search form with the search field focused.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <code>&lt;txtsearchButton&gt;</code> is nested in the <code>&lt;twtTitle&gt;</code> tag, making it the the title bar contents.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-twtTitle-twtSearchButton.png" alt="tweetapp twtTitle twtSearchButton">
</div>
<div class="title">Figure 14. The <code>&lt;twtHeader&gt;</code> tag with embedded <code>&lt;txtsearchButton&gt;</code></div>
</div>
<div class="paragraph">
<p>For the sidebar, we&#8217;ll use the <code>&lt;sidebar&gt;</code> tag (which is a core component of CodeRAD), with a <code>&lt;twtSidebar&gt;</code> component as the sidebar contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;sidebar&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;twtSideBarView</span><span style="color:#070;font-weight:bold">/&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/sidebar&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After adding these tags, the HomePage.xml view contents will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">view-controller</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.controllers.HomePageViewController</span><span style="color:#710">&quot;</span></span>
        <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">HomePage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title</span> <span style="color:#b48">hidden</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">true</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;use-taglib</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.codename1.twitterui.TagLibrary</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;import&gt;</span>
        import com.example.tweetapp.providers.NewsFeedProvider;
    <span style="color:#070;font-weight:bold">&lt;/import&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;collapsibleHeader</span> <span style="color:#b48">scrollableComponent</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#tweetList</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;twtTitle&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;twtsearchButton</span> <span style="color:#b48">rad-href</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#SearchForm</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">rad-href-trigger</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TWTSearchButton.SEARCH_ACTION</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/twtTitle&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/collapsibleHeader&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;sidebar&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;twtSideBarView</span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/sidebar&gt;</span>

    <span style="color:#070;font-weight:bold">&lt;tweetListView</span>
            <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">tweetList</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">center</span><span style="color:#710">&quot;</span></span>
            <span style="color:#b48">provider</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">NewsFeedProvider.class</span><span style="color:#710">&quot;</span></span>
    <span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, if you press on the "Account" icon in the top left corner, it will expand from the left to reveal a sidebar as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-sidebar-1.png" alt="tweetapp sidebar 1">
</div>
</div>
<div class="sect3">
<h4 id="_populating_the_sidebar">3.8.1. Populating the Sidebar</h4>
<div class="paragraph">
<p>The <code>&lt;twtSideBarView&gt;</code> allows you to add actions in a few different categories in order to populate the menu options.  It will also "look" for a lookup of the type <code>TWTUserProfile</code> to get the name, ID, and avatar of the currently logged in user.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start by adding some actions in our Application controller to target the sidebar.  Place the following inside the <code>initControllerActions()</code> method of the application controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">// Sidebar Actions which will be injected into the TWTSideBarView</span>

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Profile</span><span style="color:#710">&quot;</span></span>)
    .icon(FontImage.MATERIAL_ACCOUNT_CIRCLE)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Lists</span><span style="color:#710">&quot;</span></span>)
    .icon(FontImage.MATERIAL_LIST)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Topics</span><span style="color:#710">&quot;</span></span>)
    .icon(FontImage.MATERIAL_CATEGORY)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Bookmarks</span><span style="color:#710">&quot;</span></span>)
    .icon(FontImage.MATERIAL_BOOKMARKS)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Moments</span><span style="color:#710">&quot;</span></span>)
    .icon(FontImage.MATERIAL_BOLT)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Create new account</span><span style="color:#710">&quot;</span></span>)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_TOP_OVERFLOW_MENU, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Add Existing Account</span><span style="color:#710">&quot;</span></span>)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_TOP_OVERFLOW_MENU, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Settings and privacy</span><span style="color:#710">&quot;</span></span>)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_SETTINGS_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Help Center</span><span style="color:#710">&quot;</span></span>)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_SETTINGS_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .icon(FontImage.MATERIAL_LIGHTBULB_OUTLINE)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_BOTTOM_LEFT_ACTIONS, evt -&gt; {});

ActionNode.builder()
    .icon(FontImage.MATERIAL_SCANNER)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_BOTTOM_RIGHT_ACTIONS, evt -&gt; {});

ActionNode.builder()
        .icon(FontImage.MATERIAL_ACCOUNT_CIRCLE)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_TOP_ACTIONS, evt -&gt; {});

ActionNode.builder()
        .icon(FontImage.MATERIAL_ACCOUNT_BALANCE_WALLET)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_TOP_ACTIONS, evt -&gt; {});


ActionNode.builder()
        .icon(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Following</span><span style="color:#710">&quot;</span></span>)
        .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">311</span><span style="color:#710">&quot;</span></span>)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_STATS, evt -&gt; {});

ActionNode.builder()
        .icon(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Followers</span><span style="color:#710">&quot;</span></span>)
        .label(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">344</span><span style="color:#710">&quot;</span></span>)
        .addToController(<span style="color:#950">this</span>, TWTSideBarView.SIDEBAR_STATS, evt -&gt; {});</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For a full list of available action categories in the <em>TWTSideBarView</em> see the <a href="https://github.com/shannah/TweetAppUIKit/wiki/TWTSideBarView#actions">TWTSideBarView wiki page</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The sidebar view can also be coaxed to display the correct username and avatar of the currently logged in user.  It does a lookup for <code>TWTUserProfile</code>, and, if found, it users that profile&#8217;s username and avatar image.</p>
</div>
<div class="paragraph">
<p>In order to simplify the example, I&#8217;m going to hard-code the user profile to my account.  We can register the profile as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">TWTUserProfile userProfile = <span style="color:#080;font-weight:bold">new</span> TWTUserProfileImpl();
userProfile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Steve Hannah</span><span style="color:#710">&quot;</span></span>);
userProfile.setIdentifier(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@shannah78</span><span style="color:#710">&quot;</span></span>);
userProfile.setThumbnailUrl(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">https://www.codenameone.com/img/steve.jpg</span><span style="color:#710">&quot;</span></span>);
addLookup(TWTUserProfile.class, userProfile);</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
One important thing to notice here is that our <em>addLookup()</em> call takes two parameters.  Previously when adding lookups we had just been using the single-arg variant.  The reason is that the TWTSideBar component will be doing a lookup on the <code>TWTUserProfile</code> interface, but our profile is actually an instance of <code>TWTUserProfileImpl</code>, which implements <code>TWTUserProfile</code>.  Lookups need to be exact though, they don&#8217;t match if a subclass is registered.  Only if the <em>exact</em> class is registered.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This code should be added to the LoginPageViewController at the point when the login is completed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">client.createLoginRequest()
        .username(viewModel.getPhoneEmailOrUsername())
        .password(viewModel.getPassword())
        .login()
        .onResult((res, error) -&gt; {

            <span style="color:#777">// ... other content omitted for clarity</span>

            <span style="color:#777">// Login was successful.  Set the `TWTUserProfile` lookup</span>
            <span style="color:#777">// NOTE: We hardcode it here, but in real app, we would use the login</span>
            <span style="color:#777">// details to construct an accurate user profile</span>
            TWTUserProfile userProfile = <span style="color:#080;font-weight:bold">new</span> TWTUserProfileImpl();
            userProfile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Steve Hannah</span><span style="color:#710">&quot;</span></span>);
            userProfile.setIdentifier(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@shannah78</span><span style="color:#710">&quot;</span></span>);
            userProfile.setThumbnailUrl(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">https://www.codenameone.com/img/steve.jpg</span><span style="color:#710">&quot;</span></span>);
            getApplicationController().addLookup(TWTUserProfile.class, userProfile);
            <span style="color:#080;font-weight:bold">new</span> HomePageController(getApplicationController()).show();
        });</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
See the full listing of <em>LoginPageViewController</em> after this change in <a href="https://gist.github.com/shannah/7d75a37bdf6cbfde51ff483a5cae0c19">this gist</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>I&#8217;m also going to take this opportunity to add support for "remembering" who is logged in, so that when the app refreshes, it will retain this login information.</p>
</div>
<div class="paragraph">
<p>This will require small changes to the <em>TweetAppClient</em> and the application controller.</p>
</div>
<div class="paragraph">
<p>Currently the <em>TweetAppClient</em> tracks login status with a <em>loggedIn</em> boolean variable.  Let&#8217;s wrap this in a private setter method, and also set a <em>logged in</em> property in <em>Preferences</em>.  Then we&#8217;ll set the <em>loggedIn</em> property in the TweetAppClient&#8217;s constructor based on the value found in preferences.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The technique used for remembering login status is simplified for clarity here.  In a real app you would probably store a token instead, and use it to query the login status.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">TweetAppClient will now store the login status in preferences.  This will be set on login, and retrieved in the constructor.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> TweetAppClient() {

    <span style="color:#777">// Logged in status tracked in preferences.</span>
    <span style="color:#777">// In real app, you wouldn't do it this way.  You would track a token</span>
    <span style="color:#777">// and use it to query the logged in status.</span>
    loggedIn = <span style="color:#0a8;font-weight:bold">Preferences</span>.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">loggedIn</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">false</span>);
    <span style="color:#080;font-weight:bold">if</span> (loggedIn) {
        <span style="color:#777">// Hardcoded logged in user because this is a demo app.</span>
        <span style="color:#777">// In real app you would set logged in user according to</span>
        <span style="color:#777">// who is actually logged in.</span>
        loggedInUserId = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@shannah78</span><span style="color:#710">&quot;</span></span>;
    }
}

...

private <span style="color:#339;font-weight:bold">void</span> setLoggedIn(<span style="color:#339;font-weight:bold">boolean</span> loggedIn) {
    <span style="color:#950">this</span>.loggedIn = loggedIn;

    <span style="color:#777">// We stored the logged in status in Preferences only for simplicity</span>
    <span style="color:#777">// because this is a demo app.  In a real app you would probably store</span>
    <span style="color:#777">// a token instead and use it to test whether the user is currently logged in.</span>
    <span style="color:#0a8;font-weight:bold">Preferences</span>.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">loggedIn</span><span style="color:#710">&quot;</span></span>, loggedIn);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We also need to find the places where the <code>loggedIn</code> variable is set, and change it to use <code>setLoggedIn()</code> instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">loggedIn = <span style="color:#069">true</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">setLoggedIn(<span style="color:#069">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the full code listing of <em>TweetAppClient</em> after these changes in <a href="https://gist.github.com/shannah/804744f7f734d1c927e9de9879c9db08">this gist</a>.</p>
</div>
<div class="paragraph">
<p>Finally, now that the app "remembers" who is logged in, we can make it skip directly to the <em>HomePage</em> on start instead showing the welcome page.</p>
</div>
<div class="paragraph">
<p>Modify the <em>actionPerformed()</em> method of the application controller to check if the user is logged in, and , if so, show the homepage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> actionPerformed(ControllerEvent evt) {

    with(evt, StartEvent.class, startEvent -&gt; {
        <span style="color:#080;font-weight:bold">if</span> (!startEvent.isShowingForm()) {
            startEvent.setShowingForm(<span style="color:#069">true</span>);
            <span style="color:#080;font-weight:bold">if</span> (lookup(TweetAppClient.class).isLoggedIn()) {
                <span style="color:#080;font-weight:bold">new</span> HomePageController(<span style="color:#950">this</span>).show();
            } <span style="color:#080;font-weight:bold">else</span> {
                <span style="color:#080;font-weight:bold">new</span> WelcomePageController(<span style="color:#950">this</span>).show();
            }
        }

    });
    <span style="color:#950">super</span>.actionPerformed(evt);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is still a problem with this, however.  We haven&#8217;t set the <em>TWTUserProfile</em> lookup in this case, so the <em>TWTSideBarView</em> won&#8217;t have access to the current user profile.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll remedy this by registering the lookup in the <code>onStartController()</code> method of the application controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#080;font-weight:bold">if</span> (client.isLoggedIn()) {

    <span style="color:#777">// The client is logged in.  We hardcode the userprofile here as me</span>
    <span style="color:#777">// but in real app you would have the profile created based on who is logged in.</span>
    TWTUserProfile userProfile = <span style="color:#080;font-weight:bold">new</span> TWTUserProfileImpl();
    userProfile.setName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Steve Hannah</span><span style="color:#710">&quot;</span></span>);
    userProfile.setIdentifier(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@shannah78</span><span style="color:#710">&quot;</span></span>);
    userProfile.setThumbnailUrl(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">https://www.codenameone.com/img/steve.jpg</span><span style="color:#710">&quot;</span></span>);
    addLookup(TWTUserProfile.class, userProfile);

}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
See the full listing for <em>Tweetapp.java</em> after this change in <a href="https://gist.github.com/shannah/9fed8c117be477d513d5729bb6f0377f">this gist</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now if we look at the simulator, we&#8217;ll see a couple of differences.  The title bar now shows my avatar image, as it <em>also</em> does a lookup on <em>TWTUserProfile</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/twtTitleBar-with-avatar.png" alt="twtTitleBar with avatar">
</div>
</div>
<div class="paragraph">
<p>And, if we tap on the avatar, it will expand the sidebar fully populated as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/twtSideBarView-fully-populated.png" alt="twtSideBarView fully populated">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_global_navigation_tabs">3.9. The Global Navigation Tabs</h3>
<div class="paragraph">
<p>We will use the <code>&lt;globalTabs&gt;</code> component, which is part of the Tweet App UI Kit, to add the twitter-style navigation tabs to the bottom of each page.  Before adding the tag to our view, we&#8217;ll create the actions that will be used as tabs.  In the application controller, add the following action definitiions as <code>public static</code> variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> ActionNode HOME_TAB = ActionNode.builder().
        icon(FontImage.MATERIAL_HOME).
        addActionListener(evt-&gt;{
            evt.consume();
            TWTGlobalTabs.showTab(
                    evt,
                    <span style="color:#080;font-weight:bold">new</span> HomePageController(ApplicationController.getApplicationController(evt))
            );
        }).
        build();

<span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> ActionNode INBOX_TAB = ActionNode.builder().
        icon(FontImage.MATERIAL_INBOX).
        badge(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">2</span><span style="color:#710">&quot;</span></span>).
        addActionListener(evt-&gt;{
            evt.consume();
            TWTGlobalTabs.showTab(
                    evt,
                    <span style="color:#080;font-weight:bold">new</span> InboxPageController(ApplicationController.getApplicationController(evt))
            );

        }).
        build();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We create these actions as <code>public static</code> variables because we will need to reference the actions directly, and individually, from within the <em>view</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We&#8217;ve broken a little bit of new ground with these action definitions.  The <code>INBOX_TAB</code> action includes a "badge" directive, which will be rendered on the tab icon as a badge.  The <code>addActionListener()</code> method is also new.  It, predictably, will be called when the user clicks on the corresponding tab.</p>
</div>
<div class="paragraph">
<p>The <code>TWTGlobalTabs.showTab()</code> method is a utility method that will automatically transition to the new tab in the correct direction.  E.g. When navigating from a tab to another tab that is to the left, the transition should go to the left.</p>
</div>
<div class="paragraph">
<p>Now, in the <code>initControllerActions()</code> method we need to register these actions with the <code>TWTGlobalTabs.GLOBAL_TABS</code> category:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">addActions(TWTGlobalTabs.GLOBAL_TABS,
        HOME_TAB, INBOX_TAB
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In our case our global tabs component will include two tabs: <em>Home</em> and <em>Inbox</em>.</p>
</div>
<div class="paragraph">
<p>We need to create the <code>InboxPage</code> view that we reference in our tabs.  Create a view named "InboxPage.xml" in the same directory as your other views:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;border</span> <span style="color:#b48">xsi:noNamespaceSchemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">InboxPage.xsd</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;title&gt;</span>InBox<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;use-taglib</span> <span style="color:#b48">class</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.codename1.twitterui.TagLibrary</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;globalTabs</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">selectedTab</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.Tweetapp.INBOX_TAB</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/border&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ve left this view mostly empty, to be developed later - except for the <code>&lt;globalTabs&gt;</code> component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;globalTabs</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span>
    <span style="color:#b48">selectedTab</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.Tweetapp.INBOX_TAB</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>selectedTab</code> attribute references the action that should be selected.  In this page, it is the <code>INBOX_TAB</code> action.  This <em>reference</em> is why we defined our global tabs actions to be <code>public static</code> variables.</p>
</div>
<div class="paragraph">
<p>Now, add the <code>&lt;globalTabs&gt;</code> component to the <em>HomePage</em> view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;globalTabs</span> <span style="color:#b48">layout-constraint</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">south</span><span style="color:#710">&quot;</span></span>
    <span style="color:#b48">selectedTab</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">com.example.tweetapp.Tweetapp.HOME_TAB</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After adding the global tabs, our app should resemble the following screenshot:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tweetapp-globaltabs.png" alt="tweetapp globaltabs">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
You can see the full source listings of this example in <a href="https://gist.github.com/shannah/be58c81314a32d87f1de5c54216a71b4">this gist</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_summary">3.10. Summary</h3>
<div class="paragraph">
<p>We have left quite a few loose-ends in our "Tweet" app.  None of the links in our side bar do anything.  We haven&#8217;t implemented search, and we haven&#8217;t provided a way to add tweets.  I leave these as exercises for the reader, as you should be able to use the fundamentals in this tutorial to implement these functionalities.</p>
</div>
<div class="paragraph">
<p>You can use the following resources to help you along the way:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="https://github.com/shannah/CodeRAD/wiki">CodeRAD wiki</a></dt>
<dd>
<p>The CodeRAD wiki includes reference documentation for many of the components available in CodeRAD views.</p>
</dd>
<dt class="hdlist1"><a href="https://github.com/shannah/TweetAppUIKit/wiki">Tweet App UI Kit wiki</a></dt>
<dd>
<p>The Tweet App UI Kit wiki includes reference documentation for many of the components avaiable in the tweet app UI kit.</p>
</dd>
<dt class="hdlist1"><a href="https://www.codenameone.com/javadoc/">Codename One javadocs</a></dt>
<dd>
<p>API documentation for the Codename One library.  Since <em>all</em> of components in Codename One can be used from CodeRAD views, this is your definitive source for what attributes are available in each tag.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_controllers">4. Controllers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_application_structure_and_form_navigation_pre_coderad">4.1. Application Structure and Form Navigation Pre-CodeRAD</h3>
<div class="paragraph">
<p>How do you structure your Codename One apps?  How do you share data between different forms?  How do you maintain state between forms?  How do you manage navigation between forms?  E.g. When the user presses "Back", how do you decide what to do?</p>
</div>
<div class="paragraph">
<p>Codename One is not opinionated on these questions.  Essentially, you may structure your app however you like.  The "old" GUI builder used a <code>StateMachine</code> as a monolithic controller that managed state and navigation.  All forms used this single controller for all of their event handling and callbacks.  This worked well for small to mid-sized apps, but on larger apps, it soon became necessary to refactor the logic into separate files.</p>
</div>
<div class="paragraph">
<p>The new GUI builder moved to a less opinionated approach.  A GUI builder form would map to either a "Form" or a "Container".  I.e. just the view.  You were free to use these views in your application however you liked.  You could structure your app however you liked.</p>
</div>
<div class="paragraph">
<p>The other day I was asked by a new developer "How do you push and pop forms?".  The question seems to assume that there must be some sort of navigation stack for forms, but there isn&#8217;t really.  The Codename One API leaves you free to implement a navigation stack however you like.  The <code>Form</code> API allows you to show a form with <code>show()</code> (and <code>showBack()</code> to show it with a reverse transition), but you are free to organize your form navigation stack however you like.</p>
</div>
<div class="paragraph">
<p>A common, though quick and dirty, approach is to grab a reference to the "current" form when you create a new form, and use this for your "back" command.  E.g.</p>
</div>
<div class="listingblock">
<div class="title">Sample code using the "current" form for the back command on a new form.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Form f2 = <span style="color:#080;font-weight:bold">new</span> Form(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Result</span><span style="color:#710">&quot;</span></span>, <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">BorderLayout</span>());
Form f = CN.getCurrentForm();
<span style="color:#080;font-weight:bold">if</span> (f != <span style="color:#069">null</span>) {
    f2.setBackCommand(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Back</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>, evt-&gt;{
        f.showBack();
    });
    f2.getToolbar().addCommandToLeftBar(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Back</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>, evt-&gt;{
        f.showBack();
    });
}
f2.show();</code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s nothing wrong with this approach, other than the fact that it gets tedious doing this on every single form.  We could reduce the boilerplate code here by abstracting this behaviour out into a separate class, so that we can "reuse" our solution on every form.  Let&#8217;s look at such an abstraction:</p>
</div>
<div class="listingblock">
<div class="title">A very simple abstraction for "Back" functionality on forms.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyFormController</span> {
    <span style="color:#088;font-weight:bold">private</span> Form form;

    <span style="color:#088;font-weight:bold">public</span> MyFormController(Form form) {
        <span style="color:#950">this</span>.form = form;
        Form backForm = CN.getCurrentForm();
        <span style="color:#080;font-weight:bold">if</span> (backForm != <span style="color:#069">null</span>) {
            form.setBackCommand(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Back</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>, evt-&gt;{
                backForm.showBack();
            });
            form.getToolbar().addCommandToLeftBar(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Back</span><span style="color:#710">&quot;</span></span>, <span style="color:#069">null</span>, evt-&gt;{
                backForm.showBack();
            });
        }
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> show() {
        form.show();
    }

    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> showBack() {
        form.showBack();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What we&#8217;ve created here is a very simple controller, as in the "C" in MVC.  This controller implements the "back" navigation for our forms, so that the form itself doesn&#8217;t need to contain the logic itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="_app_structure_as_a_tree">4.2. App Structure as a Tree</h3>
<div class="paragraph">
<p>Once you start walking down the path extracting navigation logic into a "controller" class, you can start to think about your application&#8217;s structure more clearly. For example, we naturally think of UI component hierarchy as a tree-like structure, where the <code>Form</code> is the root, and the containers and components are the nodes.  Thinking in these terms makes it easy to visualize the structure of a form:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Containers have child components</p>
</li>
<li>
<p>Components have a parent container</p>
</li>
<li>
<p>Events can propagate up from a child component, to its parent, and ultimately up to the root - the <code>Form</code> itself.</p>
</li>
<li>
<p>Containers can be laid out and painted, which will propagate layout and painting down to its children, and their children, all the way down to the leaves of the container&#8217;s branch.</p>
</li>
<li>
<p>The state of a container can affect the state of its children. E.g.:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Shifting a container 5 pixels to the right, will shift all children&#8217;s absolute position 5 to the right also.</p>
</li>
<li>
<p>Changing the alpha or transform setting while painting a container will affect the alpha or transform on its children.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-021231.287.png" alt="Image 300320 021231.287">
</div>
<div class="title">Figure 15. A simple Form UI presented here as a diagram that emphasizes containment.  The next figure shows the same UI expressed in a tree diagram.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-020346.131.png" alt="Image 300320 020346.131">
</div>
<div class="title">Figure 16. A UI component visualized as a tree, with the Form as the "root" node, each container a branch, and atomic components (e.g. Label, Button, TextField) as leaf nodes.</div>
</div>
<div class="paragraph">
<p>In fact, we derive many benefits from the fact that the UI can be mapped to a tree data structure.  Trees are nice to work with because they lend themselves nicely to software.  If you can write a function that operates on a single node of the tree, you can easily expand this function to operate on the entire tree.</p>
</div>
<div class="paragraph">
<p>Now, try to imagine your application as a tree structure.  Each node of the tree is a controller - the root node is the "Application", and most of the other nodes are Forms.  The "child" nodes of a Form node are those forms that you navigate to from a given form.  This implies that the "Back" command for any given node will navigate back to the "parent" Form node.</p>
</div>
<div class="paragraph">
<p>In order to properly encapsulate all of this structure without it bleeding into the views themselves, we implement these nodes as "Controller" classes.</p>
</div>
<div class="paragraph">
<p>As an example, consider the Twitter mobile app.  A few of its screens are shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-023353.927.png" alt="Image 300320 023353.927">
</div>
<div class="title">Figure 17. Screenshots from the Twitter mobile app.</div>
</div>
<div class="paragraph">
<p>The app structure of Twitter has 4 top-level FormControllers corresponding to the tabs at the bottom of the app:  Home, Search, Alerys, and Inbox.  The "Home" tab contains a list of tweets, and clicking on any of these tweets will bring the user to a "Tweet Details" form.  Hence in the controller hierarchy, the "Home" tab is a top-level form (a child of the ApplicationController), and it has at least one child, the "Tweet Details" form controller.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-023007.132.png" alt="Image 300320 023007.132">
</div>
<div class="title">Figure 18. A partial controller hierarchy for the Twitter mobile app.  <strong>Note that this is not a class hierarchy</strong>, as many of these nodes are instances of the same class.  It reflects the structure of the app in the sense that a node A is a child of node "B" if the user can navigate from node "A" to node "B".</div>
</div>
</div>
<div class="sect2">
<h3 id="_coderad_core_controllers">4.3. CodeRAD Core Controllers</h3>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-015455.241.png" alt="Image 300320 015455.241">
</div>
<div class="title">Figure 19. The main controller classes provided by CodeRAD.</div>
</div>
<div class="paragraph">
<p>CodeRAD provides a set of fundamental controller classes to help structure your app in this way:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ApplicationController</code> - The root application controller.</p>
</li>
<li>
<p><code>SectionController</code> - A controller for a section of the app.  This can be a useful parent node to a set of related form nodes, to help group them together.</p>
</li>
<li>
<p><code>FormController</code> - A controller for a single form.</p>
</li>
<li>
<p><code>ViewController</code> - A controller for a single Component on a form.  (This is a superclass of <code>FormController</code>, and in most cases <code>ViewController</code> on sub-components of a form aren&#8217;t necessary.  Only in complex cases).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_event_propagation_2">4.4. Event Propagation</h3>
<div class="paragraph">
<p>Mapping our app structure onto a controller tree brings other benefits as well.  Just as we can propagate events up a UI component hierarchy for handling.  We can propagate events up a controller hierarchy as well.  In GUI applications, events are a very effective way of passing information between different parts of the application without introducing coupling.</p>
</div>
<div class="paragraph">
<p>The <code>Controller</code> class implements <code>ActionListener</code>, and all <code>ControllerEvents</code> that are fired in the UI, will be dispatched to the nearest <code>ViewController</code>, and then propagated up the controller hierarchy until it is consumed by a <code>Controller</code>, or until it reaches the root controller.  Additionally, <code>Controller</code> implements <code>ActionSource</code> (i.e. implements <code>addActionListener()</code>) so that interested parties can subscribe to receive notifications about these controller events.</p>
</div>
<div class="paragraph">
<p>Event propagation is used to great effect internally in the CodeRAD library for such things as "Back" events, but it can and should also be utilized by application code to help reduce coupling and keep code clean.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_sharing_lookups">4.5. Code-sharing / Lookups</h3>
<div class="paragraph">
<p>CodeRAD controllers also exploit their tree structure to facilitate sharing of data from a "parent" controller to its children via the "lookup" mechanism.  For example, perhaps you need to keep track of the current logged-in user for your app.  One way to do it is to use static globals (this includes using a Singleton).  But a more elegant approach is to use lookups in your ApplicationController, which are available to be "looked up" from all of its children.</p>
</div>
<div class="paragraph">
<p>E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">//.. somewhere in the application controller</span>
UserProfile loggedInUser = getLoggedInUser();
addLookup(loggedInUser);

...

<span style="color:#777">//.. in a child controller</span>
UserProfile loggedInUser = lookup(UserProfile.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>lookup()</code> method exploits the tree structure of the controller hierarchy by checking the current controller for an object of type <code>UserProfile.class</code>, and if it doesn&#8217;t exist, it checks the parent controller.  And so on until it reaches the root.</p>
</div>
<div class="paragraph">
<p>This allows us to completely encapsulate all functionality related to the logged in user in the ApplicationController, or a specific sub-controller, and it is made available to all parts of the app.</p>
</div>
</div>
<div class="sect2">
<h3 id="_example_controllers">4.6. Example Controllers</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following examples all use an ApplicationController as the root of the controller hierarchy, but it is also possible to use a controller in isolation.  You just won&#8217;t receive the full benefits of an application-wide controller hierarchy.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The easiest way to implement an application controller in your app is for your app&#8217;s main lifecycle class (i.e. the class with <code>init()</code>, <code>start()</code>, <code>stop()</code> and <code>destroy()</code>) to extend <code>ApplicationController</code>.  The <code>ApplicationController</code> class implements all of the lifecycle methods with sensible defaults.  Therefore, you can simply override the start() method as shown below:</p>
</div>
<div class="listingblock">
<div class="title">MyApplication.java - A minimal application controller.   This controller overrides the <code>start()</code> method and instantiates a <code>FormController</code>, then shows it.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyApplication</span> <span style="color:#088;font-weight:bold">extends</span> ApplicationController {
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> start() {
        <span style="color:#950">super</span>.start();
        <span style="color:#080;font-weight:bold">new</span> MainFormController(<span style="color:#950">this</span>).show();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">MainFormController.java - A minimal FormController.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MainFormController</span> <span style="color:#088;font-weight:bold">extends</span> FormController {
    <span style="color:#088;font-weight:bold">public</span> MainFormController(Controller parent) {
        <span style="color:#950">super</span>(parent);
        Form f = <span style="color:#080;font-weight:bold">new</span> Form(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello</span><span style="color:#710">&quot;</span></span>);
        f.add(<span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">Label</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World</span><span style="color:#710">&quot;</span></span>));
        setView(f);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_form_navigation">4.7. Form Navigation</h3>
<div class="paragraph">
<p>As we&#8217;ve already seen, "back" functionality is handled automatically by the <code>FormController</code>.  If there is a "parent" FormController of the form, then it will add a "back" button to the toolbar and set a "back" command to go to that toolbar.  However, you can also explicitly trigger a "back" event by firing a <code>FormBackEvent</code> (an internal class in <code>FormController</code>).</p>
</div>
<div class="paragraph">
<p>For example, we might want to create a reusable view called "BackButton", which is just a Button, that, when pressed, will fire a "FormBackEvent".</p>
</div>
<div class="listingblock">
<div class="title">View that fires a <code>FormBackEvent</code>.  This view can be added anywhere in the UI, and clicking it cause the app to navigate back to the "parent" (previous) form.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">BackButton</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Button</span> {
    <span style="color:#088;font-weight:bold">public</span> BackButton() {
        <span style="color:#950">super</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Go Back</span><span style="color:#710">&quot;</span></span>);
        addActionListener(evt-&gt;{
            evt.consume();
            ActionSupport.dispatchEvent(<span style="color:#080;font-weight:bold">new</span> FormBackEvent(<span style="color:#950">this</span>));
        });
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>BackButton</code> can be added anywhere in the UI.  You don&#8217;t need to write any "handling" code to catch this <code>FormBackEvent</code> because it will propagate up the component hierarchy until it finds the nearest ViewController, then continue to propagate up to the FormController, which will consume the event.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-014315.510.png" alt="Image 300320 014315.510">
</div>
<div class="title">Figure 20. The flow of the <code>FormBackEvent</code> as it propagates up to the first FormController, which consumes the event, and navigates back to the previous/parent form.</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serialization_working_with_xml_and_json">5. Serialization: Working with XML and JSON</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CodeRAD entities' loose coupling presents advantages beyond the user interface.  Just as you can loosely bind the properties of an entity to a UI View, you can also bind them to elements of and XML or JSON document.  The <code>ResultParser</code> class provides a clean and succinct syntax for parsing XML and JSON into entity graphs.</p>
</div>
<div class="paragraph">
<p>In addition to the ResultParser, CodeRAD provides some convenient utility classes for parsing and querying JSON and XML documents.  This chapter will introduce you to some of these utilities, and provide concrete examples of how they can be used to load data from a JSON or XML web service.</p>
</div>
<div class="sect2">
<h3 id="_useful_classes">5.1. Useful Classes</h3>
<div class="paragraph">
<p>Some of the more useful classes related to XML and JSON parsing are as:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>com.codename1.rad.processing.Result</code></dt>
<dd>
<p>A derivation of the core Codename One <a href="https://www.codenameone.com/javadoc/com/codename1/processing/Result.html">Result</a> class, which provides an expression language similar to <a href="https://en.wikipedia.org/wiki/XPath">XPath</a> for querying XML and JSON documents.  The CodeRAD version of this class fixes a number of bugs, and expands the expression capability with support for additional expressions.  The decision was made to "fork" the Codename One class, rather than fix bugs because legacy applications may be relying on those "bugs", so changing its behaviour would have been too risky.</p>
</dd>
<dt class="hdlist1"><code>com.codename1.rad.io.ElementSelector</code></dt>
<dd>
<p>A utility for querying XML documents using syntax similar to CSS selectors.  This class works similarly to the <a href="https://www.codenameone.com/javadoc/com/codename1/ui/ComponentSelector.html">ComponentSelector</a> class, except that this is optimized to work with XML elements rather than Codename One components.</p>
</dd>
<dt class="hdlist1"><code>com.codename1.rad.io.ResultParser</code></dt>
<dd>
<p>A class that is able to parse XML and JSON documents into entity graphs.  This uses the <code>Result</code> class' expression language (similar to XPath syntax) for mapping properties of XML tags and JSON data structures, onto Entity properties.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These classes complement the existing data parsing classes that already exist in the Codename One ecosystem, such as <code>XMLParser</code>, <code>JSONParser</code>, and the <code>CN1JSON</code> cn1lib.</p>
</div>
</div>
<div class="sect2">
<h3 id="_starting_at_the_end_xml_to_entity">5.2. Starting at the end&#8230;&#8203; XML to Entity</h3>
<div class="paragraph">
<p>Before wading through the details XML, JSON, expression languages, and CSS selectors, let&#8217;s take a peek at our end goal, which is to convert XML or JSON data into Entities.</p>
</div>
<div class="paragraph">
<p>Consider the following sample XML file:</p>
</div>
<div class="listingblock">
<div class="title">Some sample XML data that we will be parsing into entities using <code>ResultParser</code>.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;catalog&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk101</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Gambardella, Matthew<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>XML Developer's Guide<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Computer<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>44.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-10-01<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>An in-depth look at creating applications
      with XML.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk102</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Ralls, Kim<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Midnight Rain<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Fantasy<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>5.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-12-16<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>A former architect battles corporate zombies,
      an evil sorceress, and her own childhood to become queen
      of the world.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk103</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Corets, Eva<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Maeve Ascendant<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Fantasy<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>5.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-11-17<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>After the collapse of a nanotechnology
      society in England, the young survivors lay the
      foundation for a new society.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk104</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Corets, Eva<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Oberon's Legacy<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Fantasy<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>5.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2001-03-10<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>In post-apocalypse England, the mysterious
      agent known only as Oberon helps to create a new life
      for the inhabitants of London. Sequel to Maeve
      Ascendant.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk105</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Corets, Eva<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>The Sundered Grail<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Fantasy<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>5.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2001-09-10<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>The two daughters of Maeve, half-sisters,
      battle one another for control of England. Sequel to
      Oberon's Legacy.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk106</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Randall, Cynthia<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Lover Birds<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Romance<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>4.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-09-02<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>When Carla meets Paul at an ornithology
      conference, tempers fly as feathers get ruffled.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk107</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Thurman, Paula<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Splish Splash<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Romance<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>4.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-11-02<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>A deep sea diver finds true love twenty
      thousand leagues beneath the sea.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk108</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Knorr, Stefan<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Creepy Crawlies<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Horror<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>4.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-12-06<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>An anthology of horror stories about roaches,
      centipedes, scorpions  and other insects.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk109</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Kress, Peter<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Paradox Lost<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Science Fiction<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>6.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-11-02<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>After an inadvertant trip through a Heisenberg
      Uncertainty Device, James Salway discovers the problems
      of being quantum.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk110</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>O'Brien, Tim<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Microsoft .NET: The Programming Bible<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Computer<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>36.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-12-09<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>Microsoft's .NET initiative is explored in
      detail in this deep programmer's reference.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk111</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>O'Brien, Tim<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>MSXML3: A Comprehensive Guide<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Computer<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>36.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2000-12-01<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>The Microsoft MSXML3 parser is covered in
      detail, with attention to XML DOM interfaces, XSLT processing,
      SAX and more.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;book</span> <span style="color:#b48">id</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bk112</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;author&gt;</span>Galos, Mike<span style="color:#070;font-weight:bold">&lt;/author&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;title&gt;</span>Visual Studio 7: A Comprehensive Guide<span style="color:#070;font-weight:bold">&lt;/title&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;genre&gt;</span>Computer<span style="color:#070;font-weight:bold">&lt;/genre&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;price&gt;</span>49.95<span style="color:#070;font-weight:bold">&lt;/price&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;publish_date&gt;</span>2001-04-16<span style="color:#070;font-weight:bold">&lt;/publish_date&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;description&gt;</span>Microsoft Visual Studio 7 is explored in depth,
      looking at how Visual Basic, Visual C++, C#, and ASP+ are
      integrated into a comprehensive development
      environment.<span style="color:#070;font-weight:bold">&lt;/description&gt;</span>
   <span style="color:#070;font-weight:bold">&lt;/book&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/catalog&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And suppose our application includes the following entities:</p>
</div>
<div class="listingblock">
<div class="title">Minimal source code for a <code>Book</code> entity.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Book</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Entity</span> {
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> EntityType TYPE = <span style="color:#080;font-weight:bold">new</span> EntityTypeBuilder()
        .string(Thing.identifier)
        .string(Thing.name)
        .string(Thing.description)
        .build();
    {
        setEntityType(TYPE);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Minimal source code for a <code>Books</code> entity. I find it helps for API clarity to create subclasses entity-specific collection types rather than just using generic EntityLists.  This makes it easier for things like the <code>ResultParser</code> to introspect the data model and produce better results.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Books</span> <span style="color:#088;font-weight:bold">extends</span> EntityList&lt;<span style="color:#0a8;font-weight:bold">Book</span>&gt; {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Minimal source code for a <code>Catalog</code> entity.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Catalog</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Entity</span> {
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> Tag BOOKS = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Books</span><span style="color:#710">&quot;</span></span>);
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> EntityType TYPE = <span style="color:#080;font-weight:bold">new</span> EntityTypeBuilder()
        .list(Books.class, BOOKS)
        .build();
    {
        setEntityType(TYPE);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can convert this XML document into our entities using:</p>
</div>
<div class="listingblock">
<div class="title">Using <code>ResultParser</code> to parse an XML document into Entities and EntityTypes.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ResultParser parser = <span style="color:#080;font-weight:bold">new</span> ResultParser(Catalog.TYPE) <b class="conum">(1)</b>
    .property(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./book</span><span style="color:#710">&quot;</span></span>, Catalog.BOOKS) <b class="conum">(2)</b>
    .entity(<span style="color:#0a8;font-weight:bold">Book</span>.TYPE) <b class="conum">(3)</b>
    .property(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@id</span><span style="color:#710">&quot;</span></span>, Thing.identifier) <b class="conum">(4)</b>
    .property(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">title</span><span style="color:#710">&quot;</span></span>, Thing.name) <b class="conum">(5)</b>
    .property(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">description</span><span style="color:#710">&quot;</span></span>, Thing.description); <b class="conum">(6)</b>

Catalog catalog = (Catalog)parser.parseXML(xmlContent); <b class="conum">(7)</b>
<span style="color:#080;font-weight:bold">for</span> (<span style="color:#0a8;font-weight:bold">Book</span> book : (Books)catalog.get(Catalog.BOOKS)) {
    <span style="color:#0a8;font-weight:bold">System</span>.out.println(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Name: </span><span style="color:#710">&quot;</span></span> + book.get(Thing.name));
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Constructor takes the <code>Catalog.TYPE</code> entity type, which is the assigned entity type for the <code>Catalog</code> class, thus ensuring that this result parser will map the "root" tag of an XML document to a <code>Catalog</code> entity.</p>
</li>
<li>
<p>"./book" is an expression language selector matching <code>&lt;book&gt;</code> elements that are direct children of the "current" element.  <code>Catalog.BOOKS</code> indicates that the <code>&lt;book&gt;</code> elements should be mapped to the <code>Catalog.BOOKS</code> property of the <code>Catalog</code> entity.</p>
</li>
<li>
<p><code>entity(Book.TYPE)</code>, create a new <code>ResultParser</code> for mapping the <code>Book</code> entity.   This <code>entity()</code> method creates the "sub" parser, registers it with the "root" Catalog parser, and returns itself so that subsequent chained method calls are actually performed on the "Book" parser.</p>
</li>
<li>
<p>Map the "id" attribute of the <code>&lt;book&gt;</code> tag to the <code>Thing.identifier</code> property of the <code>Book</code> entity.</p>
</li>
<li>
<p>Map the contents of the <code>&lt;title&gt;</code> child tag to the <code>Thing.name</code> property of the <code>Book</code> entity.</p>
</li>
<li>
<p>Map the contents of the <code>&lt;description&gt;</code> child tag to the <code>Thing.description</code> property of the <code>Book</code> entity.</p>
</li>
<li>
<p><code>parser.parseXML(xmlContent)</code> parses the provided XML content as a <code>Catalog</code> object.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This short example demonstrates how easy it is to parse arbitrary XML into Java entities without dictating any structural requirements on the XML data.  The <code>ResultParser</code> uses the Result expression language to specify how the XML data should be mapped to entities. This example, being chosen for clarity and small code-size primarily maps to entities that have the same structure as the XML data, but API is flexible enough to map different structures together.  It also includes advanced facilities for custom content parsing and formatting.  For example, you can provide a <code>DateFormatter</code> object to help format dates and time data.</p>
</div>
</div>
<div class="sect2">
<h3 id="json-to-entity">5.3. JSON to Entity</h3>
<div class="paragraph">
<p>Lest you think that the ResultParser is geared to XML data input exclusively, here is a motivating example the demonstrates the parsing of JSON data into entities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span style="color:#606"><span style="color:#404">&quot;</span><span>colors</span><span style="color:#404">&quot;</span></span>: [
    {
      <span style="color:#606"><span style="color:#404">&quot;</span><span>color</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">black</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>category</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hue</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>type</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">primary</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>code</span><span style="color:#404">&quot;</span></span>: {
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rgba</span><span style="color:#404">&quot;</span></span>: [<span style="color:#00D">255</span>,<span style="color:#00D">255</span>,<span style="color:#00D">255</span>,<span style="color:#00D">1</span>],
        <span style="color:#606"><span style="color:#404">&quot;</span><span>hex</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#000</span><span style="color:#710">&quot;</span></span>
      }
    },
    {
      <span style="color:#606"><span style="color:#404">&quot;</span><span>color</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">white</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>category</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">value</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>code</span><span style="color:#404">&quot;</span></span>: {
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rgba</span><span style="color:#404">&quot;</span></span>: [<span style="color:#00D">0</span>,<span style="color:#00D">0</span>,<span style="color:#00D">0</span>,<span style="color:#00D">1</span>],
        <span style="color:#606"><span style="color:#404">&quot;</span><span>hex</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#FFF</span><span style="color:#710">&quot;</span></span>
      }
    },
    {
      <span style="color:#606"><span style="color:#404">&quot;</span><span>color</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">red</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>category</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hue</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>type</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">primary</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>code</span><span style="color:#404">&quot;</span></span>: {
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rgba</span><span style="color:#404">&quot;</span></span>: [<span style="color:#00D">255</span>,<span style="color:#00D">0</span>,<span style="color:#00D">0</span>,<span style="color:#00D">1</span>],
        <span style="color:#606"><span style="color:#404">&quot;</span><span>hex</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#FF0</span><span style="color:#710">&quot;</span></span>
      }
    },
    {
      <span style="color:#606"><span style="color:#404">&quot;</span><span>color</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">blue</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>category</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hue</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>type</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">primary</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>code</span><span style="color:#404">&quot;</span></span>: {
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rgba</span><span style="color:#404">&quot;</span></span>: [<span style="color:#00D">0</span>,<span style="color:#00D">0</span>,<span style="color:#00D">255</span>,<span style="color:#00D">1</span>],
        <span style="color:#606"><span style="color:#404">&quot;</span><span>hex</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#00F</span><span style="color:#710">&quot;</span></span>
      }
    },
    {
      <span style="color:#606"><span style="color:#404">&quot;</span><span>color</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">yellow</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>category</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hue</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>type</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">primary</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>code</span><span style="color:#404">&quot;</span></span>: {
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rgba</span><span style="color:#404">&quot;</span></span>: [<span style="color:#00D">255</span>,<span style="color:#00D">255</span>,<span style="color:#00D">0</span>,<span style="color:#00D">1</span>],
        <span style="color:#606"><span style="color:#404">&quot;</span><span>hex</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#FF0</span><span style="color:#710">&quot;</span></span>
      }
    },
    {
      <span style="color:#606"><span style="color:#404">&quot;</span><span>color</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">green</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>category</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">hue</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>type</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">secondary</span><span style="color:#710">&quot;</span></span>,
      <span style="color:#606"><span style="color:#404">&quot;</span><span>code</span><span style="color:#404">&quot;</span></span>: {
        <span style="color:#606"><span style="color:#404">&quot;</span><span>rgba</span><span style="color:#404">&quot;</span></span>: [<span style="color:#00D">0</span>,<span style="color:#00D">255</span>,<span style="color:#00D">0</span>,<span style="color:#00D">1</span>],
        <span style="color:#606"><span style="color:#404">&quot;</span><span>hex</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#0F0</span><span style="color:#710">&quot;</span></span>
      }
    },
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">The <code>Color</code> entity which will encapsulate a "row" of data in the JSON.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">/**
 * Class to encapsulate a color.
 */</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Color</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Entity</span> {

    <span style="color:#777">/**
     * Define some tags which we'll use for properties
     * in our class.
     */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> Tag type = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">type</span><span style="color:#710">&quot;</span></span>),
        red = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">red</span><span style="color:#710">&quot;</span></span>),
        green = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">green</span><span style="color:#710">&quot;</span></span>),
        blue = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">blue</span><span style="color:#710">&quot;</span></span>),
        alpha = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">alpha</span><span style="color:#710">&quot;</span></span>);

    <span style="color:#777">/**
     * Define the entity type.
     */</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> EntityType TYPE = entityTypeBuilder(<span style="color:#0a8;font-weight:bold">Color</span>.class)
        .string(Thing.name)
        .string(Product.category)
        .string(type)
        .Integer(red)
        .Integer(green)
        .Integer(blue)
        .Integer(alpha)
        .build();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">The <code>Colors</code> entity, which encapsulates a list of colors.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">/**
 * Encapsulates a list of colors.
 */</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">Colors</span> <span style="color:#088;font-weight:bold">extends</span> EntityList&lt;<span style="color:#0a8;font-weight:bold">Color</span>&gt;{
    <span style="color:#088;font-weight:bold">static</span> {
        <span style="color:#777">// Register this EntityType</span>
        EntityType.registerList(
            Colors.class, <span style="color:#777">// Class used for list</span>
            <span style="color:#0a8;font-weight:bold">Color</span>.class  <span style="color:#777">// Class of row type</span>
        );
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">The <code>ColorSet</code> entity which will encapsulate the "root" of the data.  This is largely created to make it easier to map the JSON data onto our entities.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">/**
 * An entity type to model the root of the data set.
 */</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ColorSet</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#0a8;font-weight:bold">Entity</span> {
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> Tag colors = <span style="color:#080;font-weight:bold">new</span> Tag(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">colors</span><span style="color:#710">&quot;</span></span>);
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#088;font-weight:bold">static</span> <span style="color:#088;font-weight:bold">final</span> EntityType TYPE = entityTypeBuilder(ColorSet.class)
        .list(Colors.class, colors)
        .factory(cls -&gt; {<span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> ColorSet();})
        .build();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With all of the entity definitions out of the way, let&#8217;s finally parse the JSON into entities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ResultParser parser = resultParser(ColorSet.class)
        .property(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">colors</span><span style="color:#710">&quot;</span></span>, colors)
        .entityType(<span style="color:#0a8;font-weight:bold">Color</span>.class)
        .string(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">color</span><span style="color:#710">&quot;</span></span>, Thing.name)
        .string(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">category</span><span style="color:#710">&quot;</span></span>, Product.category)
        .string(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">type</span><span style="color:#710">&quot;</span></span>, type)
        .Integer(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">code/rgba[0]</span><span style="color:#710">&quot;</span></span>, red)
        .Integer(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">code/rgba[1]</span><span style="color:#710">&quot;</span></span>, green)
        .Integer(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">code/rgba[2]</span><span style="color:#710">&quot;</span></span>, blue)
        .Integer(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">code/rgba[3]</span><span style="color:#710">&quot;</span></span>, alpha)
        ;

ColorSet colorSet = (ColorSet)parser.parseJSON(jsonData, <span style="color:#080;font-weight:bold">new</span> ColorSet());</code></pre>
</div>
</div>
<div class="paragraph">
<p>This looks very similar to the XML parsing example, but there are some notable differences.  One key difference is how "attributes" are addressed in JSON vs XML.  For XML, attributes are prefixed with "@" in the expression language, whereas they are not for JSON.  E.g. For the tag <code>&lt;person name="Ted"/&gt;</code> we would reference the name using "@name", whereas for the JSON object <code>{"name" : "Ted"}</code>, we would reference the name using "name".</p>
</div>
<div class="paragraph">
<p>This example is intended to provide a glimpse of how you would use CodeRAD&#8217;s XML and JSON parsing facilities in a real app.  I&#8217;ll go over the details such as the expression language and APIs in subsequent sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_birds_eye_view">5.4. A Bird&#8217;s-eye View</h3>
<div class="paragraph">
<p>Codename One&#8217;s data parsing APIs can be grouped in the following three categories, listed in increasing order by level of abstraction:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Low-level parsers</strong> - E.g. <code>XMLParser</code> and <code>JSONParser</code> which parse String data into generic data structures like <code>Element</code>, <code>Map</code>, <code>List</code>, etc..</p>
</li>
<li>
<p><strong>Query and Selection</strong> - E.g. <code>Result</code> and <code>ElementSelector</code> which provide a way to access data in an XML or JSON data set using simple expression languages resembling XPath and CSS selectors.</p>
</li>
<li>
<p><strong>Entity Mapping</strong> - E.g. <code>ResultParser</code> which provides a way to convert JSON and XML data directly into Entity objects.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For low-level parsing, CodeRAD uses the core <code>XMLParser</code> and <code>JSONParser</code> classes.</p>
</div>
<div class="paragraph">
<p>For query and selection, CodeRAD provides its own APIs.  The <code>Result</code> class and its XPath-like expression language are used internally by the <code>ResultParser</code> class for mapping JSON/XML into entities, but you can also use it directly query XML and JSON data directly.</p>
</div>
<div class="paragraph">
<p>The <code>ElementSelector</code> class provides an alternate syntax, resembling CSS selectors, for querying data in an XML data set.  It is currently XML-only, and it leverages XML-specific characteristics to provide a fluid experience.  This API is modeled after the <code>ComponentSelector</code> class, which, itself, is inspired by the popular <strong>jQuery</strong> javascript library.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parsing_xml_and_json">5.5. Parsing XML and JSON</h3>
<div class="paragraph">
<p>Low-level XML and JSON parsing can be performed using the core <a href="https://www.codenameone.com/javadoc/com/codename1/xml/XMLParser.html">XMLParser</a> and <a href="https://www.codenameone.com/javadoc/com/codename1/io/JSONParser.html">JSONParser</a> classes respectively.  For information on using these classes, refer to their javdoc pages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_querying_xml_and_json_data_using_result">5.6. Querying XML and JSON Data Using <code>Result</code></h3>
<div class="paragraph">
<p>The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/processing/Result.html">Result</a> class provides a powerful expression language for accessing content from an XML document or JSON dataset. You can create a <code>Result</code> object to wrap a data set using the <code>Result.fromContent(&#8230;&#8203;)</code> methods which accepts content either as XML/JSON strings, streams, or readers.  You will also accept pre-parsed data in the form of an <code>Element</code> object (for XML data), or <code>Map</code> object (for JSON data).</p>
</div>
<div class="paragraph">
<p>The following is a simple usage example:</p>
</div>
<div class="listingblock">
<div class="title">Sample code pulled from the CodeRAD unit tests demonstrating the use of Result to query XML data.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#0a8;font-weight:bold">String</span> xml = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">&lt;?xml version='1.0'?&gt;</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>
                + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">&lt;person name=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">Paul</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> email=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">paul@example.com</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> dob=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">December 27, 1978</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">&gt;</span><span style="color:#710">&quot;</span></span>
                + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  &lt;children&gt;</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>
                + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">    &lt;person name=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">Jim</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> email=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">jim@example.com</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> dob=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">January 10, 1979</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">/&gt;</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>
                + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">    &lt;person name=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">Jill</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> email=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">jill@example.com</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> dob=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">January 11, 1979</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">/&gt;</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>
                + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">  &lt;/children&gt;</span><span style="color:#b0b">\n</span><span style="color:#710">&quot;</span></span>
                + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">&lt;/person&gt;</span><span style="color:#710">&quot;</span></span>;

<span style="color:#0a8;font-weight:bold">Result</span> r = <span style="color:#0a8;font-weight:bold">Result</span>.fromContent(xml, <span style="color:#0a8;font-weight:bold">Result</span>.XML);

r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/person/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/person[0]/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/person[0]/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/person/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children[0]/person/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.getAsStringArray(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/person/@name</span><span style="color:#710">&quot;</span></span>).length; <span style="color:#777">// 2</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/person/children/person[0]/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">/person[0]/children/person/@name</span><span style="color:#710">&quot;</span></span>); <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Jim</span><span style="color:#710">&quot;</span></span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">children[0]/person/@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// Jim</span>
r.getAsStringArray(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">children/person/@name</span><span style="color:#710">&quot;</span></span>).length; <span style="color:#777">// 2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, we parse an XML string directly using <code>Result</code>. The various <code>get(&#8230;&#8203;)</code>, <code>getAsString(&#8230;&#8203;)</code>, and <code>getAsStringArray(&#8230;&#8203;)</code> method give you a flavour for the expression language.  This example retrieved all data in <code>String</code> format, but the API includes methods for retrieving data for all of the types supported by JSON.  Specifically:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>getAsBoolean(expr)</code></p>
</li>
<li>
<p><code>getAsBooleanArray(expr)</code></p>
</li>
<li>
<p><code>getAsDouble(expr)</code></p>
</li>
<li>
<p><code>getAsDoubleArray(expr)</code></p>
</li>
<li>
<p><code>getAsInteger(expr)</code></p>
</li>
<li>
<p><code>getAsIntegerArray(expr)</code></p>
</li>
<li>
<p><code>getAsLong(expr)</code></p>
</li>
<li>
<p><code>getAsLongArray(expr)</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Working with JSON is very similar, but there are some differences, which are related to the inherent differences between JSON data and XML data.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at an equivalent example, this time using JSON as the source format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#0a8;font-weight:bold">String</span> json = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">name</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">Paul</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">email</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">paul@example.com</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">dob</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">December 27, 1978</span><span style="color:#b0b">\&quot;</span><span style="color:#D20"> </span><span style="color:#710">&quot;</span></span>
        + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">children</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">: [{</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">name</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">Jim</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">email</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">jim@example.com</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">dob</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">January 10, 1979</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">},</span><span style="color:#710">&quot;</span></span>
        + <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">{</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">name</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">Jill</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">email</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">=</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">jill@example.com</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">, </span><span style="color:#b0b">\&quot;</span><span style="color:#D20">dob</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">:</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">January 11, 1979</span><span style="color:#b0b">\&quot;</span><span style="color:#D20">}]}</span><span style="color:#710">&quot;</span></span>;


<span style="color:#0a8;font-weight:bold">Result</span> r = <span style="color:#0a8;font-weight:bold">Result</span>.fromContent(json, <span style="color:#0a8;font-weight:bold">Result</span>.JSON);

r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Paul&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children[0]/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">children[0]/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/person[0]/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// null</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/person/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// null</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children[0]/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.getAsStringArray(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/name</span><span style="color:#710">&quot;</span></span>).length; <span style="color:#777">// 2</span>
r.getAsStringArray(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// String[]{&quot;Jim&quot;, &quot;Jill&quot;}</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./children/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jim&quot;</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">children/person/name</span><span style="color:#710">&quot;</span></span>);  <span style="color:#777">// null</span>
r.getAsString(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">children[0]/person/name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// null</span>
r.getAsStringArray(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">children/person/name</span><span style="color:#710">&quot;</span></span>).length; <span style="color:#777">// 0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though this JSON data is roughly equivalent to the XML data in the above example, we see that some of the expressions we use will differ.  In XML the XML tag is generally used as part of the expression language query.  In JSON there are no "tags", only Map properties and array indices.  Also, XML uses the "@" prefix for addressing attributes to distinguish them from child tags.</p>
</div>
<div class="paragraph">
<p>E.g. Given the following XML tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;root</span> <span style="color:#b48">name</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">John</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;name&gt;</span>Jack<span style="color:#070;font-weight:bold">&lt;/name&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/root&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We would have the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#0a8;font-weight:bold">Result</span> r = <span style="color:#0a8;font-weight:bold">Result</span>.fromContent(xmlString, <span style="color:#0a8;font-weight:bold">Result</span>.XML);
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;Jack&quot;</span>
r.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@name</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// &quot;John&quot;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_the_expression_language">5.6.1. The Expression Language</h4>
<div class="paragraph">
<p>The expression language used by <code>Result</code> is very similar to XPath.  E.g.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>/</code> is a path separator.</p>
</li>
<li>
<p><code>//</code> is a "glob" path separator.</p>
</li>
<li>
<p><code>@attributeName</code> Refers to an attribute named "attributeName".</p>
</li>
<li>
<p><code>[..]</code> Is used for array indices, and attribute filters.</p>
</li>
<li>
<p><code>.</code> Refers to the current element</p>
</li>
<li>
<p><code>..</code> Refers to the parent element</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/processing/Result.html">Result javadocs</a> for more details documentation on the expression language an API.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resultparser_from_xmljson_to_entities">5.7. <code>ResultParser</code> - From XML/JSON to Entities</h3>
<div class="paragraph">
<p>The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/io/ResultParser.html">ResultParser</a> class uses the Result expression language to map XML and JSON data into Entities.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/io/ResultParser.html">ResultParser javadocs</a> for usage examples.</p>
</div>
</div>
<div class="sect2">
<h3 id="_asynchronous_parsing">5.8. Asynchronous Parsing</h3>
<div class="paragraph">
<p>In Codename One, most things are done on the EDT.  The main app lifecycle methods (<code>start()</code>, <code>stop()</code>, etc..) are run on the EDT, as are all event handlers.  Any code that mutates the UI hierarchy <strong>must</strong> be run on the EDT, so we often just stay on the EDT to make things simpler.  No thread race conditions, etc..  Some things, however, would be better done in a background thread so that they don&#8217;t interfer with the app&#8217;s UI performance.  Data parsing, especially when parsing large amounts of data, is one of those tasks that can potentially get in the way of a smooth user experience.  This is for two reasons:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Parsing large amounts of data is processor intensive and can get in the way of the app&#8217;s ability to <strong>"draw" itself at 60fps.</strong></p>
</li>
<li>
<p>Parsing large amounts of data may involve a the creation of lots of short-lived objects (usually strings), which <strong>cause the garbage collector to churn</strong>.  On iOS, in particular, and likely on other platforms, to varying extents, the garbage collector will only "stop the world", in extreme circumstances, where memory is at a critical level, but it <strong>may</strong> need to stop individual threads temporarily that are producing large amounts of "garbage" while it catches up with the backlog.  It is better for everyone involved if excess garbage related to data parsing happens on a thread <strong>other than</strong> the EDT, so that the garbage collector isn&#8217;t faced with the sophie&#8217;s choice of whether to "lock" the EDT, or risk running out of memory.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/io/ParsingService.html">ParsingService</a> class makes it easier to parse data off the EDT.</p>
</div>
<div class="paragraph">
<p>A simple example:</p>
</div>
<div class="listingblock">
<div class="title">Adapting the example from <a href="#json-to-entity">JSON to Entity</a> to perform asynchronouze parsing off the EDT</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ParsingService parserService = <span style="color:#080;font-weight:bold">new</span> ParsingService();

parserService.parseJSON(jsonData, parser, <span style="color:#080;font-weight:bold">new</span> ColorSet()).ready(colorSet -&gt; {
    <span style="color:#777">// Callback passed the resulting colorSet object</span>
    <span style="color:#777">// once parsing is complete</span>
});</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Each <code>ParsingService</code> instance creates and wraps a Thread which is used to perform the parsing.  When you are finished using a particular <code>ParsingService</code> instance, you should call its <code>stop()</code> method to stop the thread.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Refer to the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/io/ParsingService.html">ParsingService javadocs</a> for more examples and details about the API.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-06-18 13:14:02 -0700
</div>
</div>
</body>
</html>